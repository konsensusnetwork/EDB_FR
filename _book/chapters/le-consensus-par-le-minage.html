<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>8&nbsp; Le consensus par le minage – L'Élégance de Bitcoin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/la-resistance-a-la-censure.html" rel="next">
<link href="../chapters/la-valeur-de-l-information.html" rel="prev">
<link href="..//figures/freestarfish.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="8&nbsp; Le consensus par le minage – L’Élégance de Bitcoin">
<meta property="og:description" content="">
<meta property="og:image" content="cover.png">
<meta property="og:site_name" content="L'Élégance de Bitcoin">
<meta name="twitter:title" content="8&nbsp; Le consensus par le minage – L’Élégance de Bitcoin">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="cover.png">
<meta name="twitter:site" content="@konsensusn">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">L’Élégance de Bitcoin</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../chapters/les-debuts-de-bitcoin.html" aria-current="page"> <i class="bi bi-book" role="img" aria-label="Book">
</i> 
<span class="menu-text">Lire en ligne</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bitcoinbook.shop/products/lelegance-de-bitcoin"> <i class="bi bi-shop" role="img" aria-label="Shop">
</i> 
<span class="menu-text">Acheter ce livre !</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/le-consensus-par-le-minage.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Le consensus par le minage</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main">
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Recherche"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">À propos de ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/preface-de-jacques-favier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Préface de Jacques Favier</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/remerciements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Remerciements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/avant-propos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avant-propos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-debuts-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Les débuts de Bitcoin</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/une-croissance-conflictuelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Une croissance conflictuelle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/des-racines-monetaires.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Des racines monétaires</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-necessite-de-decentralisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La nécessité de décentralisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/un-mouvement-technologique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Un mouvement technologique</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-cybermonnaie-avant-nakamoto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">La cybermonnaie avant Nakamoto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-valeur-de-l-information.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">La valeur de l’information</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-consensus-par-le-minage.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Le consensus par le minage</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-resistance-a-la-censure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">La résistance à la censure</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-changement-de-la-monnaie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Le changement de la monnaie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-determination-du-protocole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">La détermination du protocole</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-rouages-de-la-machine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Les rouages de la machine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-contrats-autonomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Les contrats autonomes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-passage-a-l-echelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Le passage à l’échelle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/l-avenir-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">L’avenir de Bitcoin</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#le-problème-des-généraux-byzantins" id="toc-le-problème-des-généraux-byzantins" class="nav-link active" data-scroll-target="#le-problème-des-généraux-byzantins">Le problème des généraux byzantins</a></li>
  <li><a href="#la-preuve-de-travail" id="toc-la-preuve-de-travail" class="nav-link" data-scroll-target="#la-preuve-de-travail">La preuve de travail</a></li>
  <li><a href="#la-chaîne-de-blocs" id="toc-la-chaîne-de-blocs" class="nav-link" data-scroll-target="#la-chaîne-de-blocs">La chaîne de blocs</a></li>
  <li><a href="#lagencement-dun-bloc" id="toc-lagencement-dun-bloc" class="nav-link" data-scroll-target="#lagencement-dun-bloc">L’agencement d’un bloc</a>
  <ul class="collapse">
  <li><a href="#la-version-du-bloc" id="toc-la-version-du-bloc" class="nav-link" data-scroll-target="#la-version-du-bloc">La version du bloc</a></li>
  <li><a href="#lidentifiant-du-bloc-précédent" id="toc-lidentifiant-du-bloc-précédent" class="nav-link" data-scroll-target="#lidentifiant-du-bloc-précédent">L’identifiant du bloc précédent</a></li>
  <li><a href="#la-racine-de-merkle" id="toc-la-racine-de-merkle" class="nav-link" data-scroll-target="#la-racine-de-merkle">La racine de Merkle</a></li>
  <li><a href="#lhorodatage" id="toc-lhorodatage" class="nav-link" data-scroll-target="#lhorodatage">L’horodatage</a></li>
  <li><a href="#la-valeur-cible" id="toc-la-valeur-cible" class="nav-link" data-scroll-target="#la-valeur-cible">La valeur cible</a></li>
  <li><a href="#le-nonce" id="toc-le-nonce" class="nav-link" data-scroll-target="#le-nonce">Le nonce</a></li>
  </ul></li>
  <li><a href="#le-revenu-du-minage" id="toc-le-revenu-du-minage" class="nav-link" data-scroll-target="#le-revenu-du-minage">Le revenu du minage</a></li>
  <li><a href="#la-chaîne-la-plus-longue" id="toc-la-chaîne-la-plus-longue" class="nav-link" data-scroll-target="#la-chaîne-la-plus-longue">La chaîne la plus longue</a></li>
  <li><a href="#la-résistance-à-la-double-dépense" id="toc-la-résistance-à-la-double-dépense" class="nav-link" data-scroll-target="#la-résistance-à-la-double-dépense">La résistance à la double dépense</a></li>
  <li><a href="#lindustrie-minière" id="toc-lindustrie-minière" class="nav-link" data-scroll-target="#lindustrie-minière">L’industrie minière</a></li>
  <li><a href="#un-algorithme-de-consensus-novateur" id="toc-un-algorithme-de-consensus-novateur" class="nav-link" data-scroll-target="#un-algorithme-de-consensus-novateur">Un algorithme de consensus novateur</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="ch:confirmation" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Le consensus par le minage</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span id="enotezch:8" label="enotezch:8"></span></p>
<p><span class="lettrine">B</span><span class="smallcaps">i</span>tcoin est un modèle décentralisé de monnaie numérique issu de l’informatique distribuée, une discipline développée au moment de l’émergence d’Internet. Il se fonde plus précisément sur un réseau pair à pair d’ordinateurs, dans lequel les participants possèdent tous les mêmes responsabilités. En tant que tel, il constitue un <em>système d’argent liquide électronique pair à pair</em>.</p>
<p>Tout l’enjeu de Bitcoin est ainsi de se mettre d’accord sur le contenu d’un registre déterminant qui possède quoi, c’est-à-dire d’arriver à un consensus sur la propriété des unités. En particulier, l’établissement d’un tel accord permet de résoudre le problème de la double dépense, qui se pose dans le monde numérique en raison de la facilité de reproduction des données.</p>
<p>Le consensus – accord unanime au sein d’un groupe de personnes – n’est pas une chose facile à atteindre entre les êtres humains. La conciliation sociale peut fonctionner concernant des règles générales, mais n’est pas adaptée quant aux détails particuliers. C’est pourquoi les organisations humaines sont bien souvent obligées de s’en remettre à une autorité centrale chargée de prendre les décisions.</p>
<p>Bitcoin a précisément pour contrainte d’éviter le recours à un tiers de confiance. Il utilise à cette fin un mécanisme de consensus distribué et ouvert, qui repose sur une activité appelée communément le minage, où la confirmation des transactions, c’est-à-dire leur inclusion dans le registre, est assurée par un procédé nommé la preuve de travail. Dans ce chapitre, nous détaillerons le fonctionnement de cet algorithme de consensus novateur.</p>
<section id="le-problème-des-généraux-byzantins" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="le-problème-des-généraux-byzantins">Le problème des généraux byzantins</h2>
<p>L’enjeu du consensus est illustré par le problème des généraux byzantins, qui est un problème d’informatique distribuée formalisé en 1982 par Leslie Lamport, Robert Shostak et Marshall Pease<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Ce problème traite de la remise en cause de la fiabilité des transmissions et de l’intégrité des participants dans les systèmes distribués, et il s’applique dans les cas où les composants d’un système informatique ont besoin d’être en accord.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Leslie Lamport, Robert Shostak, Marshall Pease, «&nbsp;<em>The Byzantine Generals Problem</em>&nbsp;», in <em>ACM Trans. Program. Lang. Syst.</em>, vol.&nbsp;4, no.&nbsp;3, 1982, pp.&nbsp;382—401&nbsp;: <a href="https://lamport.azurewebsites.net/pubs/byz.pdf" class="uri">https://lamport.azurewebsites.net/pubs/byz.pdf</a>.</p></div><div id="fn2"><p><sup>2</sup>&nbsp;Selon Leslie Lamport, l’appellation byzantine a été choisie pour ne pas offenser le sentiment patriotique du lecteur (l’armée dans la métaphore comporte des traîtres), car cette appellation a été faite <em>a posteriori</em> par les historiens et les Byzantins eux-mêmes se considéraient comme romains. – Voir Leslie Lamport, <em>My Writings</em>&nbsp;: <a href="http://lamport.azurewebsites.net/pubs/pubs.html#byz" class="uri">http://lamport.azurewebsites.net/pubs/pubs.html#byz</a>.</p></div></div><p>Le problème est énoncé sous la forme d’une métaphore faisant intervenir des généraux de l’armée de l’Empire byzantin, l’Empire romain d’Orient qui a subsisté jusqu’en 1453 suite à la chute de la partie occidentale en 476<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Ces généraux assiègent une ville ennemie avec leurs troupes dans le but de l’attaquer. Ils ne peuvent communiquer qu’à l’aide de messages relayés oralement et ils doivent trouver un moyen d’établir un plan de bataille commun par ce moyen. Par exemple, les généraux peuvent chercher à coordonner une attaque à l’aube, et partagent leurs intentions entre eux en envoyant le message «&nbsp;attaque&nbsp;» par le biais d’un message pour confirmer l’assaut, et «&nbsp;retraite&nbsp;» pour l’annuler.</p>
<p>Cependant, un petit nombre de ces généraux s’avèrent être des traîtres au service de l’ennemi qui essaient de semer la confusion au sein de l’armée. Ces traîtres envoient ainsi des messages contradictoires à leurs interlocuteurs, pour faire en sorte que certains généraux loyaux attaquent, et que d’autres battent en retraite au moment de l’assaut, causant par là une défaite certaine, comme illustré sur la figure&nbsp;<a href="#fig:byzantine-generals-attack" data-reference-type="ref" data-reference="fig:byzantine-generals-attack">8.1</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/byzantine-generals-attack.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Attaque des généraux byzantins contre la ville&nbsp;: succès et échec."><img src="img/byzantine-generals-attack.png" class="img-fluid figure-img" alt="Attaque des généraux byzantins contre la ville&nbsp;: succès et échec."></a></p>
<figcaption>Attaque des généraux byzantins contre la ville&nbsp;: succès et échec.</figcaption>
</figure>
</div>
<p>Le problème est de trouver une stratégie (c’est-à-dire un algorithme) permettant de s’assurer que tous les généraux loyaux se mettront d’accord sur le plan de bataille. Les traîtres battront alors en retraite, mais puisque leur nombre est supposément restreint, l’attaque sera quand même un succès.</p>
<p>La situation fait qu’il est difficile de parvenir à un consensus. On ne peut pas désigner un commandant auquel les généraux subordonnés obéiront, car le commandant peut être lui-même un traître. Lamport, Shostak et Pease ont montré que le problème peut être résolu de manière absolue si (et seulement si) les généraux loyaux représentent strictement plus des deux tiers de l’ensemble des généraux<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>&nbsp;; autrement dit, qu’il ne peut pas y avoir plus d’un tiers de traîtres au sein de l’armée.</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;Cette propriété est démontrée dans l’article original de Lamport et al.&nbsp;La condition plus précise est <span class="math inline">\(n \ge 3 m + 1\)</span> où <span class="math inline">\(n\)</span> est le nombre total de généraux et <span class="math inline">\(m\)</span> le nombre de traîtres.</p></div></div><p>La métaphore des généraux byzantins s’applique directement aux systèmes distribués, c’est-à-dire aux systèmes dont les composants sont séparés et doivent communiquer les uns avec les autres pour se synchroniser. Les généraux représentent les composants du système, les traîtres les composants défaillants, et les messages les données transmises entre les composants. Le but est d’obtenir un algorithme permettant de détecter les défaillances, appelées pannes byzantines, et de permettre aux autres composants de les écarter. La résilience obtenue est appelée la tolérance aux pannes byzantines&nbsp;; le système est dit BFT, pour <em>Byzantine Fault Tolerant</em>.</p>
<p>Le problème a été initialement décrit pour les systèmes informatiques reposant sur des composants présents à différents endroits et dans lesquels la bonne transmission des données est critique, comme les systèmes aéronautiques et spatiaux<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. Mais il concerne aussi (ce qui nous intéresse ici) les systèmes pair à pair reposant sur un réseau horizontal de participants, et en particulier les systèmes cryptoéconomiques comme Bitcoin, dans lesquels les nœuds du réseau ont besoin de se mettre d’accord sur le contenu d’un registre. L’objectif est alors de trouver un algorithme permettant à tous les nœuds honnêtes de parvenir à un consensus en présence de nœuds traîtres (dits «&nbsp;byzantins&nbsp;»).</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;L’infrastructure du Boeing 777 repose notamment sur le bus informatique ARINC 629 qui réplique en quadruple les messages envoyés afin de garantir un résultat avec une latence très faible. – Elaine Ou, <em>Byzantine Fault Tolerant Airplanes</em>, 12 février 2017&nbsp;: <a href="https://elaineou.com/2017/02/12/byzantine-fault-tolerant-airplanes/" class="uri">https://elaineou.com/2017/02/12/byzantine-fault-tolerant-airplanes/</a>.</p></div></div><p>Avant Bitcoin, le problème était résolu par des algorithmes dits «&nbsp;classiques&nbsp;» basés sur les idées de Lamport, Shostak et Pease. Le plus connu est probablement l’algorithme de consensus PBFT (pour <em>Practical Byzantine Fault Tolerance</em>), mis au point par Miguel Castro et Barbara Liskov en 1999, qui permettait à un nombre donné de participants de se mettre d’accord en gérant des milliers de requêtes par seconde avec une latence de moins d’une milliseconde.</p>
<p>Bien avant Bitcoin, Wei Dai et Nick Szabo envisageaient d’utiliser ce type d’algorithme pour leurs systèmes de monnaie électronique, b-money et bit gold. De même, de nombreux systèmes cryptoéconomiques en font encore aujourd’hui usage pour des raisons de performance, à l’instar d’Ethereum dont le consensus est basé sur l’algorithme Casper FFG.</p>
<p>Cependant, ces algorithmes impliquent des contraintes fortes&nbsp;: les nœuds doivent connaître l’ensemble des autres nœuds et ils doivent communiquer avec tous les autres. De ce fait, il faut sélectionner les nœuds ayant le droit de participer au consensus avant de lancer l’algorithme, ce qui se fait généralement par preuve d’autorité (<em>proof of authority</em>), via une liste blanche de nœuds, ou par preuve d’enjeu (<em>proof of stake</em>), via un montant d’unités possédées ou déléguées. Cela implique une moins bonne robustesse du système, car les validateurs sont alors connus de tous et donc davantage exposés aux attaques.</p>
<p>Bitcoin résout ce problème d’une manière différente, grâce à un nouveau type d’algorithme&nbsp;: l’algorithme de consensus de Nakamoto par preuve de travail. Celui-ci est plus robuste dans le sens où les nœuds du réseau n’ont pas besoin de connaître l’ensemble des autres nœuds et où aucune identification n’est requise.</p>
<p>Puisque le rôle principal de Bitcoin est le transfert de valeur, l’objectif est de se mettre d’accord sur qui possède quoi, c’est-à-dire sur l’<em>état</em> du système. La solution proposée par Satoshi Nakamoto consiste à employer un registre recensant l’intégralité des transactions réalisées depuis le lancement du système, «&nbsp;la seule façon de confirmer l’absence d’une transaction [étant] d’être au courant de toutes les transactions<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>&nbsp;». Ce registre formant l’<em>historique</em> du système est organisé comme une succession de blocs de transactions, de sorte qu’il est communément appelé la <em>chaîne de blocs</em>. Les nœuds du réseau entretiennent chacun une copie complète de la chaîne dont ils transmettent des éléments sur demande.</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Les nouveaux blocs sont ajoutés à la chaîne de manière régulière grâce à la production d’une preuve de travail. Les acteurs réalisant cette opération sont appelés des mineurs. Les nœuds du réseau arrivent à un consensus en considérant que la chaîne la plus longue est la chaîne correcte. Ainsi, comme l’a écrit Satoshi Nakamoto&nbsp;:</p>
<p>«&nbsp;La chaîne de preuves de travail est une solution au problème des généraux byzantins<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;Satoshi Nakamoto, <em>Re: Bitcoin P2P e-cash paper</em>, 13/11/2008, 22:56:55 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014849.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014849.html</a>.</p></div><div id="fn7"><p><sup>7</sup>&nbsp;Plus précisément, il s’agit de sacrifier un peu de la propriété de sécurité au sens de Lamport pour améliorer la tolérance aux pannes byzantines.</p></div></div><p>La spécificité novatrice de cet algorithme est qu’il résout le problème de manière probabiliste plutôt que de manière absolue<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. Par conséquent, les transactions incluses dans le registre ne sont jamais strictement finales, mais sont (probabilistiquement parlant) considérées comme telles au bout d’un temps. Ce fonctionnement permet de n’avoir besoin que de 51&nbsp;% de validateurs honnêtes, au lieu des 67&nbsp;% requis par les algorithmes classiques.</p>
</section>
<section id="la-preuve-de-travail" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="la-preuve-de-travail">La preuve de travail</h2>
<p>La preuve de travail, de l’anglais <em>proof of work</em>, est un procédé permettant à un appareil informatique de démontrer de manière objective et quantifiable qu’il a dépensé de l’énergie. Ce moyen est utilisé pour sélectionner les ordinateurs dans le cadre de l’accès à un service ou à un privilège.</p>
<p>La preuve de travail est un mécanisme de résistance aux attaques Sybil, qui rend difficile la multiplication des identités à l’excès par un acteur qui chercherait à prendre le contrôle du réseau. Une attaque Sybil est une attaque intervenant au sein d’un réseau ouvert basé sur un système de réputation qui consiste à dupliquer les profils à moindre coût pour en altérer le fonctionnement. C’est par exemple un problème particulièrement présent sur les médias sociaux, où les comptes de robots sont utilisés en masse pour augmenter la visibilité d’un contenu donné.</p>
<p>Le concept de preuve de travail a été décrit pour la première fois par Cynthia Dwork et Moni Naor en 1992, dans un article visant à présenter une méthode permettant de combattre le courrier indésirable (<em>spam</em>) dans les boîtes de réception<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>. Le terme «&nbsp;<em>proof of work</em>&nbsp;» est quant à lui apparu en 1999 sous la plume de Markus Jakobsson et Ari Juels<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;Cynthia Dwork, Moni Naor, <em>Pricing via Processing or Combatting Junk Mail</em>, 1992.</p></div><div id="fn9"><p><sup>9</sup>&nbsp;Markus Jakobsson, Ari Juels, <em>Proofs of Work and Bread Pudding Protocols (Extended Abstract)</em>, 1999.</p></div><div id="fn10"><p><sup>10</sup>&nbsp;Adam Back, <em>[ANNOUNCE] hash cash postage implementation</em>, 28/03/1997 16:52:26 UTC&nbsp;: <a href="https://cypherpunks.venona.com/date/1997/03/msg00774.html" class="uri">https://cypherpunks.venona.com/date/1997/03/msg00774.html</a>&nbsp;; Adam Back, <em>Hashcash – A Denial of Service Counter-Measure</em>, 1 août 2002&nbsp;: <a href="http://www.hashcash.org/hashcash.pdf" class="uri">http://www.hashcash.org/hashcash.pdf</a>.</p></div></div><p>L’idée de Dwork et Naor a été implémentée par le cypherpunk britannique Adam Back en 1997 au moyen de Hashcash, un algorithme produisant de manière simple des preuves de travail avec une fonction de hachage, qui devait principalement servir pour le courrier électronique<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>. Cette implémentation a été reprise dans le système de preuves de travail réutilisables (RPOW) de Hal Finney mis en application en 2004.</p>
<p>L’algorithme de preuve de travail de Hashcash consiste à trouver une collision partielle de la fonction de hachage considérée, c’est-à-dire à obtenir deux messages ayant une empreinte commençant par les mêmes bits de données. À partir de la version 1.0 sortie en 2002, il s’agit plus précisément de découvrir une collision partielle pour l’empreinte zéro, à savoir trouver un antécédent dont l’empreinte commence par un nombre de zéros binaires déterminés. Puisque la fonction de hachage est à sens unique (résistance à la préimage), une telle obtention ne peut être réalisée qu’en testant une à une les différentes possibilités, ce qui demande de l’énergie. L’antécédent obtenu est appelé une preuve de travail.</p>
<p>La preuve de travail est réalisée par le calcul successif d’empreintes d’une chaîne de caractères, composée d’une information de base, et d’un nombre qu’on fait varier, appelé le compteur ou le nonce. L’information de base comporte généralement des indications sur le contexte dans lequel la preuve de travail a été produite (identifiant, date, heure, protocole,&nbsp;etc.) pour démontrer que cette preuve de travail n’a pas déjà été utilisée.</p>
<p>Prenons un exemple pour illustrer le propos. D’abord, on choisit une information de base propre au contexte&nbsp;: pour produire une preuve de travail liée à cet ouvrage et à sa date d’écriture, on peut opter pour l’information de base 20231031181000:BitcoinElegance:. Puis on détermine le degré de la preuve de travail, c’est-à-dire le nombre de zéros binaires par lequel doit commencer l’empreinte, ici 16. On procède ensuite à la recherche du résultat voulu en incrémentant le nonce&nbsp;: à chaque itération, on le met bout à bout avec l’information de base et on vérifie si l’empreinte de l’ensemble est satisfaisante. Le travail s’arrête enfin lorsque l’empreinte commence avec un nombre suffisant de zéros&nbsp;: ici 95&nbsp;690 tentatives. Notre preuve de travail est donc&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>20231031181000:BitcoinElegance:95690</code></pre>
<p>Et l’empreinte correspondante, commençant par 4 zéros hexadécimaux (soit 16 zéros binaires), est&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>0000387b99b1412e3cb6e49548cc0d11bdc797138e1a0f5ff095279a710b895a</code></pre>
<p>Les étapes de cette procédure sont décrites dans le tableau&nbsp;<a href="#table:hashcash-hashes" data-reference-type="ref" data-reference="table:hashcash-hashes">8.1</a>.</p>
<div id="table:hashcash-hashes">
<table class="caption-top table">
<caption>Recherche de la preuve de travail à partir de l’information de base <code>20231031181000:BitcoinElegance:</code>.</caption>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Nonce</strong></th>
<th style="text-align: center;"><strong>Empreinte (SHA-256)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">933c448c18e334c1cc5191f035d8581af611417578392b2d695d521c29b396d5</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">50530c98d1b171826b3d26fa5442e4ce7aa1f8a1277b71bc74d3adc1cd88b9ae</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">fa27ed560df22d676d69966c9a981c5adfc395b4e7f78ca54d2593a98fd2ea38</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">011692df53a84ecdddcd154de4f329e7311090580adb189e8360ea1729d75c99</td>
</tr>
<tr class="odd">
<td style="text-align: center;">95&nbsp;690</td>
<td style="text-align: center;">0000387b99b1412e3cb6e49548cc0d11bdc797138e1a0f5ff095279a710b895a</td>
</tr>
</tbody>
</table>
</div>
<p>Statistiquement, ce type de recherche implique d’essayer 65&nbsp;536 possibilités (<span class="math inline">\(2^{16}\)</span>) pour tomber sur une solution. En moyenne, la production d’une telle preuve de travail démontre donc qu’un effort approchant a été effectué. De plus, il existe une asymétrie entre la production et la vérification, cette dernière ne nécessitant qu’une seule application de la fonction de hachage et étant par conséquent peu coûteuse.</p>
<p>Le coût de production moyen confère une certaine rareté aux preuves de travail&nbsp;: plus leur degré est élevé, plus elles sont difficiles à produire. D’où le fait qu’on puisse les utiliser en tant que marques de qualité pour le courrier électronique comme dans Hashcash, ou bien en tant que pièces monétaires de base comme dans bit gold et RPOW.</p>
<p>Le minage de Bitcoin intègre le procédé de preuve de travail de Hashcash sous la forme d’une variante&nbsp;: l’objectif est de trouver une empreinte inférieure à une valeur cible précise, et non pas une empreinte commençant par un nombre de zéros déterminés. Ce procédé est appliqué entre les blocs de transactions, de sorte que ces blocs, ou plutôt leurs entêtes comme nous l’expliquerons plus bas, constituent eux-mêmes les preuves de travail.</p>
<p>Dans Bitcoin, le rôle de la preuve de travail est double&nbsp;: exiger un coût pour la fabrication des nouveaux bitcoins et faire en sorte que le réseau puisse arriver à un consensus. D’une part, elle a pour but d’imposer la cherté de l’unité de compte. Cela rappelle les modèles qui ont précédé Bitcoin, et c’est pourquoi Hal Finney a été jusqu’à qualifier les bitcoins de «&nbsp;jetons de preuve de travail<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>&nbsp;» (<em>POW tokens</em>) en 2009. Toutefois, les bitcoins ne sont pas exactement des preuves de travail dans le sens où la difficulté de production est variable, évoluant selon la puissance de calcul totale déployée sur le réseau. Ainsi, mis à part dans le cas limite de la difficulté minimale du système, le but est de s’assurer que la production des unités demande de l’énergie, pas d’exiger un coût en travail fixe. D’autre part, la preuve de travail a pour objectif de garantir le consensus sur le réseau, en faisant en sorte que les nœuds honnêtes se mettent d’accord sur qui possède quoi. Elle limite l’accès à la production des blocs&nbsp;: la sélection du validateur (mineur) se fait selon le montant d’énergie dépensé. La preuve de travail joue ici son rôle de défense contre les attaques Sybil en empêchant les attaquants de mettre en place un grand nombre de nœuds pour contrôler le système<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn11"><p><sup>11</sup>&nbsp;Hal Finney, <em>Bitcoin v0.1 released</em>, 24/01/2009 16:48:03 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2009-January/015036.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2009-January/015036.html</a>.</p></div><div id="fn12"><p><sup>12</sup>&nbsp;«&nbsp;Si la majorité était basée sur le principe de vote par adresse IP (une adresse IP, une voix), elle pourrait être détournée par toute personne capable de s’octroyer de nombreuses adresses IP. La preuve de travail est essentiellement basée sur la puissance de calcul&nbsp;: un processeur, une voix.&nbsp;» – Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Ce fonctionnement fait que la chaîne de blocs forme une chaîne de preuves de travail, qui récapitule l’ensemble du travail effectué depuis le début. De ce fait, la chaîne constitue un historique linéaire difficilement malléable comme nous le verrons.</p>
</section>
<section id="la-chaîne-de-blocs" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="la-chaîne-de-blocs">La chaîne de blocs</h2>
<p>La chaîne de blocs, ou <em>blockchain</em> en anglais, est la structure de données regroupant l’ensemble des transactions réalisées depuis le lancement du système. Cette structure est une suite de blocs de transactions, liés les uns aux autres par un procédé appelé l’horodatage.</p>
<p>L’horodatage est une technique permettant d’associer une date et une heure à une information, qui a été décrite en 1991 par Stuart Haber et Scott Stornetta dans le cas particulier de l’horodatage de documents. Le principe est simple&nbsp;: il consiste à hacher une information (ou un document) et de partager l’empreinte obtenue pour prouver que l’information (ou le document) existait à la date de partage. Cette méthode est notamment mise en œuvre par l’intermédiaire de serveurs d’horodatage centralisés qui se chargent d’enregistrer les empreintes, auquel cas on parle d’horodatage certifié ou de <em>trusted timestamping</em>.</p>
<p>Le principe derrière la chaîne de blocs est de lier les blocs les uns aux autres par ce procédé d’horodatage en inscrivant l’empreinte du bloc horodaté dans le bloc suivant. Cela crée des références récursives&nbsp;: le dernier bloc contient l’empreinte de l’avant-dernier bloc, l’avant-dernier de l’antépénultième, etc. pour remonter jusqu’au bloc de genèse (<em>genesis block</em>), c’est-à-dire le premier bloc de la chaîne, considéré comme valide par défaut. Pour la version principale de Bitcoin, ce bloc contient le titre de la une du <em>Times</em> du 3 janvier 2009, ce qui prouve que la chaîne n’a pas été lancée avant et empêche par conséquent l’antidatage.</p>
<p>La particularité de cette structure est qu’elle fait reposer la sécurité des maillons précédents sur les nouveaux maillons. Comme l’écrivait Satoshi Nakamoto dans le livre blanc&nbsp;:</p>
<p>«&nbsp;Chaque horodatage inclut l’horodatage précédent dans son empreinte, formant ainsi une chaîne, au sein de laquelle chaque horodatage supplémentaire renforce le précédent<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn13"><p><sup>13</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>En 2008, l’idée n’était pas nouvelle car elle avait déjà été appliquée en 1995 par les mêmes Haber et Stornetta, qui avaient publié chaque semaine une empreinte cryptographique dans les petites annonces du <em>New York Times</em> afin d’authentifier les documents des clients de leur société. C’était alors la manière la plus sûre de garantir l’intégrité des empreintes, le journal étant distribué quotidiennement à plus d’un million de personnes.</p>
<p>Satoshi Nakamoto a reproduit cette idée de diffusion publique des données en faisant de son système un «&nbsp;serveur d’horodatage distribué<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>&nbsp;» reposant sur un réseau pair à pair librement accessible sur Internet. Dans Bitcoin, chaque bloc comporte en effet une date et une heure inscrites par le mineur, si bien que le résultat obtenu constitue une chaîne temporelle (<em>timechain</em><a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>) témoignant de l’avancée du temps dans le monde réel.</p>
<div class="no-row-height column-margin column-container"><div id="fn14"><p><sup>14</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div><div id="fn15"><p><sup>15</sup>&nbsp;La dénomination <em>timechain</em> a été utilisée par Satoshi dans les commentaires du code source de novembre 2008.</p></div><div id="fn16"><p><sup>16</sup>&nbsp;Hal Finney, <em>Re: Bitcoin P2P e-cash paper</em>, 07/11/2008 23:40:12 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014827.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014827.html</a></p></div><div id="fn17"><p><sup>17</sup>&nbsp;«&nbsp;La chaîne de blocs est une structure en forme d’arbre qui a pour racine le bloc de genèse, chaque bloc pouvant avoir plusieurs candidats à sa suite. pprev et pnext établissent un chemin à travers la chaîne principale / la chaîne plus longue. Un blockindex peut avoir plusieurs pprev qui pointent vers lui, mais pnext ne pointera que vers la branche la plus longue, ou sera nul si le bloc ne fait pas partie de la chaîne la plus longue.&nbsp;» – Satoshi Nakamoto, code source de la version 0.1 du logiciel Bitcoin&nbsp;: <a href="https://github.com/trottier/original-bitcoin/blob/4184ab26345d19e87045ce7d9291e60e7d36e096/src/main.h#L1001-L1008" class="uri">https://github.com/trottier/original-bitcoin/blob/4184ab26345d19e87045ce7d9291e60e7d36e096/src/main.h#L1001-L1008</a>.</p></div></div><p>Cette chaîne a rapidement été qualifiée de chaîne de blocs par les premières personnes impliquées dans Bitcoin. Si le livre blanc parlait déjà d’une «&nbsp;<em>chain of blocks</em>&nbsp;», le terme «&nbsp;<em>block chain</em>&nbsp;» (en deux mots) a lui été créé par Hal Finney dans son premier courriel de réponse à Satoshi le 7 novembre 2008<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>. L’appellation a ensuite été reprise par le fondateur dans le code source de la version 0.1 de Bitcoin et dans ses messages publics<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a>. Le mot <em>blockchain</em> s’est progressivement popularisé au sein de la communauté pour parler de la chaîne de blocs de Bitcoin, puis, par métonymie, de son mécanisme de consensus. Il a enfin (non sans controverse) été élargi à la communication publique pour désigner (sous le nom de «&nbsp;technologie blockchain&nbsp;» ou de «&nbsp;blockchain&nbsp;» tout court) l’ensemble des techniques de consensus au sein de systèmes distribués, que celles-ci fassent intervenir une chaîne de blocs ou non.</p>
<p>La particularité de Bitcoin est d’avoir combiné l’horodatage d’informations et la preuve de travail produite par Hashcash. Puisque ces deux procédés se fondent tous les deux sur une fonction de hachage, il est en effet possible de les fusionner en un seul. La chaîne de blocs est donc à la fois une chaîne temporelle d’horodatages et une chaîne de preuves de travail.</p>
</section>
<section id="lagencement-dun-bloc" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="lagencement-dun-bloc">L’agencement d’un bloc</h2>
<p>Comme son nom l’indique, la chaîne de blocs est une structure constituée de blocs, qui sont des ensembles horodatés et travaillés de transactions. Celle-ci débute par un bloc de genèse, valide par défaut, à partir duquel sont comptés les blocs&nbsp;: cet indice est appelé la <em>hauteur</em> et indique la position du bloc dans la chaîne dans l’ordre de minage. Les blocs peuvent également être comptés dans l’autre sens à partir du tout dernier bloc miné, auquel cas on parle de <em>profondeur</em>.</p>
<p>Chaque bloc possède un identifiant unique qui le démarque des autres. Celui-ci est obtenu par hachage de l’entête du bloc (les données placées avant les transactions) par le double SHA-256. Chaque bloc contient l’identifiant du bloc précédent de sorte que l’ensemble forme une chaîne. Puisque seul l’entête est impliqué dans le calcul de l’identifiant, la chaîne de blocs peut en réalité être réduite à une chaîne d’entêtes, auxquels les transactions sont liées cryptographiquement. L’identifiant commence par un certain nombre de zéros témoignant du fait qu’un travail a été demandé. Ainsi, le bloc lui-même constitue la preuve de travail.</p>
<p>Les blocs sont tous organisés de la même façon, si bien qu’il suffit d’en examiner un seul en détail pour comprendre comment la chaîne se structure. Étudions donc un bloc de la version principale de Bitcoin (BTC) en prenant pour exemple le bloc de hauteur 751&nbsp;005 miné le 25 août 2022, qui contient 6 transactions.</p>
<p>Chaque bloc se décompose en un entête de 80 octets, qui contient ses informations essentielles, et une succession brute de transactions. Par convention, la première transaction du bloc est la transaction de récompense (<em>coinbase transaction</em>) servant à rémunérer le mineur de ce bloc comme nous le verrons plus bas.</p>
<p>L’entête est, lui, divisé en six éléments&nbsp;: la version du bloc, l’identifiant du bloc précédent qui l’associe au bloc présent, une racine de Merkle qui engage cryptographiquement l’ensemble des transactions à l’entête, l’horodatage du bloc, la valeur cible du réseau et le nonce relatif au minage. Les différentes informations contenues dans l’entête sont transmises avec un ordre des octets inverse (dit «&nbsp;<em>little-endian</em>&nbsp;» ou «&nbsp;petit-boutiste&nbsp;») par rapport à l’ordre ordinaire de lecture (qu’on appelle «&nbsp;<em>big-endian</em>&nbsp;» ou «&nbsp;gros-boutiste&nbsp;»). Nous les donnons ici dans l’ordre ordinaire.</p>
<section id="la-version-du-bloc" class="level3">
<h3 class="anchored" data-anchor-id="la-version-du-bloc">La version du bloc</h3>
<p>La version du bloc indique l’ensemble des règles respectées par le bloc. Historiquement, la version 1 marquait un respect des règles du protocole originellement défini par Satoshi. Les versions 2 à 4 ont servi à imposer l’application de certains changements du protocole entre 2013 et 2015. Depuis 2016, ce champ de version est utilisé pour le signalement des mineurs dans le cadre de l’application d’un soft fork par l’exécution du BIP-9 ou par un mécanisme équivalent. Le champ de version de notre bloc est&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>0b00100000000000000000000000000100</code></pre>
</section>
<section id="lidentifiant-du-bloc-précédent" class="level3">
<h3 class="anchored" data-anchor-id="lidentifiant-du-bloc-précédent">L’identifiant du bloc précédent</h3>
<p>L’identifiant du bloc précédent sert à lier l’entête du bloc présent à l’entête du bloc précédent. Dans le cas du bloc de genèse, ce champ est fixé à zéro par convention. Dans notre bloc, il constitue l’identifiant du bloc 751&nbsp;004, qui est&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>000000000000000000073ad6c18c81f2f67b2ca5b5ace8d23cce95812af8c7b6</code></pre>
</section>
<section id="la-racine-de-merkle" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="la-racine-de-merkle">La racine de Merkle</h3>
<p>Le troisième élément de l’entête est la racine de Merkle, qui correspond à l’empreinte finale de l’agencement des transactions en arbre de Merkle.</p>
<p>Un arbre de Merkle, aussi appelé arbre de hachage, est une structure de données conceptualisée en 1979 par le cryptographe Ralph Merkle permettant de vérifier le contenu d’un volume de données sans avoir besoin de toutes les inspecter. Dans une telle structure, les données (constituant alors les feuilles de l’arbre) sont rangées dans un certain ordre et hachées respectivement. Puis leurs empreintes sont combinées deux à deux pour être hachées à leur tour, et ceci jusqu’à ce qu’il ne reste plus qu’une seule empreinte, qu’on appelle la racine. Les chaînes de hachages qui relient les feuilles à la racine sont appelées les branches.</p>
<p>Dans les blocs de Bitcoin, ce sont les transactions qui sont les données hachées. Elles sont d’abord hachées une première fois (ce qui correspond à leur identifiant)&nbsp;:</p>
<p><span class="math display">\[H_A = \mathrm{SHA256d}(~\mathrm{tx}_A~)\]</span></p>
<p>Puis les empreintes résultantes sont concaténées deux à deux (la deuxième empreinte est placée à la suite de la première) et l’ensemble est passé par la même fonction de hachage&nbsp;:</p>
<p><span class="math display">\[H_{A\!B} = \mathrm{SHA256d}(~H_A \parallel H_B~)\]</span></p>
<p>Le procédé est ensuite réitéré. Dans le cas où le nombre d’empreintes à combiner est impair, la dernière est concaténée avec elle-même&nbsp;:</p>
<p><span class="math display">\[H_{E\!F\!E\!F} = \mathrm{SHA256d}(~H_{E\!F} \parallel H_{E\!F}~)\]</span></p>
<p>Une fois qu’il ne reste qu’une seule empreinte, l’arbre est complet&nbsp;: l’empreinte finale obtenue est la racine de Merkle.</p>
<p>La racine de Merkle du bloc 751&nbsp;005 est ainsi&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>268a15b56fe847a067624bd0be186c375baccae9ac6db304438e9da657fe51d9</code></pre>
<p>Le fait de placer la racine dans l’entête interdit à quiconque de modifier, d’ajouter ou de supprimer une transaction, sans modifier l’entête lui-même et devoir reproduire la preuve de travail. L’ensemble des transactions est ainsi attaché à l’entête, ce qui assure l’intégrité du bloc.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/merkle-tree.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Représentation d’un arbre de Merkle à six feuilles."><img src="img/merkle-tree.png" class="img-fluid figure-img" alt="Représentation d’un arbre de Merkle à six feuilles."></a></p>
<figcaption>Représentation d’un arbre de Merkle à six feuilles.</figcaption>
</figure>
</div>
<p>Cette organisation se révèle particulièrement utile pour les portefeuilles légers (dits à vérification de paiement simplifiée ou SPV) qui ne conservent pas la chaîne de blocs entière mais uniquement la chaîne des entêtes, qui est bien moins volumineuse (un peu plus de 62 Mio en novembre 2023). En effet, pour s’assurer de la présence d’une transaction dans un bloc, ils peuvent se contenter de demander les informations liées à la branche (chemin de Merkle) et procéder aux hachages eux-mêmes<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>. Par exemple, un utilisateur voulant vérifier la confirmation de la transaction <span class="math inline">\(\mathrm{tx}_D\)</span> doit simplement demander les informations <span class="math inline">\(H_C\)</span>, <span class="math inline">\(H_{A\!B}\)</span> et <span class="math inline">\(H_{E\!F\!E\!F}\)</span> aux nœuds du réseau et procéder aux différents hachages pour comparer la racine obtenue avec celle contenue dans l’entête. Cela a pour effet de réduire considérablement la charge des portefeuilles légers.</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;Démontrer qu’une feuille fait partie d’un arbre de Merkle requiert de calculer un nombre d’empreintes proportionnel au logarithme binaire du nombre de feuilles (<span class="math inline">\(\log_{2}(n)\)</span>), et non pas proportionnel au nombre de feuilles <span class="math inline">\(n\)</span>. Pour un bloc de 3&nbsp;000 transactions (moyenne haute sur BTC), cela représente 12 empreintes de 32 octets à obtenir et 12 hachages à effectuer.</p></div></div><p>Depuis l’activation de SegWit le 24 août 2017, chaque bloc contient un arbre de Merkle supplémentaire, subordonné à l’arbre classique des transactions décrit plus haut. Il s’agit de l’arbre témoin qui est l’arbre des transactions intégrant les signatures des transactions SegWit (séparées des transactions classiques). La racine de l’arbre témoin est placée dans la transaction de récompense, de sorte qu’elle est prise en compte dans la racine de Merkle principale, ce qui garantit l’intégrité de l’ensemble.</p>
</section>
<section id="lhorodatage" class="level3">
<h3 class="anchored" data-anchor-id="lhorodatage">L’horodatage</h3>
<p>L’horodatage indique la date et l’heure de construction du bloc qui sont déclarées par le mineur. D’un point de vue technique, il est donné par l’heure Unix, c’est-à-dire le nombre de secondes écoulées depuis le 1 janvier 1970 00:00:00 UTC. Pour notre bloc, l’horodatage est de <span class="math inline">\(1661407005\)</span> ce qui correspond à la date du 25 août 2022 à 5 heures 56 minutes et 45 secondes (UTC).</p>
<p>Le mineur ne peut pas choisir cet horodatage au hasard. L’heure déclarée doit se situer dans le futur par rapport au temps médian passé (MTP) – la médiane des horodatages des 11 derniers blocs, qui retarde généralement d’une heure sur le temps réel – et ne doit pas dépasser l’horloge des nœuds récepteurs de deux heures. Cette contrainte relativement permissive permet au temps réseau de rester relativement cohérent avec la réalité.</p>
</section>
<section id="la-valeur-cible" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="la-valeur-cible">La valeur cible</h3>
<p>La valeur cible est la valeur minimale que l’identifiant du bloc peut prendre pour que ce bloc constitue une preuve de travail. Plus cette valeur cible est petite, plus il est facile de trouver une solution et de miner un bloc. Elle est déterminée par le réseau selon les règles de l’algorithme d’ajustement de la difficulté.</p>
<p>La valeur cible est encodée comme un nombre flottant où le premier octet représente un exposant particulier et où la mantisse est déterminée par les 3 octets suivants. Ici, elle est égale à <span class="math inline">\(\mathtt{0x09ed88} \times 256^{(\mathtt{0x17} - 3)}\)</span> c’est-à-dire&nbsp;:</p>
<pre data-fontsize="\footnotesize"><code>00000000000000000009ed880000000000000000000000000000000000000000</code></pre>
<p>Cette information donne aussi la difficulté de minage du bloc, qui est inversement proportionnelle à la valeur cible. Il s’agit du quotient de la valeur cible maximale du système par la valeur cible du réseau<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>. La difficulté minimale du protocole est donc de 1 et celle de notre bloc (arrondie à l’unité près) est quant à elle de <span class="math inline">\(28~351~606~743~494\)</span>, ce qui représente un différentiel énorme&nbsp;! Elle donne également la quantité de travail du bloc, qui est le nombre moyen de hachages nécessaires pour tomber sur une solution<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;En notant <span class="math inline">\(c\)</span> la valeur cible, la difficulté est définie par&nbsp;: <span class="math display">\[d = \frac{C_{\mathrm{max}}}{c}\]</span> où <span class="math inline">\(C_{\mathrm{max}} = \mathtt{0x00ffff} \times 256^{26}\)</span> est la valeur cible maximale du réseau.</p></div><div id="fn20"><p><sup>20</sup>&nbsp;En termes mathématiques, le travail d’un bloc est le quotient du nombre d’empreintes possibles par le nombre d’empreintes satisfaisant le problème. En notant <span class="math inline">\(c\)</span> la valeur cible, le travail est&nbsp;: <span class="math display">\[T = \frac{2^{256}}{c + 1} ~.\]</span></p></div></div></section>
<section id="le-nonce" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="le-nonce">Le nonce</h3>
<p>Le nonce désigne le nombre que le mineur fait varier pour produire la preuve de travail. Ce mot provient de l’expression anglaise «&nbsp;<em>for the nonce</em>&nbsp;» signifiant «&nbsp;pour la circonstance, pour l’occasion&nbsp;», ce qui indique la spécificité de son rôle<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a>. Le mineur fait également varier un nonce supplémentaire au sein de la transaction de récompense, le champ du nonce étant trop petit (8 octets) pour la difficulté de minage actuelle. Le nonce de notre bloc est <span class="math inline">\(4~224~551~499\)</span>.</p>
<div class="no-row-height column-margin column-container"><div id="fn21"><p><sup>21</sup>&nbsp;Une étymologie populaire prétend qu’il serait une contraction de l’expression «&nbsp;<em>number used once</em>&nbsp;», mais celle-ci est incorrecte.</p></div></div><p>Ces deux derniers paramètres (valeur cible et nonce) sont relatifs à la preuve de travail et interviennent dans la formulation du problème mathématique résolu par le mineur. Ce problème se présente sous la forme d’une inégalité mathématique. En notant <span class="math inline">\(c\)</span> la valeur cible du réseau et <span class="math inline">\(\mathrm{EB}\)</span> l’entête du bloc, il s’agit de trouver un nonce <span class="math inline">\(n\)</span> tel que&nbsp;:</p>
<p><span class="math display">\[\mathrm{SHA256d} ( \ \mathrm{EB} ( \ n \ ) \ ) ~ \le ~ c\]</span></p>
<p>Comme on l’a dit, le résultat est utilisé comme identifiant du bloc. La preuve de travail est facilement vérifiable&nbsp;: chaque membre du réseau peut, à partir des données du bloc, s’assurer que le mineur a bien trouvé une solution valide. Dans notre cas, si on compare l’identifiant et la valeur cible, on obtient bien un résultat qui satisfait l’inégalité exigée&nbsp;:</p>
<p><span class="math display">\[\begin{aligned}
\mathtt{0x000000000000000000065aebf106c8824f4b565d54d6d6df32498b2b041cfd07} &amp; \le \\ \mathtt{0x00000000000000000009ed880000000000000000000000000000000000000000} &amp; ~
\end{aligned}\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/bitcoin-segwit-block.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Schéma d’un bloc de Bitcoin (avec SegWit)."><img src="img/bitcoin-segwit-block.png" class="img-fluid figure-img" alt="Schéma d’un bloc de Bitcoin (avec SegWit)."></a></p>
<figcaption>Schéma d’un bloc de Bitcoin (avec SegWit).</figcaption>
</figure>
</div>
</section>
</section>
<section id="le-revenu-du-minage" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="le-revenu-du-minage">Le revenu du minage</h2>
<p>L’une des innovations de Bitcoin est de récompenser la confirmation des transactions à l’aide de son unité de compte interne. Cette propriété crée une incitation économique poussant les mineurs à bien se comporter, ce qui contribue à la solidité du système.</p>
<p>La récompense liée à l’ajout d’un bloc à la chaîne provient en partie de la création monétaire du protocole, d’où le nom de minage employé pour désigner cette activité. Le procédé est en effet analogue à l’extraction minière de l’or dans le monde réel&nbsp;: les mineurs déploient du capital et dépensent de l’énergie pour obtenir les nouveaux bitcoins. Comme expliqué par Satoshi dans le livre blanc&nbsp;:</p>
<p>«&nbsp;L’ajout régulier d’une quantité constante de nouvelles pièces est analogue aux mineurs d’or qui dépensent des ressources pour ajouter de l’or à la circulation<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn22"><p><sup>22</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>La deuxième partie de la récompense provient des frais de transaction payés par les utilisateurs, qui sont collectés sur les transactions incluses dans le bloc. Le tout est reversé au mineur lorsque le bloc est vérifié et accepté par le réseau.</p>
<p>Le minage est ainsi l’activité économique consistant à rassembler les transactions au sein d’un bloc, à produire la preuve de travail et à diffuser le résultat sur le réseau. Ici, nous le distinguons ainsi du simple hachage, qui consiste juste à réaliser les calculs pour créer la preuve de travail et qui peut être réalisé indépendamment de la sélection de transactions, notamment au sein des coopératives de minage (<em>mining pools</em>). Dans ce cadre, les mineurs sont les personnes ou les groupes de personnes réalisant l’activité complète, et les entités se contentant de mettre en place des machines et de déléguer leur pouvoir sur la sélection des transactions ne sont que des «&nbsp;hacheurs&nbsp;».</p>
<p>Le minage se déroule de manière cyclique. Tout d’abord, le mineur sélectionne des transactions à partir de la réserve des transactions (appelée <em>mempool</em>) de son nœud. Puis, il construit un bloc candidat en imposant un entête, en assemblant les transactions et en prenant soin de construire une transaction de récompense qui le rémunère. Il fait ensuite varier le nonce et d’autres éléments du bloc candidat afin de produire la preuve de travail. Enfin, dans le cas où il trouve une solution, il diffuse le bloc sur le réseau le plus rapidement possible pour que les autres nœuds le vérifient et l’acceptent comme le nouveau bloc de la chaîne. Dans le cas contraire, si un nouveau bloc est trouvé entretemps, le mineur l’accepte et abandonne son bloc candidat. Dans les deux cas, la procédure reprend du début avec des transactions différentes.</p>
<p>La récompense de minage est ainsi récupérée par le mineur via l’inclusion d’une transaction de récompense au sein du bloc. Celle-ci doit être, par convention, la première transaction du bloc. Elle possède une entrée unique spécifique ne faisant référence à aucune transaction existante. La transaction de récompense est aussi appelée la base de pièce ou <em>coinbase</em>, car c’est à partir d’elle que sont formés les nouveaux bitcoins. Le mineur dirige cette transaction vers une adresse qu’il contrôle, de sorte qu’il est récompensé si et seulement si son bloc est valide aux yeux du réseau. La récompense que le mineur peut se verser doit être inférieure à la somme de la création monétaire et des frais de transaction. Le mineur peut ainsi se rémunérer moins que ce qui est prévu par le protocole, même si cela n’a aucun sens économique direct<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn23"><p><sup>23</sup>&nbsp;En décembre 2017, le mineur du bloc 501&nbsp;726 s’est ainsi rémunéré de la coquette somme de 0&nbsp;BTC&nbsp;!</p></div></div><p>La création monétaire se fait intégralement par le biais de la transaction de récompense. Tous les bitcoins dans le système sont ainsi le résultat d’une série de transferts commençant par une telle transaction.</p>
<p>La particularité de cette création monétaire est qu’elle est fixée dans le temps et qu’elle n’est pas proportionnelle à la puissance de calcul déployée. Cela est rendu possible par l’algorithme d’ajustement de la difficulté, qui dérive du fait que le système constitue un serveur d’horodatage distribué. En effet, les blocs étant horodatés, il est possible de mesurer leur rythme de production passé et d’ajuster la difficulté de minage en conséquence. Ainsi, comme l’écrivait Satoshi&nbsp;:</p>
<p>«&nbsp;Afin de compenser l’augmentation de la vitesse du matériel et la variation de l’intérêt des nœuds actifs au fil du temps, la difficulté de la preuve de travail est déterminée par une moyenne mobile visant un nombre moyen de blocs par heure. Si ces blocs sont générés trop rapidement, la difficulté augmente<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn24"><p><sup>24</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div><div id="fn25"><p><sup>25</sup>&nbsp;Dans Bitcoin Core, l’algorithme d’ajustement est décrit par la fonction CalculateNextWorkRequired dans le fichier <code>pow.cpp</code>. La variation est limitée à un facteur 4 (multiplication comme division) pour éviter les instabilités. L’algorithme <em>surestime</em> la puissance de calcul déployée car le temps écoulé est mesuré sur 2&nbsp;015 intervalles, et non pas 2&nbsp;016 comme cela devrait se faire.</p></div></div><p>Dans la version principale de Bitcoin, l’intervalle de temps entre chaque bloc (temps de bloc) visé est de 10 minutes ou 600 secondes. L’ajustement a lieu tous les 2016 blocs, ce qui correspond environ à deux semaines, selon la moyenne simple du temps de bloc sur cette période. La nouvelle valeur cible est calculée<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a> à partir de la valeur cible précédente (<span class="math inline">\(c_{k-1}\)</span>) et du temps écoulé depuis le dernier ajustement (<span class="math inline">\(t_{k-1}\)</span>)&nbsp;:</p>
<p><span class="math display">\[c_{k} = \frac{c_{k-1} \cdot t_{k-1}}{2016 \cdot 600}\]</span></p>
<p>Grâce à cet ajustement, le bitcoin possède une politique monétaire déterminée, qui n’est pas soumise à l’arbitraire direct d’un tiers de confiance ou à la quantité de capital déployé. Cette caractéristique le différencie de la monnaie fiat (comme le dollar) qui est émise de manière discrétionnaire par une banque centrale, ou du métal précieux (comme l’or) dont la quantité extraite connaît ses propres variations et suit la demande du marché à long terme. Cette politique monétaire a été décrite précisément pour la première fois par Satoshi Nakamoto dans son courriel de lancement du 8 janvier 2009 où il écrivait&nbsp;:</p>
<p>«&nbsp;Le nombre total de pièces en circulation sera de 21&nbsp;000&nbsp;000. Elles seront distribuées aux nœuds du réseau lorsqu’ils créeront des blocs, la quantité émise étant divisée par deux tous les 4 ans.</p>
<p>les 4 premières années&nbsp;: 10&nbsp;500&nbsp;000 pièces<br>
les 4 années suivantes&nbsp;: 5&nbsp;250&nbsp;000 pièces<br>
les 4 années suivantes&nbsp;: 2&nbsp;625&nbsp;000 pièces<br>
les 4 années suivantes&nbsp;: 1&nbsp;312&nbsp;500 pièces<br>
etc...</p>
<p>Une fois cette somme épuisée, le système pourra prendre en charge les frais de transaction si nécessaire. Il repose sur la concurrence du marché ouvert, et il y aura probablement toujours des nœuds prêts à traiter les transactions gratuitement<a href="#fn26" class="footnote-ref" id="fnref26" role="doc-noteref"><sup>26</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn26"><p><sup>26</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin v0.1 released</em>, 08/01/2009 19:27:40 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2009-January/014994.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2009-January/014994.html</a>.</p></div></div><p>Elle est bien évidemment inscrite dans le code, où elle est appelée subvention ou <em>subsidy</em> en anglais.</p>
<p>L’originalité principale de cette politique monétaire est que la création monétaire est réduite de moitié de manière brusque tous les 210&nbsp;000 blocs (soit environ 4 ans) lors de ce qu’on appelle couramment un <em>halving</em>. En 2023, trois réductions de moitié avaient déjà eu lieu sur le réseau Bitcoin principal&nbsp;: la première s’est produite le 28 novembre 2012, lorsque la subvention du protocole est passée de 50 bitcoins par bloc à 25&nbsp;; la deuxième le 9 juillet 2016, avec une baisse à 12,5 bitcoins par bloc&nbsp;; la troisième le 11 mai 2020, où la subvention a été réduite à 6,25 bitcoins par bloc. La prochaine réduction de moitié devrait se passer en avril 2024, après laquelle les nouveaux bitcoin émis seront de 3,125 par bloc. Sauf modification des règles de consensus, la dernière réduction de moitié sera la 33 et aura lieu aux alentours de 2140. En effet, le montant de création monétaire par bloc passera alors en dessous du satoshi, soit zéro par troncature à l’unité.</p>
<p>À long terme, cette politique monétaire atypique fait du bitcoin une monnaie à quantité fixe. En effet, le montant maximal de bitcoins en circulation doit tendre, au fil du temps, vers une limite&nbsp;: la fameuse limite des 21 millions. Celle-ci n’est qu’une déduction des conditions d’émission susmentionnées, ce qui s’exprime en termes mathématiques par la convergence de la série des montants minés entre les halvings<a href="#fn27" class="footnote-ref" id="fnref27" role="doc-noteref"><sup>27</sup></a>&nbsp;:</p>
<div class="no-row-height column-margin column-container"><div id="fn27"><p><sup>27</sup>&nbsp;Cette convergence est illustrée par le paradoxe d’Achille et de la tortue formulé par le philosophe grec Zénon. La suite <span class="math inline">\(\left( \sum_{i=1}^{n} (1/2)^i \right)\)</span> converge vers <span class="math inline">\(1\)</span> lorsque <span class="math inline">\(n\to+\infty\)</span>.</p></div></div><p><span class="math display">\[N_{\mathrm{max}} = \sum_{i=0}^{+\infty} \left( {210~000 \cdot \frac{50}{2^i}} \right) = 21~000~000 \cdot \sum_{i=1}^{+\infty} \left(\frac{1}{2}\right)^i = 21~000~000\]</span></p>
<p>La limite des 21 millions est une borne supérieure&nbsp;: en l’absence d’un changement des règles de consensus, elle ne sera jamais formellement atteinte, en raison de la nature optionnelle de la récompense de minage, du caractère discret des unités et de la perte irrémédiable de bitcoins. De plus, les bitcoins dont les propriétaires ont perdu leurs clés privées réduisent considérablement la quantité réelle de bitcoins en circulation sans pour autant que cela ne soit pris en compte dans le calcul.</p>
<p>La création monétaire a ainsi vocation à s’amenuiser et à devenir négligeable, et ce plus rapidement que l’on imagine. En effet, en 2023, le nombre de bitcoins dépensables avait déjà dépassé les 19,5 millions. C’est pourquoi cette subvention doit en toute logique être remplacée par l’autre source de revenu pour les mineurs, à savoir les frais de transaction<a href="#fn28" class="footnote-ref" id="fnref28" role="doc-noteref"><sup>28</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn28"><p><sup>28</sup>&nbsp;«&nbsp;Une fois qu’un nombre prédéterminé de pièces a été mis en circulation, l’incitation peut être entièrement financée par les frais de transaction et ne plus requérir aucune inflation.&nbsp;» – Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 24 mars 2009.</p></div></div><p>Les frais de transaction sont les commissions payées par les utilisateurs pour la confirmation de leurs transactions. Les frais d’une transaction peuvent être versés directement par l’expéditeur (client) ou indirectement par le destinataire (commerçant) par l’intermédiaire d’une remise sur le produit vendu. Ils sont récupérés par le mineur sur chaque transaction du bloc selon une règle implicite&nbsp;: il s’agit de la différence entre le montant en entrée de la transaction et son montant en sortie. Cette différence peut être de zéro (transaction gratuite), mais elle est toujours comptabilisée. Les frais sont ajoutés à la transaction de récompense indistinctement des bitcoins issus de la création monétaire. Bitcoin intègre ainsi un système interne et optimisé de frais de transaction, qui évite l’alourdissement inutile des transactions et des blocs.</p>
<p>L’existence des frais de transaction a vocation à perdurer par conception, même si ceux-ci devenaient très bas. Contrairement à l’opinion exprimée par Satoshi, la confirmation d’une transaction a en général un coût, même marginal<a href="#fn29" class="footnote-ref" id="fnref29" role="doc-noteref"><sup>29</sup></a>, et une transaction qui paie trop peu de frais par rapport à la charge apportée n’a aucune raison économique d’être confirmée. De ce fait, il n’y a pas lieu de s’imaginer que la chaîne de blocs s’arrête.</p>
<div class="no-row-height column-margin column-container"><div id="fn29"><p><sup>29</sup>&nbsp;Le seul cas envisageable de transaction gratuite est celui d’une grande transaction de consolidation qui amoindrirait la charge des mineurs en réduisant considérablement l’ensemble des sorties transactionnelles non dépensées.</p></div></div><p>En outre, les règles du protocole restreignent usuellement l’espace de bloc par le biais d’une limite explicite sur la taille (ou le poids) des blocs. Cette restriction crée un plafond de production qui, lorsqu’il est atteint, fait que le mineur rationnel sélectionne les transactions qui paient le taux le plus élevé de frais, toutes choses étant égales par ailleurs. Il existe donc, dans le cas d’une congestion du réseau, un effet d’enchères pouvant faire augmenter le niveau moyen des frais de manière drastique.</p>
<p>Bien que les frais constituent la façon principalement envisagée de rémunérer les mineurs à terme, des méthodes alternatives de financement ont été proposées.</p>
<p>La première est l’émission résiduelle (<em>tail emission</em>), qui consiste à maintenir une création monétaire constante au cours du temps, dans le but que le revenu de minage ne tombe pas trop bas<a href="#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup>30</sup></a>. L’instauration de cette caractéristique aurait pour effet de modifier la politique monétaire du bitcoin et de faire disparaître la limite des 21 millions, d’où son caractère hautement controversé.</p>
<div class="no-row-height column-margin column-container"><div id="fn30"><p><sup>30</sup>&nbsp;Peter Todd, <em>Surprisingly, Tail Emission Is Not Inflationary</em>, 9 juillet 2022&nbsp;: <a href="https://petertodd.org/2022/surprisingly-tail-emission-is-not-inflationary" class="uri">https://petertodd.org/2022/surprisingly-tail-emission-is-not-inflationary</a>.</p></div></div><p>Pour donner un exemple, l’émission résiduelle est mise en place dans la variante Monero depuis 2015. Elle est devenue effective le 9 juin 2022, date depuis laquelle il se crée 0,3&nbsp;monero par minute, soit un taux de création monétaire annualisé de 0,87&nbsp;% à ce moment-là. Une telle émission résiduelle existe également dans Dogecoin depuis 2015, à raison de 10&nbsp;000 dogecoins par minute, pour un taux annualisé de 3,7&nbsp;% en novembre 2023.</p>
<p>La deuxième méthode de financement proposée est le demeurage, ou coût de détention, qui consiste à prélever la monnaie demeurée immobile depuis un temps donné<a href="#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup>31</sup></a>. Les bitcoins de Satoshi, qui représentent une manne financière importante, sont notamment concernés. Toutefois, il s’agirait d’une atteinte au système de propriété de Bitcoin et il y a donc peu de chances que cette méthode rencontre le succès.</p>
<div class="no-row-height column-margin column-container"><div id="fn31"><p><sup>31</sup>&nbsp;Jorge Timón, <em>Freicoin: bitcoin with demurrage</em>, 24/02/2011 11:56:03 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=3816.msg54170#msg54170" class="uri">https://bitcointalk.org/index.php?topic=3816.msg54170#msg54170</a>.</p></div></div></section>
<section id="la-chaîne-la-plus-longue" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="la-chaîne-la-plus-longue">La chaîne la plus longue</h2>
<p>Venons-en maintenant au sujet central de ce chapitre&nbsp;: l’atteinte du consensus par le minage. Comme nous l’avons expliqué ci-dessus, le minage est le procédé permettant aux mineurs d’ajouter des blocs à la chaîne, chose pour laquelle ils sont rémunérés. Mais nous n’avons pas exposé comment il permettait d’arriver à un accord dans un contexte antagoniste, en présence d’acteurs malveillants «&nbsp;byzantins&nbsp;».</p>
<p>Les nœuds suivent un protocole composé des règles de réseau, qui leur permettent de rentrer en communication, et des règles de consensus, qui concernent la forme des transactions et des blocs, que nous détaillerons dans le chapitre&nbsp;<a href="le-changement-de-la-monnaie.html" data-reference-type="ref" data-reference="ch:changement">10</a>. Les nœuds qui enfreignent ces règles voient leurs connexions être fermées par leurs pairs et sont mis sur liste noire si nécessaire. Il est donc impossible de faire accepter une transaction ou un bloc au réseau qui ne soit valide selon les règles de consensus.</p>
<p>Néanmoins, les nœuds byzantins peuvent semer la discorde dans le respect des règles de consensus, en produisant des blocs concurrents. En effet, rien n’empêche <em>a priori</em> un attaquant de produire des blocs de transactions qui soient valides mais qui ne soient pas rattachés à la branche principale et de les soumettre au réseau.</p>
<p>Ce problème est résolu par le biais d’un principe simple mais efficace&nbsp;: le principe de la chaîne la plus longue. Celui-ci a été décrit par Satoshi dans le livre blanc&nbsp;:</p>
<p>«&nbsp;La décision majoritaire est représentée par la chaîne la plus longue, sur laquelle le plus grand effort de preuve de travail a été investi<a href="#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup>32</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn32"><p><sup>32</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div><div id="fn33"><p><sup>33</sup>&nbsp;En réalité, au début c’était bel et bien la chaîne possédant le plus de blocs qui était sélectionnée. Mais ce principe a été redéfini le 25 juillet 2010 au sein de la version 0.3.3 du logiciel pour prendre en compte la notion de travail.</p></div></div><p>Les nœuds du réseau se mettent d’accord en sélectionnant la chaîne possédant le plus de travail accumulé, ce qui se matérialise généralement par une chaîne plus longue en nombre de blocs<a href="#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup>33</sup></a>. Lorsqu’une chaîne possédant une quantité strictement plus grande de travail est publiée, les nœuds suivent cette chaîne, que celle-ci soit dans la continuité de la dernière ou qu’elle fasse référence à une branche plus ancienne. Cette règle fait en sorte que les nœuds suivent toujours la chaîne sur laquelle un montant supérieur d’énergie a été investi. L’algorithme de consensus résultant de l’application de ce principe est appelé l’algorithme de consensus de Nakamoto par preuve de travail, en hommage à son concepteur.</p>
<p>La meilleure manière d’appréhender le fonctionnement de cet algorithme est de prendre le cas d’un embranchement (appelé <em>fork</em> en anglais) de la chaîne. Celui-ci peut être créé par un acteur malveillant, mais dans la réalité il est généralement engendré de manière accidentelle, lorsque deux mineurs éloignés trouvent chacun un bloc différent dans un intervalle de temps réduit et que les nœuds du réseau ne reçoivent pas le même bloc en premier. Il n’y a alors aucun moyen de départager les deux branches, celles-ci étant également correctes en vertu du principe de la chaîne la plus longue. Ce type d’embranchement accidentel est commun et se produit de temps en temps sur le réseau pour des raisons de latence.</p>
<p>Cette situation et sa résolution ont été décrites par Satoshi dans le livre blanc&nbsp;:</p>
<p>«&nbsp;Si deux nœuds transmettent simultanément des versions différentes du bloc suivant, certains nœuds peuvent recevoir l’une ou l’autre version en premier. Dans ce cas, ils travaillent sur la première version qu’ils ont reçue, mais conservent l’autre branche au cas où elle deviendrait plus longue. L’égalité est rompue lorsque la preuve de travail suivante est trouvée et qu’une branche devient plus longue&nbsp;; les nœuds qui travaillaient sur l’autre branche passent alors sur la chaîne la plus longue<a href="#fn34" class="footnote-ref" id="fnref34" role="doc-noteref"><sup>34</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn34"><p><sup>34</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Le réseau passe par trois étapes. Tout d’abord, il se comporte de manière attendue&nbsp;: les mineurs prolongent la chaîne la plus longue, sur laquelle le reste des nœuds se coordonnent. Puis, le conflit a lieu&nbsp;: deux branches correctes coexistent et les mineurs travaillent pour prolonger la chaîne à partir du bloc reçu en premier. Enfin, l’embranchement est résolu&nbsp;: un mineur trouve un nouveau bloc et sa chaîne, qui devient plus longue, est acceptée par le réseau.</p>
<p>Il se produit alors ce qu’on appelle une recoordination (<em>reorganization</em>) qui réconcilie les nœuds du réseau entre eux. Le bloc de la branche faible est considéré comme incorrect et mis de côté. On dit que ce bloc est rendu orphelin (<em>orphaned</em>) car il perd son attachement à la chaîne mère<a href="#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup>35</sup></a>. La branche forte (possédant le plus de travail accumulé) est considérée comme la version correcte de la chaîne.</p>
<div class="no-row-height column-margin column-container"><div id="fn35"><p><sup>35</sup>&nbsp;L’appellation (quelque peu ambigüe) de «&nbsp;bloc orphelin&nbsp;» a été introduite par Satoshi Nakamoto au sein de la première version du logiciel. On parle aussi de «&nbsp;bloc oncle&nbsp;» (en référence au fait qu’il ne donne pas de descendance fertile) ou bien de «&nbsp;bloc périmé&nbsp;» (<em>stale block</em>).</p></div></div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/blockchain-common-fork.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Schéma d’un embranchement commun de la chaîne."><img src="img/blockchain-common-fork.png" class="img-fluid figure-img" alt="Schéma d’un embranchement commun de la chaîne."></a></p>
<figcaption>Schéma d’un embranchement commun de la chaîne.</figcaption>
</figure>
</div>
<p>Tout conflit sur le réseau est résolu de la sorte, ce qui a pour conséquence de conférer une nature particulière à l’algorithme de Nakamoto, et par extension à Bitcoin.</p>
<p>Ce fonctionnement impose tout d’abord deux contraintes majeures sur la sécurité. La première est que la sécurité minière du réseau repose sur la supposition qu’une majorité de la puissance de calcul («&nbsp;51&nbsp;%&nbsp;») se comporte de manière honnête. Comme l’expliquait Satoshi&nbsp;:</p>
<p>«&nbsp;Le système est sécurisé tant que les nœuds honnêtes contrôlent collectivement plus de puissance de calcul qu’un groupe de nœuds qui coopéreraient pour réaliser une attaque<a href="#fn36" class="footnote-ref" id="fnref36" role="doc-noteref"><sup>36</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn36"><p><sup>36</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>La seconde est que la sécurité d’une transaction donnée est probabiliste et dépend de la profondeur à laquelle elle se trouve dans la chaîne. La transaction est d’abord vérifiée par le réseau (zéro confirmation), puis confirmée au sein d’un bloc (une confirmation) et finit par être considérée comme irréversible, généralement à partir de six confirmations pour les montants ordinaires sur la version principale de Bitcoin. Cela contraint l’utilisateur à estimer le nombre de confirmations qu’il doit attendre en fonction de la sécurité désirée.</p>
<p>Cette particularité se transcrit dans le fonctionnement du minage par la maturité de la base de pièce (<em>coinbase maturity</em>), qui est le nombre de confirmations nécessaire pour que la sortie de la transaction de récompense devienne dépensable. Cette contrainte est mise en place pour éviter la mauvaise utilisation des fonds due à une recoordination peu profonde. Le délai sur le réseau BTC est aujourd’hui de 101 confirmations.</p>
<p>L’algorithme de Nakamoto possède également trois avantages principaux. D’abord, il a pour intérêt d’avoir un critère objectif sur lequel se reposer&nbsp;: tout le monde peut reconstituer la chaîne à partir du bloc de genèse et constater qu’il s’agit de la chaîne correcte. Même dans le cas extrême d’un cloisonnement mondial et prolongé du réseau dû à une guerre ou une catastrophe naturelle, le système peut finir par se recoordonner<a href="#fn37" class="footnote-ref" id="fnref37" role="doc-noteref"><sup>37</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn37"><p><sup>37</sup>&nbsp;Satoshi Nakamoto, <em>Re: Anonymity</em>, 08/07/2010, 19:12:00 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=241.msg2071#msg2071" class="uri">https://bitcointalk.org/index.php?topic=241.msg2071#msg2071</a>.</p></div></div><p>Ensuite, il permet la participation ouverte au consensus&nbsp;: tout ce qui est requis du mineur est une preuve de travail valide, de sorte que le minage est anonyme par essence.</p>
<p>Enfin, cet algorithme par preuve de travail assure la robustesse du réseau&nbsp;: un mineur n’a pas à connaître tous les autres participants, ce qui permet au réseau d’être composé de dizaines (voire de centaines) de milliers de nœuds.</p>
</section>
<section id="la-résistance-à-la-double-dépense" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="la-résistance-à-la-double-dépense">La résistance à la double dépense</h2>
<p>La double dépense est le fait pour un acteur de faire accepter successivement deux transactions au réseau dans le but de déstabiliser l’état du système et d’en bénéficier d’une manière ou d’une autre. La deuxième transaction peut constituer une annulation de la première, dans laquelle l’acteur malveillant réalise un transfert vers lui-même.</p>
<p>La double dépense constitue un problème dans le cas des transactions non confirmées, c’est-à-dire des transactions qui ont été diffusées sur le réseau, vérifiées par les nœuds et placées dans leurs <em>mempools</em>, mais qui n’ont pas encore été incluses dans un bloc de la chaîne. Aucun consensus n’a été réalisé à propos de ces transactions, mais le commerçant peut décider de les accepter dans le cas où les montants engagés sont faibles<a href="#fn38" class="footnote-ref" id="fnref38" role="doc-noteref"><sup>38</sup></a>. Le risque est qu’un fraudeur reparte avec la marchandise et réussisse à faire accepter une version alternative de la transaction vue par le commerçant, soit en la diffusant au même moment et en espérant qu’elle arrive en premier au mineur, soit en payant plus de frais (ce qui peut être fait systématiquement avec Replace-by-Fee) pour soudoyer le mineur, soit encore en minant préalablement un bloc contenant la transaction (attaque Finney<a href="#fn39" class="footnote-ref" id="fnref39" role="doc-noteref"><sup>39</sup></a>).</p>
<div class="no-row-height column-margin column-container"><div id="fn38"><p><sup>38</sup>&nbsp;Dans un message sur le forum en juillet 2010, Satoshi écrivait à propos de l’acceptation des transactions non confirmées&nbsp;: «&nbsp;Je pense qu’il sera possible pour une entreprise de traitement des paiements de fournir comme service une distribution rapide de transactions avec une vérification suffisante en 10 secondes ou moins. Les nœuds du réseau n’acceptent que la première version d’une transaction qu’ils reçoivent pour l’incorporer dans le bloc qu’ils essaient de générer. Lorsqu’on diffuse une transaction et que quelqu’un d’autre diffuse une double dépense au même moment, c’est une course à la propagation vers le plus grand nombre de nœuds qui a lieu. Si l’une d’elles a une légère avance, elle se propagera géométriquement plus vite sur le réseau et atteindra la plupart des nœuds. [...] Le processeur de paiement a des connexions avec de nombreux nœuds. Lorsqu’il reçoit une transaction, il l’envoie et, en même temps, surveille le réseau pour détecter les doubles dépenses. S’il reçoit une double dépense sur l’un de ses nombreux nœuds d’écoute, il signale que la transaction est mauvaise.&nbsp;» – Satoshi Nakamoto, <em>Re: Bitcoin snack machine (fast transaction problem)</em>, 17/07/2010 22:29:13 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=423.msg3819#msg3819" class="uri">https://bitcointalk.org/index.php?topic=423.msg3819#msg3819</a>.</p></div><div id="fn39"><p><sup>39</sup>&nbsp;Hal Finney, <em>Re: Best practice for fast transaction acceptance - how high is the risk?</em>, 13/02/2011, 21:48:44 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=3441.msg48384#msg48384" class="uri">https://bitcointalk.org/index.php?topic=3441.msg48384#msg48384</a>.</p></div></div><p>La solution à ce problème est de se mettre d’accord sur la transaction correcte pour faire disparaître la double dépense, <em>ce qui est précisément le but du minage</em>. Cependant, le minage n’empêche pas la double dépense de manière absolue, étant plutôt un mécanisme de résistance. Voyons ce qui garantit cette caractéristique.</p>
<p>Un certain nombre de perturbations opportunistes peuvent avoir lieu au niveau de l’activité minière comme l’attaque vector76<a href="#fn40" class="footnote-ref" id="fnref40" role="doc-noteref"><sup>40</sup></a> ou le minage égoïste<a href="#fn41" class="footnote-ref" id="fnref41" role="doc-noteref"><sup>41</sup></a>, mais la plus importante d’entre elles est l’attaque de double dépense par recoordination de chaîne. Celle-ci consiste à utiliser une part importante de la puissance de calcul du réseau (généralement une majorité) afin de réécrire le passé de la chaîne et modifier une ou plusieurs transactions. Cette attaque a été décrite précisément par Satoshi Nakamoto dans le livre blanc<a href="#fn42" class="footnote-ref" id="fnref42" role="doc-noteref"><sup>42</sup></a> et dans son courriel de réponse à John Levine du 3 novembre 2008<a href="#fn43" class="footnote-ref" id="fnref43" role="doc-noteref"><sup>43</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn40"><p><sup>40</sup>&nbsp;vector76, <em>Re: Fake Bitcoins?</em>, 17/08/2011 17:37:56 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=36788.msg463391#msg463391" class="uri">https://bitcointalk.org/index.php?topic=36788.msg463391#msg463391</a>.</p></div><div id="fn41"><p><sup>41</sup>&nbsp;Ittay Eyal, Emin Gün Sirer, <em>Majority is not Enough: Bitcoin Mining is Vulnerable</em>, 2013.</p></div><div id="fn42"><p><sup>42</sup>&nbsp;«&nbsp;Nous considérons le scénario d’un attaquant qui tente de générer une chaîne alternative plus rapidement que la chaîne honnête. Même en cas de réussite, cela n’expose pas le système à des modifications arbitraires [...]. Un attaquant peut seulement essayer de modifier l’une de ses propres transactions afin de récupérer l’argent qu’il a récemment dépensé.&nbsp;» – Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div><div id="fn43"><p><sup>43</sup>&nbsp;«&nbsp;Même si un individu malintentionné parvenait à maîtriser le réseau, ce n’est pas comme s’il devenait instantanément riche. Tout ce qu’il pourrait faire, c’est récupérer l’argent qu’il a lui-même dépensé, comme un chèque sans provision. Pour tirer parti de cette possibilité, il faudrait qu’il achète une chose à un commerçant, qu’il attende qu’elle soit expédiée, puis qu’il prenne le contrôle du réseau et essaie de récupérer son argent. Je ne pense pas qu’il puisse se faire autant d’argent en essayant de monter un tel stratagème qu’en générant des bitcoins. Avec une ferme de machines zombies aussi grande, il pourrait générer plus de bitcoins que tous les autres réunis.&nbsp;» – Satoshi Nakamoto, <em>Re: Bitcoin P2P e-cash paper</em>, 03/11/2008 16:23:49&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014818.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014818.html</a>.</p></div></div><p>Cette attaque est réalisée en trois étapes. Elle peut être faite à l’aide d’une minorité de la puissance de calcul, auquel cas elle ne possède qu’une certaine probabilité de réussir. Cependant, par souci de simplicité, nous supposerons qu’un mineur a réuni la majorité de la puissance de calcul du réseau. L’attaque constitue donc une attaque des 51&nbsp;%, aussi appelée attaque de la majorité.</p>
<p>La première étape est l’achat d’un bien ou d’un service auprès d’un commerçant. L’attaquant procède à une transaction en bitcoins (dite «&nbsp;légitime&nbsp;») en l’échange de quoi le commerçant lui fournit une chose de même valeur. Typiquement, il s’agira d’une autre cryptomonnaie ou du dollar auprès d’une plateforme de change.</p>
<p>La deuxième étape est le minage d’une chaîne parallèle. Une fois que la transaction légitime a été confirmée au sein d’un bloc, l’attaquant construit une chaîne parallèle en secret à partir du bloc précédent, qu’il prend soin de ne pas dévoiler au reste du réseau. Dans le même temps, il crée et signe une autre transaction (dite «&nbsp;frauduleuse&nbsp;») qui dépense les mêmes bitcoins que la première et qui les renvoie vers une adresse en son contrôle. Il inclut cette transaction frauduleuse dans sa chaîne parallèle. Puisque l’attaquant dispose de la majorité de la puissance de calcul du réseau, il est sûr qu’à un moment ou à un autre, cette chaîne sera plus longue que l’autre.</p>
<p>La troisième étape est la recoordination de chaîne, représentée sur la figure&nbsp;<a href="#fig:doublespending-attack" data-reference-type="ref" data-reference="fig:doublespending-attack">8.5</a>. L’attaquant a continué de miner sa chaîne parallèle jusqu’à la livraison du bien économique acheté. À ce moment-là, il dévoile sa chaîne au reste du réseau, qui doit accepter celle-ci en vertu du principe de la chaîne la plus longue. Les nœuds procèdent alors à une recoordination&nbsp;: les blocs de l’ancienne chaîne sont écartés (rendus orphelins), leurs transactions sont remises dans la mempool et les nouveaux blocs sont vérifiés et ajoutés à la chaîne. Comme la transaction légitime dépense les mêmes fonds que la transaction frauduleuse, qui est incluse dans la nouvelle chaîne, cette transaction légitime est invalidée en tant que double dépense. Le commerçant ne possède plus les bitcoins, qui reviennent à l’attaquant.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/mining-attack-doublespending.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Attaque de double dépense par recoordination de chaîne."><img src="img/mining-attack-doublespending.png" class="img-fluid figure-img" alt="Attaque de double dépense par recoordination de chaîne."></a></p>
<figcaption>Attaque de double dépense par recoordination de chaîne.</figcaption>
</figure>
</div>
<p>Il s’agit d’une attaque opportuniste&nbsp;: elle est motivée par un gain, c’est-à-dire le bien économique obtenu, qui doit être supérieur au coût (matériel, logistique, électrique et logiciel) nécessaire pour y procéder. Sur le réseau Bitcoin principal, ce coût se chiffre aujourd’hui en milliards de dollars<a href="#fn44" class="footnote-ref" id="fnref44" role="doc-noteref"><sup>44</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn44"><p><sup>44</sup>&nbsp;Braiins, <em>How Much Would it Cost to 51% Attack Bitcoin?</em>, 11 janvier 2021&nbsp;: <a href="https://braiins.com/blog/how-much-would-it-cost-to-51-attack-bitcoin" class="uri">https://braiins.com/blog/how-much-would-it-cost-to-51-attack-bitcoin</a>.</p></div></div><p>Cette attaque doit être distinguée de la censure, que nous décrirons dans le chapitre&nbsp;<a href="la-resistance-a-la-censure.html" data-reference-type="ref" data-reference="ch:censure">9</a>, et qui consiste à refuser de confirmer des transactions selon un critère arbitraire. Cette dernière repose en effet sur des incitations <em>extérieures</em> à l’économie de Bitcoin, le mineur rationnel n’ayant, au sein du système, aucun intérêt économique à ne pas inclure les transactions payant un taux de frais suffisant dans ses blocs.</p>
<p>Comme souligné par Satoshi, le système est sécurisé tant que la majorité de la puissance de calcul est associée à des nœuds honnêtes, c’est-à-dire des nœuds qui ne cherchent pas à réaliser des doubles dépenses, ni censurer. La sécurité minière repose donc sur une barrière de sécurité, qui représente la charge financière de l’attaquant pour réaliser une double dépense.</p>
<p>Cette barrière n’est pas construite de manière bénévole mais repose sur la récompense du protocole, faisant du minage un procédé essentiellement <em>économique</em>. En particulier, la résistance à la double dépense – à savoir la difficulté à effectuer une attaque de double dépense – dérive directement du revenu minier total, qui incite les nœuds à rester honnêtes. Tel que l’écrivait Satoshi dans le livre blanc&nbsp;:</p>
<p>«&nbsp;L’incitation peut contribuer à encourager les nœuds à rester honnêtes. Si un attaquant cupide est capable de réunir plus de puissance de calcul que l’ensemble des nœuds honnêtes, il aura à choisir entre l’utiliser pour escroquer des gens en leur récupérant ses paiements, ou l’utiliser pour générer de nouvelles pièces. Il devrait trouver plus rentable de respecter les règles du jeu, celles-ci lui permettant d’obtenir plus de nouvelles pièces que tous les autres réunis, plutôt que de saper le système et la validité de sa propre richesse<a href="#fn45" class="footnote-ref" id="fnref45" role="doc-noteref"><sup>45</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn45"><p><sup>45</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Non seulement la récompense peut être supérieure au gain d’une attaque de double dépense, mais la valeur des bitcoins servant à réaliser la transaction peut aussi être réduite par ladite attaque. En effet, si l’attaque était amenée à être couronnée de succès, on peut imaginer que les différents acteurs diminueraient leur confiance dans le système, arrêteraient de l’utiliser pour le commerce et cèderaient une partie de leur épargne, faisant baisser le revenu de minage et la valeur d’échange du bitcoin. De plus, la spécialisation du matériel de minage (quand elle existe) alourdit le coût de l’attaque, car ce matériel perd dans ce cas en utilité. D’un point de vue purement opportuniste, il est donc la plupart du temps bien plus rentable d’utiliser son capital de manière honnête.</p>
<p>Il est ainsi arrivé que des agrégats de mineurs rassemblent plus de 51&nbsp;% de la puissance de calcul, comme la coopérative GHash.io en juillet 2014, sans qu’aucune attaque ne se produise. Et même si une telle attaque avait lieu, celle-ci ne serait pas forcément fatale pour le système à long terme. Comme l’écrivait Satoshi&nbsp;:</p>
<p>«&nbsp;Même en cas de réussite, cela n’expose pas le système à des modifications arbitraires, comme la création de valeur <em>ex nihilo</em> ou l’appropriation d’argent n’ayant jamais appartenu à l’attaquant. Les nœuds ne vont pas accepter une transaction invalide comme paiement, et les nœuds honnêtes n’accepteront jamais un bloc les contenant<a href="#fn46" class="footnote-ref" id="fnref46" role="doc-noteref"><sup>46</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn46"><p><sup>46</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Ainsi de nombreuses attaques de ce type ont déjà eu lieu sur certaines variantes de Bitcoin au fil des années, réduisant leur réputation au passage, mais sans qu’elles ne soient pour autant anéanties. On peut notamment citer Ethereum Classic qui a subi plusieurs recoordinations agressives entre 2019 et 2020.</p>
</section>
<section id="lindustrie-minière" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="lindustrie-minière">L’industrie minière</h2>
<p>Le minage est une activité économique à part entière, la récompense de minage servant à rémunérer le service apporté par le mineur. Cette récompense paie pour le coût de l’électricité, de l’infrastructure matérielle et logistique, et de la maintenance logicielle. Elle compense le risque de production de blocs orphelins. Elle rémunère la confirmation des transactions censurées. Et enfin elle récompense la renonciation temporaire à la liquidité (intérêt originaire du prêteur) et le risque économique général (profit de l’entrepreneur).</p>
<p>Du côté de l’infrastructure matérielle, les mineurs ont besoin de déployer un certain nombre d’éléments&nbsp;: les machines de hachage (systèmes de refroidissement compris) pour procéder aux calculs liés à la preuve de travail, le processeur pour traiter les blocs et vérifier les signatures, la mémoire pour conserver la chaîne (l’historique), l’ensemble des sorties transactionnelles non dépensées (l’état) et la réserve des transactions en attente, la bande passante pour envoyer et recevoir les transactions et les blocs,&nbsp;etc. Et force est de constater que tout cela s’est industrialisé au fur et à mesure des années.</p>
<p>L’amélioration de la machine pour procéder au hachage illustre bien cette industrialisation. Initialement les mineurs minaient avec le processeur central (CPU) de leur ordinateur. Puis, en 2010, sous l’impulsion de Laszlo Hanyecz puis d’ArtForz, le minage par processeur graphique (GPU) s’est développé. En 2011, est apparu le premier circuit logique programmable FPGA consacré au minage, qui donnait un meilleur rendement que les cartes graphiques. Enfin, en 2013, les premiers circuits intégrés spécialisés (ASIC) ont été mis sur le marché, avec la sortie de l’Avalon ASIC. À partir de là, les ASIC sont devenus de plus en plus performants, notamment par le travail de l’entreprise chinoise Bitmain sur ses Antminers.</p>
<p>Certains acteurs se sont mis à miner de manière industrielle en entassant cette puissance de hachage dans des grands entrepôts spécialisés contenant des centaines de machines, appelés des fermes de minage. Ces fermes ont été installées dans des endroits suivant des facteurs spécifiques dont notamment le coût de l’électricité, la température (coût du refroidissement), la bande passante et l’instabilité politique. Cette émergence de fermes de minage composées d’appareils spécialisés avait été prévue par Satoshi qui écrivait dès novembre 2008&nbsp;:</p>
<p>«&nbsp;Au début, la plupart des utilisateurs feront fonctionner des nœuds de réseau, mais à mesure que le réseau grandira, au-delà d’un certain point, cette tâche sera de plus en plus déléguée à des spécialistes possédant des fermes de serveurs composées de matériel spécialisé. Une ferme de serveurs n’aura besoin que d’un seul nœud sur le réseau et le reste du réseau local sera connecté à ce nœud<a href="#fn47" class="footnote-ref" id="fnref47" role="doc-noteref"><sup>47</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn47"><p><sup>47</sup>&nbsp;Satoshi Nakamoto, <em>Re: Bitcoin P2P e-cash paper</em>, 03/11/2008, 01:37:43 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html</a>.</p></div><div id="fn48"><p><sup>48</sup>&nbsp;La puissance de hachage apparente <span class="math inline">\(P\)</span> du réseau sur une période donnée peut être retrouvée grâce aux informations de la chaîne que sont la difficulté <span class="math inline">\(d\)</span> et le temps de bloc moyen <span class="math inline">\(\Delta t\)</span>. La formule est&nbsp;: <span class="math display">\[P = \frac{T}{\Delta t} = \frac{1}{\Delta t} \left( \frac{2^{256}}{\frac{C_{\mathrm{max}}}{d} + 1} \right)~.\]</span> où <span class="math inline">\(T\)</span> est le travail d’un bloc et <span class="math inline">\(C_{\mathrm{max}} = \mathtt{0x00ffff} \times 256^{26}\)</span> est la valeur cible maximale du réseau.</p></div></div><p>La puissance de calcul du réseau a par conséquent explosé. Le taux de hachage<a href="#fn48" class="footnote-ref" id="fnref48" role="doc-noteref"><sup>48</sup></a>, mesuré en hachages par secondes (H/s), a ainsi connu une spectaculaire croissance au cours des années. En 2009, il oscillait entre 1 et 7 millions de hachage par seconde (1&nbsp;MH/s). Durant la première partie de 2010, il a progressé pour atteindre les 200&nbsp;MH/s début juillet. Puis, il a connu deux hausses majeures coïncidant avec les engouements spéculatifs mais aussi avec l’utilisation de méthodes optimisées. La première a été celle de 2010–2011 où le prix est passé de moins d’un centime à 30&nbsp;$ et où les premières fermes de cartes graphiques ont été utilisées&nbsp;: entre juillet 2010 et août 2011, le taux de hachage est passé de 200&nbsp;MH/s à 15&nbsp;TH/s (soit une multiplication par 75&nbsp;000). La seconde a été celle de 2013–2014, période durant laquelle le prix a été quasiment multiplié par 100 et où les premiers ASIC ont été déployés&nbsp;: le taux de hachage est passé de 25&nbsp;TH/s en janvier 2013 à 300&nbsp;PH/s en décembre 2014 (soit une multiplication par 12&nbsp;000). Le taux de hachage a enfin lentement progressé pour atteindre environ 450&nbsp;EH/s en novembre 2023 (ce qui correspond à une multiplication par 1&nbsp;500 depuis décembre 2014).</p>
<p>Avec cette croissance énorme de la puissance de calcul, la difficulté du minage a suivi. Dès 2010, il devenait difficile d’espérer miner un bloc avec le processeur de son ordinateur. Cela a eu pour effet de désavantager les petits mineurs. L’augmentation de la difficulté a mis en évidence un défaut inhérent du minage&nbsp;: le défaut de variance. Puisque le minage est soumis aux probabilités, le mineur individuel doté d’un ASIC performant peut ne pas trouver de bloc du tout, tout comme il peut trouver plus de blocs que prévu, faisant reposer son revenu sur le hasard.</p>
<p>C’est pour corriger ce défaut de variance que sont nées les coopératives de minage (appelées <em>mining pools</em> en anglais). Ces dernières sont des regroupements de hacheurs qui délèguent leur pouvoir sur la sélection des transactions à un opérateur, afin de participer de manière commune à l’effort de calcul et de lisser leurs revenus. Le fonctionnement par coopératives se base sur la production de preuves de travail partielles (PPoW) mise en place par le protocole Stratum. Il s’agit pour le hacheur de produire une preuve de travail de degré moindre pour un bloc candidat donné, afin de prouver qu’il a dépensé de l’énergie et d’être rémunéré en conséquence par la coopérative. La coopérative reçoit la récompense de minage à chaque fois qu’une preuve de travail partielle produite par le hacheur s’avère être également une preuve de travail complète (FPoW).</p>
<p>La première coopérative de minage a été lancée le 27 novembre 2010 par Marek Palatinus (aussi connu sous le pseudonyme de <em>slush</em>). Elle portait initialement le nom de Bitcoin.cz Mining avant d’être plus tard rebaptisée Slush Pool en hommage à son fondateur, puis de devenir Braiins Pool en septembre 2022. Aujourd’hui, les coopératives de minage sont nombreuses et concentrent l’essentiel de la puissance de calcul du réseau. Elles sont généralement basées dans les juridictions où le minage est très présent, comme la Chine (jusqu’en 2021) ou plus récemment les États-Unis.</p>
<p>Les coopératives ont pour habitude de signaler les blocs qu’elles minent dans un souci de transparence. Par exemple, la transaction de récompense du bloc 751&nbsp;005 contient la chaîne de caractères poolin.com, ce qui indique que ce bloc a très probablement été validé par la coopérative chinoise Poolin. Ce signalement n’est pas obligatoire (le minage est anonyme par essence), mais permet d’avoir une idée de la répartition des différentes coopératives (comme on peut le voir sur la figure&nbsp;<a href="#fig:hashrate-distribution" data-reference-type="ref" data-reference="fig:hashrate-distribution">8.6</a>) et d’estimer par conséquent la centralisation de l’activité minière.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img/hashrate-distribution-coin-dance-week-20231012.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Répartition du taux de hachage apparent entre les coopératives de minage de BTC, semaine du 5 au 12 octobre 2023. (source&nbsp;: coin.dance)"><img src="img/hashrate-distribution-coin-dance-week-20231012.png" class="img-fluid figure-img" alt="Répartition du taux de hachage apparent entre les coopératives de minage de BTC, semaine du 5 au 12 octobre 2023. (source&nbsp;: coin.dance)"></a></p>
<figcaption>Répartition du taux de hachage apparent entre les coopératives de minage de BTC, semaine du 5 au 12 octobre 2023. (source&nbsp;: coin.dance)</figcaption>
</figure>
</div>
<p>Un autre défaut inhérent du minage est la latence liée à l’annonce des blocs. Comme expliqué dans la section sur la chaîne la plus longue, cette latence produit des blocs orphelins, qui sont valides mais ne sont pas rattachés à la chaîne principale. Cela fait que des mineurs mal connectés ont une puissance de hachage apparente inférieure à leur puissance de hachage réelle.</p>
<p>Pour tenter d’atténuer les effets de ce défaut, les mineurs ont mis en place des relais de communication permettant de s’envoyer des blocs mutuellement de manière plus efficace en supprimant les protections contre le déni de service nécessaires sur le réseau pair à pair ouvert.</p>
<p>Le premier relai a été créé par Matt Corallo sous le nom de <em>Bitcoin Relay Network</em>. Il a été lancé en 2013 et est devenu pleinement fonctionnel en 2015. Le réseau était composé de plusieurs nœuds spécialisés hébergés sur l’infrastructure Amazon Web Services. Un concurrent était le réseau Falcon, géré par une équipe de l’université Cornell dirigée par Emin Gün Sirer. Le Bitcoin Relay Network a été remplacé en 2016 par le réseau FIBRE<a href="#fn49" class="footnote-ref" id="fnref49" role="doc-noteref"><sup>49</sup></a> (pour <em>Fast Internet Bitcoin Relay Engine</em>), un réseau basé sur UDP (protocole alternatif à TCP) qui implémente l’optimisation <code>cmpctblock</code>, toujours géré par Matt Corallo. C’est ce réseau qui est utilisé par la plupart des mineurs aujourd’hui.</p>
<div class="no-row-height column-margin column-container"><div id="fn49"><p><sup>49</sup>&nbsp;Matt Corallo, <em>The Future of The Bitcoin Relay Network(s)</em>, 7 juillet 2016&nbsp;: <a href="https://bluematt.bitcoin.ninja/2016/07/07/relay-networks/" class="uri">https://bluematt.bitcoin.ninja/2016/07/07/relay-networks/</a>.</p></div></div><p>Cette industrialisation du minage a mené à la centralisation de l’activité minière, à la fois au niveau de la puissance de hachage (fermes de minage) que de la sélection des transactions (coopératives et relais). Si cette agrégation n’est pas fatale (les hacheurs sont libres de quitter leur coopérative pour une autre et les mineurs sont libres de ne pas utiliser le relai), elle n’en diminue pas moins la sécurité minière de la chaîne.</p>
<p>Certaines améliorations ont été proposées dans le minage pour corriger ce problème. La première est le protocole P2Pool, qui est un protocole de minage coopératif basé sur un réseau pair à pair de mineurs. Celui-ci met en communication les hacheurs en se basant sur une chaîne latérale – la «&nbsp;chaîne de partage&nbsp;» – dont la difficulté est plus faible et qui regroupe les différentes contributions des participants. Le développement de P2Pool sur la version principale de Bitcoin semble avoir été mis en suspens en 2017. Toutefois, le procédé est mis en œuvre sur Monero depuis octobre 2021 au moyen d’une coopérative du même nom.</p>
<p>Le seconde est le protocole Stratum V2<a href="#fn50" class="footnote-ref" id="fnref50" role="doc-noteref"><sup>50</sup></a>, qui permet (entre autres) aux hacheurs de négocier le contenu des blocs. À défaut de corriger complètement la délégation sur la sélection des transactions, cette nouvelle version de Stratum a le mérite de rendre le processus plus transparent. En novembre 2023, elle n’était déployée qu’au sein de la coopérative Braiins Pool (anciennement Slush Pool), qui est à l’origine de sa conception.</p>
<div class="no-row-height column-margin column-container"><div id="fn50"><p><sup>50</sup>&nbsp;Braiins, <em>Stratum V2 Protocol Overview</em>&nbsp;: <a href="https://braiins.com/stratum-v2#job-selection" class="uri">https://braiins.com/stratum-v2#job-selection</a>.</p></div></div><p>Cependant, ces propositions d’amélioration, bien que louables, ne suppriment pas l’avantage économique découlant de la centralisation, qui se retrouve par ailleurs dans toutes les industries (économie d’échelle). La décentralisation a un coût, et celui-ci ne sera justifié que lorsque le bénéfice apporté le surpassera, c’est-à-dire le jour où le réseau sera réellement attaqué.</p>
</section>
<section id="un-algorithme-de-consensus-novateur" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="un-algorithme-de-consensus-novateur">Un algorithme de consensus novateur</h2>
<p>Pour fonctionner en tant que système distribué de monnaie numérique, Bitcoin se base sur un mécanisme de consensus novateur. Celui-ci met en jeu une chaîne de blocs construite par les mineurs, qui sont rémunérés pour leur travail. Chaque bloc est un ensemble horodaté de transactions, qui contient une preuve de travail quantifiant l’énergie dépensée. Le consensus est atteint par la sélection de la plus longue chaîne.</p>
<p>Cet algorithme de consensus a un fonctionnement objectif, ouvert et robuste, ce qui explique le succès de Bitcoin par rapport à ses prédécesseurs. Par son aspect essentiellement économique, il donne au système une très grande résistance à la double dépense opportuniste, notamment grâce à la gigantesque industrie minière qui le soutient.</p>
<p>Il existe cependant une menace plus importante, plus insidieuse&nbsp;: celle de la censure, dont nous parlerons dans le prochain chapitre.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/la-valeur-de-l-information.html" class="pagination-link" aria-label="La valeur de l'information">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">La valeur de l’information</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/la-resistance-a-la-censure.html" class="pagination-link" aria-label="La résistance à la censure">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">La résistance à la censure</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 © 2024 Konsensus Network
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../index.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../produit.html">
<p>Acheter</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/konsensusn">
      <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/konsensusnetwork">
      <i class="bi bi-github" role="img" aria-label="Github">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/konsensusnetwork">
      <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/konsensusnetwork">
      <i class="bi bi-youtube" role="img" aria-label="YouTube">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","openEffect":"zoom","selector":".lightbox","descPosition":"bottom","loop":false});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>