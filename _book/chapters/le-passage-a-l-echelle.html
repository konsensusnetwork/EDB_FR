<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>14&nbsp; Le passage à l’échelle – Book Title</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/l-avenir-de-bitcoin.html" rel="next">
<link href="../chapters/les-contrats-autonomes.html" rel="prev">
<link href="..//figures/freestarfish.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="14&nbsp; Le passage à l’échelle – Book Title">
<meta property="og:description" content="">
<meta property="og:image" content="cover.png">
<meta property="og:site_name" content="Book Title">
<meta name="twitter:title" content="14&nbsp; Le passage à l’échelle – Book Title">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="cover.png">
<meta name="twitter:site" content="@konsensusn">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Book Title</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> <i class="bi bi-book" role="img" aria-label="Book">
</i> 
<span class="menu-text">Read online</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bitcoinbook.shop/products/"> <i class="bi bi-shop" role="img" aria-label="Shop">
</i> 
<span class="menu-text">Buy this book!</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/le-passage-a-l-echelle.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Le passage à l’échelle</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main">
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Recherche"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Over dit boek</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/remerciements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Remerciements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/avant-propos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avant-propos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-debuts-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Les débuts de Bitcoin</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/une-croissance-conflictuelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Une croissance conflictuelle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/des-racines-monetaires.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Des racines monétaires</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-necessite-de-decentralisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La nécessité de décentralisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/un-mouvement-technologique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Un mouvement technologique</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-cybermonnaie-avant-nakamoto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">La cybermonnaie avant Nakamoto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-valeur-de-l-information.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">La valeur de l’information</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-consensus-par-le-minage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Le consensus par le minage</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-resistance-a-la-censure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">La résistance à la censure</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-changement-de-la-monnaie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Le changement de la monnaie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-determination-du-protocole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">La détermination du protocole</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-rouages-de-la-machine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Les rouages de la machine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-contrats-autonomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Les contrats autonomes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-passage-a-l-echelle.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Le passage à l’échelle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/l-avenir-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">L’avenir de Bitcoin</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/ordinals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Ordinals</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table des matières</h2>
   
  <ul>
  <li><a href="#labsence-de-scalabilité-du-système" id="toc-labsence-de-scalabilité-du-système" class="nav-link active" data-scroll-target="#labsence-de-scalabilité-du-système">L’absence de scalabilité du système</a></li>
  <li><a href="#lamélioration-de-lefficacité-de-base" id="toc-lamélioration-de-lefficacité-de-base" class="nav-link" data-scroll-target="#lamélioration-de-lefficacité-de-base">L’amélioration de l’efficacité de base</a></li>
  <li><a href="#les-banques-et-les-surcouches" id="toc-les-banques-et-les-surcouches" class="nav-link" data-scroll-target="#les-banques-et-les-surcouches">Les banques et les surcouches</a></li>
  <li><a href="#les-chaînes-latérales" id="toc-les-chaînes-latérales" class="nav-link" data-scroll-target="#les-chaînes-latérales">Les chaînes latérales</a></li>
  <li><a href="#le-réseau-lightning" id="toc-le-réseau-lightning" class="nav-link" data-scroll-target="#le-réseau-lightning">Le réseau Lightning</a></li>
  <li><a href="#les-banques-chaumiennes-de-fedimint" id="toc-les-banques-chaumiennes-de-fedimint" class="nav-link" data-scroll-target="#les-banques-chaumiennes-de-fedimint">Les banques chaumiennes de Fedimint</a></li>
  <li><a href="#le-passage-à-léchelle-par-substitution" id="toc-le-passage-à-léchelle-par-substitution" class="nav-link" data-scroll-target="#le-passage-à-léchelle-par-substitution">Le passage à l’échelle par substitution</a></li>
  <li><a href="#trois-types-de-compromis" id="toc-trois-types-de-compromis" class="nav-link" data-scroll-target="#trois-types-de-compromis">Trois types de compromis</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="ch:scalabilite" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Le passage à l’échelle</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span id="enotezch:14" label="enotezch:14"></span></p>
<p><span class="lettrine">L</span><span class="smallcaps">a</span> scalabilité, calque de l’anglais <em>scalability</em>, aussi appelée extensibilité, désigne la capacité d’un système à passer à l’échelle, c’est-à-dire à continuer de fonctionner de manière équivalente à mesure que le nombre d’utilisateurs augmente. Dans un système géré de manière centralisée, cette capacité est assurée par l’apport de matériel informatique, soit en ajoutant de la puissance de calcul à l’infrastructure existante (passage à l’échelle vertical), soit en multipliant les instances de l’infrastructure pour partager le traitement des requêtes (passage à l’échelle horizontal). La scalabilité dépend par conséquent du niveau de prévision de l’entité qui s’occupe du système.</p>
<p>Dans le cas d’un système distribué, qui a un comportement différent, la scalabilité se rapporte à quelque chose de plus compliqué. L’ajout de matériel ne suffit pas&nbsp;: il faut également que les propriétés dudit système se conservent avec la hausse de l’activité. Dans le cas de Bitcoin, ce problème est particulièrement ardu, car toute montée en charge affecte durablement les nœuds du réseau, en raison de la nécessité de partage de la chaîne de blocs intégrale. En substance, le système ne passe pas à l’échelle, ou très peu.</p>
<p>Ce problème de scalabilité de Bitcoin a été une préoccupation majeure de la communauté, à tel point qu’il a provoqué un véritable conflit ouvert entre 2015 et 2017&nbsp;: la fameuse guerre des blocs que nous avons décrite dans le chapitre&nbsp;<a href="une-croissance-conflictuelle.html" data-reference-type="ref" data-reference="ch:clivages">2</a>. Certains pensaient qu’augmenter la taille des blocs suffiraient à gérer la demande sans altérer l’offre, tandis que d’autres imaginaient que les solutions de surcouche comme le réseau Lightning seraient assez efficaces pour traiter tous les transferts. Ce chapitre a pour objectif de faire un tour d’horizon de la situation et de proposer une troisième voie.</p>
<section id="labsence-de-scalabilité-du-système" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="labsence-de-scalabilité-du-système">L’absence de scalabilité du système</h2>
<p>La conception originelle de Bitcoin repose sur un principe simple&nbsp;: obtenir et vérifier l’intégralité des transactions dans le but de s’assurer qu’il n’y a pas de double dépense. Comme l’écrivait Satoshi Nakamoto dans le livre blanc, «&nbsp;la seule façon de confirmer l’absence d’une transaction est d’être au courant de toutes les transactions<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>&nbsp;». De ce fait, pour disposer d’une sécurité maximale, chaque nœud doit, en principe, entretenir une version complète de la chaîne de blocs.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Dès les origines, ce fonctionnement particulier a naturellement amené la question de la montée en charge du système. Lorsque Satoshi Nakamoto a présenté sa découverte sur la liste de diffusion dédiée à la cryptographie de Metzdowd.com le 31 octobre 2008, la première réponse qu’il a reçue concernait ainsi ce problème. Cette réponse était celle de l’ancien cypherpunk James A. Donald le 2 novembre, qui écrivait&nbsp;:</p>
<p>«&nbsp;Nous avons vraiment, vraiment besoin d’un tel système, mais d’après ce que je comprends de votre proposition, il ne semble pas pouvoir s’adapter à la taille requise.</p>
<p>Pour que des jetons de preuve de travail transférables aient de la valeur, ils doivent avoir une valeur monétaire. Pour avoir une valeur monétaire, ils doivent être transférés au sein d’un très grand réseau — par exemple un réseau d’échange de fichiers semblable à bittorrent.</p>
<p>Pour détecter et rejeter un événement de double dépense dans un délai convenable, il faut disposer de la plupart des transactions passées des pièces impliquées dans la transaction, ce qui, mis en œuvre naïvement, exige que chaque pair dispose de la plupart des transactions passées, ou de la plupart des transactions passées qui ont eu lieu récemment. Si des centaines de millions de personnes effectuent des transactions, cela représente beaucoup de bande passante — chacun doit avoir connaissance de toutes les transactions ou d’une partie substantielle de celles-ci<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;James A. Donald, <em>Re: Bitcoin P2P e-cash paper</em>, /11/2008, 23:46:23 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html</a>.</p></div><div id="fn3"><p><sup>3</sup>&nbsp;«&nbsp;entre la facilité de transaction et la facilité de vérification&nbsp;»&nbsp;: Sosthène, <em>Apologie des petits blocs</em>, 2 août 2018&nbsp;: <a href="https://www.sosthene.net/apologie-petits-blocs/" class="uri">https://www.sosthene.net/apologie-petits-blocs/</a>.</p></div></div><p>James A. Donald mettait par là en valeur le manque de scalabilité de Bitcoin. Pour tout système donné, une augmentation de volume transactionnel accroît le nombre de transactions à obtenir et à traiter. Cet accroissement rend plus difficile de faire fonctionner un nœud, ce qui peut affecter la décentralisation du réseau et donc la sécurité. De ce fait, il existe toujours un compromis entre l’utilité et la sécurité du système, ou pour mieux le dire, entre la facilité de transaction et la facilité de vérification<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>Ce compromis se manifeste généralement par une limite de capacité transactionnelle<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, décrite par les règles de consensus (limite explicite) ou, plus rarement, par les règles de réseau (limite implicite). La limite de capacité transactionnelle était originellement décrite comme une taille limite des blocs, qui interdisait aux mineurs de créer des blocs plus grands qu’une certaine taille. Dans le prototype, cette taille était définie implicitement par la taille maximale des messages du protocole de transmission, c’est-à-dire 32&nbsp;Mio. Puis, une limite explicite de 1 mégaoctet (1&nbsp;Mo) a été ajoutée par Satoshi Nakamoto en septembre 2010 par le biais de la constante ``, sans annonce publique de sa part, dans le but d’éviter les attaques par déni de service. Cette taille correspondait, pour un réseau tournant à plein régime, à un volume théorique de 4,5 transactions classiques par seconde, ce qui se ramenait plutôt à 3 transactions par seconde en pratique.</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;«&nbsp;Ce compromis se manifeste généralement par une limite de capacité transactionnelle&nbsp;»&nbsp;: Dans le cas où elle n’est définie nulle part, cette limite est de toute manière inférieure à la limite de marché du mineur le plus efficace, car aucun mineur économiquement rationnel ne traiterait de transaction gratuitement.</p></div></div><p>Avec l’intégration de SegWit dans la version principale de Bitcoin en août 2017, cette limitation est devenue un poids limite des blocs. Cette nouvelle métrique donnait une importance plus grande de la taille de base par rapport à la taille du témoin dans le calcul de la mesure du bloc, modifiant également la façon dont comptaient les mineurs pour ajouter les transactions au bloc. Cette modification était une augmentation effective de la capacité transactionnelle du protocole, portant le volume autorisé de transactions à 8 transactions par seconde en théorie, et à 4,5 transactions par seconde en pratique.</p>
<p>L’existence d’une limite de capacité transactionnelle engendre nécessairement une rareté de l’espace de bloc. Si elle est fixe, elle rend l’offre par essence inélastique. Ainsi, une forte demande pour l’espace de bloc fait, par effet d’enchère, augmenter le prix pour l’inclusion, c’est-à-dire les frais de transaction. Le marché des frais est stimulé par cette limite rigide au lieu de rester à son niveau naturel, à savoir celui du coût d’inclusion par défaut des mineurs.</p>
<p>Par son effet sur le niveau des frais, la limite crée un plancher d’utilité, c’est-à-dire un niveau de valeur en deçà duquel le transfert et la détention ne sont pas considérés comme rentables par les utilisateurs. En effet, les mineurs sont amenés à rejeter les transactions qui ne paient pas un taux de frais suffisant par rapport à leur taille. De ce fait, l’utilité d’une transaction peut être estimée insuffisante par son auteur au regard du niveau de frais moyen de la chaîne, auquel cas elle n’a pas lieu. Si une personne désire acheter un café pour 2&nbsp;$ en BTC, mais que les frais usuels sont de 1&nbsp;$, cette personne passera vite son chemin. De manière générale, les cas d’utilisation requérant des frais «&nbsp;faibles&nbsp;» sont chassés de la chaîne, à l’instar du service de jeu d’argent SatoshiDICE, qui a dû cesser ses activités sur BTC en 2017 suite à l’augmentation des frais.</p>
<p>La limite de capacité transactionnelle a pour vertu de garantir que le coût d’utilisation d’un nœud reste bas. Elle agit ainsi sur la décentralisation <em>potentielle</em> du réseau. En effet, contrairement au matériel minier, le coût lié à la vérification n’est pas compensé par un revenu proportionnel, de sorte qu’il atteint tout le monde de la même manière. Les opérateurs de nœud les moins bien équipés ne peuvent pas matériellement suivre le rythme, ce qui affecte la facilité du réseau à se décentraliser <em>effectivement</em>.</p>
<p>L’influence sur la décentralisation potentielle concerne à la fois le minage et le commerce en empêchant les plus petits acteurs de pouvoir réaliser ces activités à leur échelle. La centralisation du minage augmente le risque de censure, tandis que la centralisation du commerce augmente le risque d’altération du protocole, et donc le risque d’inflation. C’est pourquoi la limite de capacité transactionnelle joue un rôle majeur dans le modèle de sécurité&nbsp;: moins cette limite est élevée, plus la sécurité <em>potentielle</em> du système est grande.</p>
<p>La limite de capacité transactionnelle est déterminée de manière subjective par les commerçants, en fonction de leur <em>perception de la menace</em> et de leur <em>utilisation personnelle</em> de la chaîne. Il n’existe pas de limite de taille des blocs idéale&nbsp;: il n’y a que des êtres humains qui calculent un risque par rapport à une éventuelle récompense. On peut tenter d’établir une moyenne pour estimer une limite qui correspond à une utilisation donnée, mais cette estimation serait au mieux imparfaite.</p>
<p>Par son effet sur la décentralisation, la limite crée un plafond d’utilité, c’est-à-dire un niveau de valeur au-delà duquel le transfert et la détention sont considérés trop risqués pour la sécurité effective du système. En effet, aucune sécurité n’étant absolue, le transfert et la détention d’une certaine valeur peut ne plus bénéficier suffisamment de la protection apportée par le réseau. Par exemple, recevoir ou conserver l’équivalent de plusieurs millions de dollars sur la chaîne de Bitcoin SV est, c’est le moins qu’on puisse dire, imprudent.</p>
<p>Le plancher d’utilité (induit par l’action négative de la limite sur l’espace de bloc) et le plafond d’utilité (induit par l’action positive de la limite sur la sécurité) ont pour effet de borner une plage de valeurs en dehors de laquelle le transfert et la détention ne sont plus pertinents<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. C’est l’existence de cette plage de valeurs qui entraîne l’apparition de substituts à un système donné.</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Voir Eric Voskuil, «&nbsp;Propriété du seuil d’utilité&nbsp;», in <em>Cryptoéconomie&nbsp;: Principes fondamentaux de Bitcoin</em>, Amazon KDP, 2022, pp.&nbsp;317–318.</p></div></div><p>L’arrivée de nouveaux utilisateurs et l’augmentation subséquente de la demande pour l’espace de blocs rehaussent le plancher d’utilité. Toute montée en charge du système en modifie les caractéristiques. Par conséquent, tout système Bitcoin est en substance non scalable, au sens premier du terme. Il existe cependant des méthodes pour contourner cette absence de scalabilité.</p>
</section>
<section id="lamélioration-de-lefficacité-de-base" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="lamélioration-de-lefficacité-de-base">L’amélioration de l’efficacité de base</h2>
<p>La première proposition vis-à-vis du passage à l’échelle a été d’augmenter progressivement la limite de taille des blocs dans le but d’accompagner l’accroissement de l’activité<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. C’était la solution soutenue par Satoshi Nakamoto<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>, comme en témoigne sa première réaction à la réponse de James A. Donald le 3 novembre 2008&nbsp;:</p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;Parmi les versions alternatives de Bitcoin, la voie de l’augmentation progressive de la taille limite des blocs a été choisie par Bitcoin Cash, qui prévoit d’intégrer un algorithme permettant de gérer cette augmentation automatiquement. Voir bitcoincashautist, <em>CHIP-2023-04: Adaptive Blocksize Limit Algorithm for Bitcoin Cash</em>, 2 septembre 2023&nbsp;: <a href="https://gitlab.com/0353F40E/ebaa/-/blob/f4edacd134103a7e232740463a5f26379bf90f18/README.md" class="uri">https://gitlab.com/0353F40E/ebaa/-/blob/f4edacd134103a7e232740463a5f26379bf90f18/README.md</a>.</p></div><div id="fn7"><p><sup>7</sup>&nbsp;«&nbsp;augmenter progressivement la limite de taille des blocs dans le but d’accompagner l’accroissement de l’activité&nbsp;»&nbsp;: Dans Monero, la pénalité (<span class="math inline">\(P\)</span>) liée à la taille d’un bloc (<span class="math inline">\(B\)</span>) est calculée à partir la taille médiane des 100 derniers blocs (<span class="math inline">\(M\)</span>) et la subvention de base (<span class="math inline">\(R\)</span>) qui est de 0,6&nbsp;XMR par bloc depuis 2022. Si <span class="math inline">\(B &lt; M_0 = 300~\mathrm{ko}\)</span>, alors <span class="math inline">\(P = 0\)</span>. Sinon&nbsp;: <span class="math display">\[P = R  \left( \frac{B}{M} - 1 \right)^2~.\]</span> La taille du bloc ne peut pas dépasser <span class="math inline">\(2 M\)</span> (taille qui correspond à une pénalité maximale).</p></div><div id="fn8"><p><sup>8</sup>&nbsp;«&nbsp;C’était la solution soutenue par Satoshi Nakamoto&nbsp;»&nbsp;: Satoshi Nakamoto, <em>Re: [PATCH] increase block size limit</em>, /10/2010 19:48:40 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=1347.msg15366#msg15366" class="uri">https://bitcointalk.org/index.php?topic=1347.msg15366#msg15366</a>.</p></div><div id="fn9"><p><sup>9</sup>&nbsp;Satoshi Nakamoto, <em>Re: Bitcoin P2P e-cash paper</em>, /11/2008, 01:37:43 UTC&nbsp;: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html</a>.</p></div></div><p>«&nbsp;La bande passante n’est peut-être pas aussi prohibitive que vous le pensez. Une transaction typique est d’environ 400 octets (la cryptographie sur les courbes elliptiques est agréablement compacte). Chaque transaction doit être diffusée deux fois, soit 1 Ko par transaction. Visa a traité 37 milliards de transactions au cours de l’année fiscale 2008, soit une moyenne de 100 millions de transactions par jour. Un tel nombre de transactions nécessiterait 100 Go de bande passante, soit la taille de 12 DVD ou de 2 films en qualité HD, ou encore environ 18&nbsp;$ de bande passante au prix actuel. Si le réseau devait atteindre cette taille, cela prendrait plusieurs années, et d’ici là, l’envoi de 2 films en HD sur Internet ne semblera probablement pas être un gros problème<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>.&nbsp;»</p>
<p>La vision de Satoshi était cependant bien trop optimiste. D’une part, il ne voyait pas la centralisation du minage comme un problème existentiel, prévoyant dès le début que la puissance de calcul du réseau reposerait sur des «&nbsp;fermes de serveurs composées de matériel spécialisé&nbsp;». D’autre part, il pensait que la vérification de paiement simplifiée suffirait, ne tenant pas compte de ses défauts de fiabilité et de confidentialité, ni de son incapacité à exercer un pouvoir sur la détermination des règles de consensus. Le plan de Satoshi était donc faillible sans pour autant être entièrement mauvais.</p>
<p>Le fonctionnement d’un nœud dépend d’un certain nombre de charges. Les principales sont le stockage sur disque dur (HDD) pour l’historique (chaîne de blocs), le stockage en mémoire flash (SSD) pour l’état (ensemble des UTXO), le stockage en mémoire vive (barrette de RAM) pour la réserve des transactions non confirmées (mempool) et la réserve des blocs orphelins, le maintien d’une bande passante (ou débit binaire, usuellement exprimé en Mbit/s) permettant de recevoir et d’envoyer les blocs et les transactions, et le calcul du processeur (CPU) pour la vérification des données et notamment des signatures. Faire diminuer le coût d’un nœud consiste ainsi à réduire l’une de ces charges.</p>
<p>Même si l’augmentation naïve de la taille limite des blocs ne constitue pas en soi une méthode de scalabilité, il s’avère qu’elle peut être compensée par le progrès technique provenant de l’optimisation logicielle, matérielle ou algorithmique. Premièrement, les performances du logiciel (pour un ensemble donné de règles de consensus) peuvent être améliorées, et il s’agit même de l’une des tâches de base de l’équipe de Bitcoin Core<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>. Deuxièmement, le matériel informatique peut être rendu plus efficace, certains composants devenant progressivement moins coûteux (loi de Moore<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>). Troisièmement, le protocole peut lui-même être perfectionné au niveau algorithmique, par la découverte et l’adoption de nouvelles techniques plus efficaces&nbsp;: c’est par exemple le cas de l’algorithme de signature de Schnorr qui produit des signatures plus compactes qu’ECDSA (40&nbsp;octets au lieu de 72), ou bien des bulletproofs qui rendent les preuves de portée des Confidential Transactions beaucoup moins volumineuses.</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;Voir par exemple l’article de Jameson Lopp sur l’évolution de la performance de Bitcoin Core dans lequel décrit comment la première synchronisation sur sa machine s’est améliorée au cours des années. – Jameson Lopp, <em>Bitcoin Core Performance Evolution</em>, 5 mars 2022&nbsp;: <a href="https://blog.lopp.net/bitcoin-core-performance-evolution/" class="uri">https://blog.lopp.net/bitcoin-core-performance-evolution/</a>.</p></div><div id="fn11"><p><sup>11</sup>&nbsp;La loi de Moore est une conjecture énoncée par Gordon E. Moore en 1965 ayant postulé que la complexité des semi-conducteurs doublait chaque année. Cette loi était citée par Satoshi Nakamoto dans le livre blanc, qui écrivait&nbsp;: «&nbsp;La loi de Moore prédisant une croissance actuelle de 1,2 Go par an, le stockage ne devrait pas poser de problème même si les entêtes de blocs doivent être conservés en mémoire.&nbsp;» – Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, 31 octobre 2008.</p></div></div><p>Au-delà de ces optimisations, il n’existe pas de manière d’augmenter le volume transactionnel de la chaîne sans faire de compromis au niveau du modèle de Bitcoin. La solution consiste ainsi à modifier le comportement du système, de telle manière qu’il n’affecte pas trop le modèle de sécurité. Plusieurs facteurs peuvent ainsi être optimisés, dont la taille de la chaîne à conserver, l’<em>Initial Block Download</em> (IDB) et la taille de l’ensemble des UTXO.</p>
<p>D’abord, on peut choisir de supprimer les blocs les plus anciens une fois qu’on les a vérifiés. On conserve simplement la chaîne des entêtes, l’état du réseau, ainsi que les blocs les plus récents afin de pouvoir rejoindre le consensus dans le cas d’une recoordination profonde. Cette méthode est appelée l’élagage ou <em>pruning</em>.</p>
<p>Mais cette méthode n’enlève pas la charge de l’IBD, c’est-à-dire le processus de téléchargement et de vérification de la chaîne de blocs jusqu’à sa hauteur actuelle. Pour ce faire, on peut procéder à diverses techniques plus ou moins risquées. La première est la supposition de validité des signatures, basée sur le paramètre <code>assumevalid</code>, qui a été introduite dans Bitcoin Core en 2017<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>, et qui consiste à sauter la vérification des signatures jusqu’à un bloc d’empreinte donnée, faisant gagner beaucoup de temps dans la synchronisation initiale. Cette méthode n’est pas un point de contrôle (elle n’impose pas au bloc d’exister) et le risque qu’elle comporte est minime. La deuxième technique est AssumeUTXO, qui a été proposée en 2019 par James O’Beirne et est toujours en développement<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>, et qui implique de supposer valide un ensemble des UTXO donné (identifié par son empreinte) à une hauteur de bloc déterminée&nbsp;: l’opérateur de nœud télécharge la sauvegarde de l’ensemble des UTXO auprès d’un tiers et débute la synchronisation initiale à partir de celui-ci, remettant à plus tard (ou ignorant complètement) le téléchargement et la vérification des blocs précédents. Cette méthode présente un défaut de vérification (au moins temporaire) de sorte que l’opérateur est exposé à la tromperie, mais le risque est considéré comme acceptable<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>. Il existe également une troisième technique plus radicale, l’engagement des UTXO (ou <em>UTXO commitments</em>), qui est un soft fork obligeant les mineurs à ajouter l’empreinte de l’ensemble des UTXO dans le bloc<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>&nbsp;: cet engagement permettrait de disposer d’une source bien plus fiable pour télécharger la sauvegarde à partir de laquelle commencer la synchronisation.</p>
<div class="no-row-height column-margin column-container"><div id="fn12"><p><sup>12</sup>&nbsp;Bitcoin Core, <em>Bitcoin Core 0.14.0</em>, 8 mars 2017&nbsp;: <a href="https://bitcoincore.org/en/2017/03/08/release-0.14.0/#assumed-valid-blocks" class="uri">https://bitcoincore.org/en/2017/03/08/release-0.14.0/#assumed-valid-blocks</a>.</p></div><div id="fn13"><p><sup>13</sup>&nbsp;James O’Beirne, <em>AssumeUTXO Proposal</em>, 24 avril 2019&nbsp;: <a href="https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal" class="uri">https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal</a>.</p></div><div id="fn14"><p><sup>14</sup>&nbsp;«&nbsp;Cette méthode présente un défaut de vérification (au moins temporaire) de sorte que l’opérateur est exposé à la tromperie, mais le risque est considéré comme acceptable&nbsp;»&nbsp;: Les risques liées à AssumeValid et à AssumeUTXO sont discutés dans le chapitre&nbsp;5 de l’ouvrage <em>Bitcoin: A Work in Progress</em> de Sjors Provoost publié en 2022.</p></div><div id="fn15"><p><sup>15</sup>&nbsp;Mark Friedenbach, <em>[soft fork] Block v3: miner commitments with compact proofs</em>, 28 mars 2014&nbsp;: <a href="https://github.com/bitcoin/bitcoin/pull/3977" class="uri">https://github.com/bitcoin/bitcoin/pull/3977</a>&nbsp;; Pieter Wuille, <em>[bitcoin-dev] Rolling UTXO set hashes</em>, /05/2017 20:01:14 UTC&nbsp;: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html" class="uri">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html</a>.</p></div><div id="fn16"><p><sup>16</sup>&nbsp;Cory Fields, <em>UHS: Full-node security without maintaining a full UTXO set</em>, /05/2018 16:36:35 UTC&nbsp;: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html" class="uri">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html</a>.</p></div><div id="fn17"><p><sup>17</sup>&nbsp;Thaddeus Dryja, <em>Utreexo: A dynamic hash-based accumulator optimized for the Bitcoin UTXO set</em>, 6 juin 2019&nbsp;: <a href="https://eprint.iacr.org/2019/611.pdf" class="uri">https://eprint.iacr.org/2019/611.pdf</a>.</p></div></div><p>Ensuite, au-delà de l’IBD, reste le problème de la taille de l’ensemble des UTXO, qui est l’un des facteurs limitants les plus importants. La première idée pour réduire cette taille est une proposition de Cory Fields appelée UHS (pour <em>UTXO Hash Set</em>) qui consiste uniquement à stocker les empreintes (<em>hashes</em>) des UTXO individuelles<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>. La deuxième idée est de se servir d’accumulateurs cryptographiques, comme l’a fait Thaddeus Dryja avec sa proposition nommée Utreexo, qui implique de regrouper les UTXO dans des arbres de Merkle afin de condenser l’ensemble à conserver en mémoire, au prix d’un compromis sur la bande passante<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a>.</p>
<p>Enfin, on peut également choisir d’éclater le minage et la vérification des transactions en séparant l’historique et l’état du système en plusieurs fragments, qui sont chacun soutenus par une partie (variable) du réseau. C’est ce qu’on appelle le partitionnement ou <em>sharding</em>. C’était l’idée derrière l’utilisation d’un arbre préfixe de Merkle-Patricia (aussi appelé arbre Merklix) vaguement envisagée par les développeurs de Bitcoin Cash<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>, ou le <em>danksharding</em> qui pourrait être implémenté dans Ethereum<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>. Cependant, il s’agit là d’une modification importante du protocole qui pourrait ne jamais être implémentée dans une version de Bitcoin.</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;«&nbsp;vaguement envisagée par les développeurs de Bitcoin Cash&nbsp;»&nbsp;: Amaury Séchet, <em>Using Merklix tree to shard block validation</em>, 6 novembre 2016&nbsp;: <a href="http://www.deadalnix.me/2016/11/06/using-merklix-tree-to-shard-block-validation" class="uri">http://www.deadalnix.me/2016/11/06/using-merklix-tree-to-shard-block-validation</a>, archive&nbsp;: <a href="https://web.archive.org/web/20170716220359/https://www.deadalnix.me/2016/11/06/using-merklix-tree-to-shard-block-validation/" class="uri">https://web.archive.org/web/20170716220359/https://www.deadalnix.me/2016/11/06/using-merklix-tree-to-shard-block-validation/</a>&nbsp;; Joannes Vermorel, Amaury Séchet, Shammah Chancellor, Jason Cox, <em>Merklix tree for Bitcoin</em>, juillet 2018&nbsp;: <a href="https://blog.vermorel.com/pdf/merklix-tree-for-bitcoin-2018-07.pdf" class="uri">https://blog.vermorel.com/pdf/merklix-tree-for-bitcoin-2018-07.pdf</a>.</p></div><div id="fn19"><p><sup>19</sup>&nbsp;«&nbsp;le danksharding qui pourrait être implémenté dans Ethereum&nbsp;»&nbsp;: <a href="https://ethereum.org/en/roadmap/danksharding/" class="uri">https://ethereum.org/en/roadmap/danksharding/</a>.</p></div></div><p>Ces propositions sont des compromis se faisant au niveau de la chaîne qui affectent souvent le système dans son entièreté. Toutefois, il est également possible de faire un compromis différent, au niveau des pièces individuelles, par l’utilisation de banques et, surtout, de surcouches.</p>
</section>
<section id="les-banques-et-les-surcouches" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="les-banques-et-les-surcouches">Les banques et les surcouches</h2>
<p>Les autres propositions généralement citées comme alternatives à l’augmentation de la taille des blocs sont des solutions consistant à ne pas réaliser tous les transferts sur la chaîne, mais à en déporter les plus petits ailleurs, ceux-ci étant «&nbsp;regroupés&nbsp;» dans des transactions plus grosses. La chaîne est alors utilisée pour régler les dettes, contractées de manière analogique (contrat juridique) ou numérique (contrat autonome). Cela consiste à considérer le protocole comme un protocole de règlement.</p>
<p>La première manière de faire est de réintroduire de la confiance dans le système en contractant des obligations de manière traditionnelle, auprès de ce que nous appellerons ici des banques. Les banques en question peuvent émettre une monnaie représentative en gardant l’intégralité des fonds, ou bien offrir du crédit en ne conservant que des réserves fractionnaires. L’utilisation de la chaîne sert au règlement entre les banques, qui assure le transfert de fonds entre leurs clients. C’est en somme le modèle de la banque libre promu par George Selgin et Larry White dans les années 1990.</p>
<p>Cette première conception a été défendue par Hal Finney, qui avait connaissance des travaux de Selgin et de White, comme nous l’avons vu dans le chapitre&nbsp;<a href="la-cybermonnaie-avant-nakamoto.html" data-reference-type="ref" data-reference="ch:cybermonnaie">6</a>. Le 30 décembre 2010, il faisait ainsi l’apologie d’un modèle de banque libre basé sur le bitcoin&nbsp;:</p>
<p>«&nbsp;En fait, il existe une très bonne raison pour que les banques basées sur Bitcoin existent et émettent leur propre monnaie numérique, convertible en bitcoin. Bitcoin lui-même ne peut pas passer à l’échelle pour que chaque transaction financière dans le monde soit diffusée publiquement et incluse dans la chaîne de blocs. Il doit y avoir un niveau secondaire de systèmes de paiement, plus léger et plus efficace. [...] Les banques basées sur Bitcoin résoudront ces problèmes. Elles pourront fonctionner comme les banques le faisaient avant la nationalisation de la monnaie. Les différentes banques pourront avoir des politiques différentes, certaines plus agressives, d’autres plus conservatrices. [...] Je pense que tel sera le destin ultime du bitcoin, à savoir être la “monnaie de base” qui sert de monnaie de réserve aux banques qui émettent leur propre argent liquide. La plupart des transactions en bitcoin se feront entre banques, pour régler les transferts nets. Les transactions en bitcoin effectuées par des particuliers seront aussi rares que... eh bien, que les achats en bitcoin le sont aujourd’hui<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn20"><p><sup>20</sup>&nbsp;Hal Finney, <em>Re: Bitcoin Bank</em>, /12/2010 01:38:40 UTC,<a href="https://bitcointalk.org/index.php?topic=2500.msg34211#msg34211" class="uri">https://bitcointalk.org/index.php?topic=2500.msg34211#msg34211</a>.</p></div><div id="fn21"><p><sup>21</sup>&nbsp;«&nbsp;Bitcoin peut être vu comme un système nouveau et émergent de monnaie de réserve pour les transactions en ligne, dans lequel les banques en ligne émettront des jetons adossés au bitcoin pour leurs utilisateurs, tout en gardant leurs réserves en bitcoins dans un stockage hors-ligne. Chaque individu pourra auditer en temps réel les possessions de l’intermédiaire, et des systèmes de vérification et de réputation permettront de s’assurer qu’aucune inflation n’a lieu.&nbsp;» – Saifedean Ammous, <em>The Bitcoin Standard</em>, 2018.</p></div><div id="fn22"><p><sup>22</sup>&nbsp;«&nbsp;Cette thèse a été par la suite développée par d’autres personnes comme Nik Bhatia&nbsp;»&nbsp;: Nik Bhatia, <em>Layered Money: From Gold and Dollars to Bitcoin and Central Bank Digital Currencies</em>, 2021.</p></div></div><p>Cette vision a été reprise en 2018 par Saifedean Ammous dans son livre, <em>L’Étalon-Bitcoin</em>, dans lequel il soutenait que le rôle principal du bitcoin était d’être une monnaie de réserve<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a>. Cette thèse a été par la suite développée par d’autres personnes comme Nik Bhatia<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a>.</p>
<p>Dans la réalité, cette manière de détourner l’activité de la chaîne s’est effectivement matérialisée avec les places de marché, qui permettaient de traiter les nombreux ordres d’achat et de vente liés à la spéculation. Elle s’est aussi manifestée par le biais des plateformes de casino qui regroupaient les opérations liées au jeu d’argent. Enfin, elle a été mise en œuvre par les services fiduciaires comme Grayscale qui offraient aux institutions financières la possibilité d’intégrer du bitcoin à leur bilan.</p>
<p>Toutefois, il ne s’agit nullement d’un passage à l’échelle de Bitcoin. Le traitement bancaire n’est pas résistant à la censure, ni résistant à l’inflation, et sa généralisation conduirait <em>in fine</em> à la destruction totale de la proposition de valeur de Bitcoin. Ainsi, on peut vraisemblablement supposer qu’une telle solution ne peut fonctionner qu’à petite échelle, pour des montants modestes, dans la mesure où l’État ne va pas intervenir, comme dans le cas de Bitcoin Beach au Salvador.</p>
<p>La deuxième variante de cette solution est de passer, non plus par des contrats juridiques reposant sur la confiance, mais par des contrats autonomes, dans le but de gérer les transferts en dehors de la chaîne. L’idée est ainsi de minimiser la confiance pour rendre le procédé viable. C’était par exemple la démarche derrière les <em>fidelity bonds</em>, proposés par Peter Todd en 2013, dont le but était de réduire l’influence du tiers en préservant de la confidentialité financière des clients et en permettant d’auditer efficacement les banques<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn23"><p><sup>23</sup>&nbsp;Peter Todd, <em>Fidelity-bonded banks: decentralized, auditable, private, off-chain payments</em>, /02/2023 17:49:34 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=146307.msg1553349#msg1553349" class="uri">https://bitcointalk.org/index.php?topic=146307.msg1553349#msg1553349</a>.</p></div></div><p>Cette démarche s’est popularisée au moyen de ce qu’on appelle généralement le passage en surcouche (<em>layering</em>) qui consiste à déporter l’activité financière vers des protocoles ouverts et décentralisés, préservant partiellement les propriétés de la chaîne. L’idée est de condenser une multitude de transferts en un petit nombre de transactions effectuées sur la couche de base, c’est-à-dire la chaîne de blocs. Cette terminologie est issue de la décomposition en couches de la suite des protocoles Internet, qui est organisée en couches multiples dépendant l’une de l’autre, comme TCP qui dépend de IP.</p>
<p>Dans le passage en surcouche, le compromis de sécurité est partiel (seuls certains bitcoins sont concernés) et limité dans le temps (ces bitcoins peuvent être récupérés sur la chaîne), par opposition au compromis de sécurité total et persistant imposé par l’augmentation de la taille limite des blocs. Il s’agit d’une méthode conforme au modèle à deux couches que Nick Szabo imaginait pour bit gold, avec une couche de base dont le rôle était de garantir la rareté infalsifiable de la monnaie, et une couche supérieure qui permettait de réaliser les paiements effectifs.</p>
<p>Il existe ainsi une diversité de propositions permettant d’effectuer ce passage en surcouche en réalisant un compromis plus ou moins important. Les principales sont les chaînes latérales, le réseau Lightning et Fedimint, dont nous parlerons en détail par la suite. Il existe également d’autres propositions comme l’échange d’objets physiques (OpenDime<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a>), le protocole Rumple<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a>, les statechains<a href="#fn26" class="footnote-ref" id="fnref26" role="doc-noteref"><sup>26</sup></a>, les ZK-rollups<a href="#fn27" class="footnote-ref" id="fnref27" role="doc-noteref"><sup>27</sup></a> ou encore le protocole Ark<a href="#fn28" class="footnote-ref" id="fnref28" role="doc-noteref"><sup>28</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn24"><p><sup>24</sup>&nbsp;«&nbsp;OpenDime&nbsp;»&nbsp;: Les clés Opendime de Coinkite sont les produits les plus réputés pour l’échange physique en dehors de la chaîne. L’utilisateur peut vérifier que le scellé d’une clé n’a pas été brisé et que le contenu de celle-ci correspond au montant indiqué, de sorte qu’il peut l’accepter en tant que moyen de paiement. L’un des inconvénients majeurs est que la perte et le vol sont beaucoup plus faciles que dans le cas d’une portefeuille numérique bien géré. – Voir <a href="https://opendime.com/" class="uri">https://opendime.com/</a>.</p></div><div id="fn25"><p><sup>25</sup>&nbsp;«&nbsp;le protocole Rumple&nbsp;»&nbsp;: Fiatjaf, <em>idea: Rumple</em> /10/2020 21:42 UTC&nbsp;: <a href="https://fiatjaf.com/rumple.html" class="uri">https://fiatjaf.com/rumple.html</a>.</p></div><div id="fn26"><p><sup>26</sup>&nbsp;«&nbsp;les statechains&nbsp;»&nbsp;: Ruben Somsen, <em>Statechains: Non-custodial Off-chain Bitcoin Transfer</em>, 4 juin 2019&nbsp;: <a href="https://medium.com/@RubenSomsen/statechains-non-custodial-off-chain-bitcoin-transfer-1ae4845a4a39" class="uri">https://medium.com/@RubenSomsen/statechains-non-custodial-off-chain-bitcoin-transfer-1ae4845a4a39</a>.</p></div><div id="fn27"><p><sup>27</sup>&nbsp;«&nbsp;les ZK-rollups&nbsp;»&nbsp;: Rollkit, <em>Sovereign rollups on Bitcoin with Rollkit</em>, 5 mars 2023&nbsp;: <a href="https://rollkit.dev/blog/sovereign-rollups-on-bitcoin-with-rollkit" class="uri">https://rollkit.dev/blog/sovereign-rollups-on-bitcoin-with-rollkit</a>&nbsp;; archive&nbsp;: <a href="http://web.archive.org/web/20230511021256/https://rollkit.dev/blog/sovereign-rollups-on-bitcoin/" class="uri">http://web.archive.org/web/20230511021256/https://rollkit.dev/blog/sovereign-rollups-on-bitcoin/</a>.</p></div><div id="fn28"><p><sup>28</sup>&nbsp;«&nbsp;le protocole Ark&nbsp;»&nbsp;: Kudzai Kutukwa, «&nbsp;<em>Introducing Ark: An Alternative Bitcoin Scaling Solution Focused on Preserving Privacy</em>&nbsp;», <em>Bitcoin Magazine</em>, 11 juin 2023&nbsp;: <a href="https://bitcoinmagazine.com/technical/how-ark-plans-to-scale-private-bitcoin-payments" class="uri">https://bitcoinmagazine.com/technical/how-ark-plans-to-scale-private-bitcoin-payments</a>.</p></div></div></section>
<section id="les-chaînes-latérales" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="les-chaînes-latérales">Les chaînes latérales</h2>
<p>Les chaînes latérales, ou <em>sidechains</em> en anglais, sont des chaînes de blocs secondaires fonctionnant parallèlement à une autre chaîne de blocs dite «&nbsp;principale&nbsp;». Elles ont été formalisées en octobre 2014 par les développeurs de Blockstream<a href="#fn29" class="footnote-ref" id="fnref29" role="doc-noteref"><sup>29</sup></a>. Cette solution technique apporte une capacité de traitement supplémentaire et une extensibilité supérieure, au prix d’une sécurité locale sensiblement amoindrie. En 2014, Blockstream envisageait de construire ainsi tout un écosystème de chaînes latérales permettant d’accomplir des tâches impossibles sur la chaîne principale comme l’émission d’actifs natifs, le déploiement de contrats autonomes avancés ou la gestion de noms de domaine.</p>
<div class="no-row-height column-margin column-container"><div id="fn29"><p><sup>29</sup>&nbsp;Adam Back, Matt Corallo, Luke Dashjr, Mark Friedenbach, Gregory Maxwell, Andrew Miller, Andrew Poelstra, Jorge Timón, Pieter Wuille, <em>Enabling Blockchain Innovations with Pegged Sidechains</em>, 22 octobre 2014&nbsp;: <a href="https://blockstream.com/sidechains.pdf" class="uri">https://blockstream.com/sidechains.pdf</a>.</p></div></div><p>Une chaîne latérale est une chaîne de blocs parallèle à une autre qui permet de transférer des fonds d’une chaîne à l’autre sans mettre en jeu l’intégrité des fonds déplacés. Il s’agit généralement de procéder à un ancrage bilatéral (<em>two-way peg</em>) permettant aux bitcoins d’être transférés d’une chaîne à l’autre sans perte de valeur, comme représenté sur la figure&nbsp;<a href="#fig:sidechain-two-way-peg" data-reference-type="ref" data-reference="fig:sidechain-two-way-peg">14.1</a>. Dans un sens, les bitcoins sont verrouillés sur la chaîne principale et leur équivalent est créé sur la chaîne latérale&nbsp;; dans l’autre, les bitcoins sont détruits sur la chaîne latérale et leur équivalent est déverrouillé sur la chaîne principale.</p>
<p>Deux aspects différencient le modèle de sécurité d’une chaîne latérale de celui de la chaîne principale&nbsp;: le maintien de l’ancrage bilatéral et le mécanisme de consensus. Le premier consiste à décider qui peut déverrouiller les fonds lors d’un transfert de la chaîne latérale vers la chaîne principale. En effet, puisque la chaîne latérale est voulue comme un complément (et pas comme une extension), les nœuds de la chaîne principale n’ont pas connaissance de cette chaîne latérale. De ce fait, le retrait est soumis à une certaine confiance, placée usuellement dans une fédération de participants qui se méfient les uns des autres<a href="#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup>30</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn30"><p><sup>30</sup>&nbsp;«&nbsp;une fédération de participants qui se méfient les uns des autres&nbsp;»&nbsp;: Johnny Dilley, Andrew Poelstra, Jonathan Wilkins, Marta Piekarska, Ben Gorlick, Mark Friedenbach, <em>Strong Federations: An Interoperable Blockchain Solution to Centralized Third-Party Risks</em>, 2016&nbsp;: <a href="https://blockstream.com/strong-federations.pdf" class="uri">https://blockstream.com/strong-federations.pdf</a>.</p></div></div><div id="fig:sidechain-two-way-peg" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><embed src="img/sidechain-two-way-peg.eps" class="img-fluid"></p>
<figcaption>Chaîne latérale&nbsp;: dépôt, transfert et retrait.</figcaption>
</figure>
</div>
<p>Le second aspect concerne la confirmation des transactions sur la chaîne latérale, et ici les options sont plus variées. Le consensus peut reposer sur le minage combiné, auquel cas c’est le travail de la chaîne principale qui est utilisé. Il peut se fonder sur la preuve d’enjeu, auquel cas c’est l’unité de la chaîne principale qui est impliquée. Ou il peut recourir à une fédération se mettant d’accord grâce à un algorithme BFT classique, auquel cas c’est l’appartenance à cette fédération qui importe (preuve d’autorité).</p>
<p>Cette vision s’est concrétisée avec le lancement sur BTC de deux chaînes latérales distinctes en 2018. La première était RSK (aussi appelée Rootstock), qui a été lancée par Sergio Lerner en janvier de cette année-là et qui était focalisée sur l’exécution d’une machine virtuelle Turing-complète s’approchant de celle d’Ethereum. La seconde était Liquid, qui était la mise en œuvre du modèle Elements développé par Blockstream et dont le but primaire était de faciliter les transactions entre les différents acteurs financiers du secteur, dont notamment les plateformes d’échange. Dans Liquid, la sécurité repose sur une fédération de fonctionnaires qui assurent les deux rôles&nbsp;: ils maintiennent l’ancrage du L-BTC en tant que gardiens (<em>watchmen</em>) et participent au consensus de la chaîne en tant que signataires de blocs (<em>blocksigners</em>). RSK allie le minage combiné et une fédération de «&nbsp;notaires&nbsp;» pour assurer à la fois l’ancrage du RBTC et le traitement des transactions.</p>
<p>Les deux chaînes latérales n’ont cependant pas réussi à attirer une activité significative au fil des années, en raison des risques liés. En effet, utiliser ces chaînes requiert toujours une forme de confiance qui, bien que réduite au possible, reste bien présente. Un exemple malheureux d’une sidechain qui a mal tourné est celui de la chaîne latérale SmartBCH de Bitcoin Cash, où la société qui gérait le plus gros pont entre les deux chaînes, CoinFLEX, a fait faillite et n’a pas été en mesure de rembourser les utilisateurs<a href="#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup>31</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn31"><p><sup>31</sup>&nbsp;«&nbsp;la chaîne latérale SmartBCH de Bitcoin Cash&nbsp;»&nbsp;: CheapLightning, <em>The Resolution of the smartBCH Experiment</em>, 2 août 2022&nbsp;: <a href="https://read.cash/@CheapLightning/the-resolution-of-the-smartbch-experiment-b06eb075" class="uri">https://read.cash/@CheapLightning/the-resolution-of-the-smartbch-experiment-b06eb075</a>.</p></div><div id="fn32"><p><sup>32</sup>&nbsp;Paul Sztorc, <em>Drivechain - The Simple Two Way Peg</em>, 24 novembre 2015&nbsp;: <a href="https://www.truthcoin.info/blog/drivechain/" class="uri">https://www.truthcoin.info/blog/drivechain/</a>.</p></div></div><p>Pour répondre à ces inconvénients et réduire la confiance impliquée, un protocole plus avancé a été élaboré par le chercheur Paul Sztorc depuis novembre 2015&nbsp;: Drivechain<a href="#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup>32</sup></a>. Comme son nom l’indique (<em>drive chain</em> signifie chaîne de transmission), il s’agit d’une véritable machine de création et de gestion de chaînes latérales.</p>
<p>La caractéristique principale de Drivechain est que l’ancrage bilatéral est confié aux mineurs, grâce au dépôt fiduciaire par taux de hachage (<em>hashrate escrow</em>) défini dans le BIP-300<a href="#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup>33</sup></a>. Durant chaque période de six mois (26&nbsp;300&nbsp;blocs), les mineurs votent pour la transaction de retrait de la chaîne latérale distribuant les fonds aux utilisateurs en ayant fait la requête. La transparence et la lenteur de ces transactions permettent à l’ensemble des commerçants de la chaîne principale de les auditer. Les transferts courants, plus rapides, se font par des échanges atomiques ou par des services centralisés.</p>
<div class="no-row-height column-margin column-container"><div id="fn33"><p><sup>33</sup>&nbsp;«&nbsp;BIP-300&nbsp;»&nbsp;: Paul Sztorc, CryptAxe, <em>BIP-300: Hashrate Escrows</em>, 23 mai 2017&nbsp;: <a href="https://github.com/bitcoin/bips/blob/master/bip-0300.mediawiki" class="uri">https://github.com/bitcoin/bips/blob/master/bip-0300.mediawiki</a>.</p></div><div id="fn34"><p><sup>34</sup>&nbsp;«&nbsp;BIP-301&nbsp;»&nbsp;: Paul Sztorc, CryptAxe, <em>BIP-301: Blind Merged Mining</em>, 23 juillet 2019&nbsp;: <a href="https://github.com/bitcoin/bips/blob/master/bip-0301.mediawiki" class="uri">https://github.com/bitcoin/bips/blob/master/bip-0301.mediawiki</a>.</p></div></div><p>La validation des transactions sur la chaîne latérale utilisant Drivechain peut être assurée par n’importe quel algorithme de consensus. Mais le plus naturel est d’utiliser le minage combiné. C’est pourquoi le projet Drivechain contient également la proposition du minage combiné «&nbsp;aveugle&nbsp;» (BIP-301<a href="#fn34" class="footnote-ref" id="fnref34" role="doc-noteref"><sup>34</sup></a>), une technique permettant aux mineurs de la chaîne principale de déléguer automatiquement la validation d’une chaîne latérale à autrui contre une rémunération. Le validateur gagne la différence entre le revenu de la chaîne latérale et l’achat du «&nbsp;droit de trouver un bloc&nbsp;». Ceci a pour effet de ne pas obliger les mineurs à gérer les chaînes latérales tout en touchant une partie de leur revenu.</p>
<p>Drivechain est un concept astucieux qui aurait pour avantage de pleinement réaliser la vision de Blockstream de 2014. Cependant, il présente un inconvénient majeur&nbsp;: le modèle de sécurité de son ancrage bilatéral. Celui-ci repose en effet sur le recours éventuel à un soft fork réalisé par les commerçants dans le but de corriger une transaction de retrait frauduleuse, qui serait par exemple le fait de mineurs malintentionnés cherchant à voler l’argent du dépôt fiduciaire. Il se fonde donc sur la propension des commerçants à suivre l’activité de la chaîne latérale en question d’une part, et à procéder à une modification du protocole pour geler la transaction incriminée d’autre part. C’est pourquoi cette proposition est, encore aujourd’hui en 2023, largement disputée.</p>
</section>
<section id="le-réseau-lightning" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="le-réseau-lightning">Le réseau Lightning</h2>
<p>Le réseau Lightning, ou <em>Lightning Network</em> en anglais, est un concept de réseau de canaux de paiements bidirectionnels. Celui-ci a été présenté pour la première fois le 23 février 2015 par Joseph Poon et Thaddeus Dryja lors d’un séminaire de développeurs Bitcoin à San Francisco<a href="#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup>35</sup></a>. À l’époque, des propositions concurrentes basées sur des idées similaires existaient comme Amiko Pay (conceptualisé par Corné Plooy), Impulse (développé par Jeff Garzik pour Bitpay) et Ström (imaginé par la start-up Strawpay), mais Lightning est rapidement devenu dominant. En 2023, il s’agissait de la solution favorisée par les utilisateurs de BTC pour effectuer davantage de transferts, si bien que le sigle LNP/BP a émergé pour désigner l’ensemble des protocoles intervenant dans le passage en surcouche (à l’instar de TCP/IP vis-à-vis d’Internet)<a href="#fn36" class="footnote-ref" id="fnref36" role="doc-noteref"><sup>36</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn35"><p><sup>35</sup>&nbsp;Taariq Lewis, <em>SF Bitcoin Devs Seminar: Scaling Bitcoin to Billions of Transactions Per Day</em>, 5 mars 2015&nbsp;: <a href="https://www.youtube.com/watch?v=8zVzw912wPo" class="uri">https://www.youtube.com/watch?v=8zVzw912wPo</a>.</p></div><div id="fn36"><p><sup>36</sup>&nbsp;«&nbsp;le sigle LNP/BP a émergé pour désigner l’ensemble des protocoles intervenant dans le passage en surcouche&nbsp;»&nbsp;: Giacomo Zucco, <em>LNP/BP: A gentle introduction</em>, 21 juillet 2020, archive&nbsp;: <a href="https://web.archive.org/web/20200820123506/https://alzashop.com/lnp-bp-lightning-netowrk-and-bitcoin-protocols" class="uri">https://web.archive.org/web/20200820123506/https://alzashop.com/lnp-bp-lightning-netowrk-and-bitcoin-protocols</a>.</p></div></div><p>L’infrastructure du réseau Lighning repose sur des canaux de paiement qui sont ouverts et fermés entre des participants. Un canal de paiement est, comme décrit dans le chapitre&nbsp;<a href="les-contrats-autonomes.html" data-reference-type="ref" data-reference="ch:contrats">13</a>, un ensemble de contrats autonomes qui permet à deux personnes d’effectuer des paiements répétés de manière sûre et instantanée à partir de liquidités préalablement bloquées. L’utilisation d’un canal est par conséquent limitée par sa capacité, c’est-à-dire la somme des deux soldes des acteurs concernés.</p>
<p>Le principe du réseau Lightning est de router les paiements au travers de ces canaux par l’intermédiaire de HTLC, qui sont des contrats d’engagement plus complexes permettant de mettre à jour les canaux concernés<a href="#fn37" class="footnote-ref" id="fnref37" role="doc-noteref"><sup>37</sup></a>. Un paiement transite sur le réseau moyennant des frais minimes qui vont aux nœuds le relayant. Le réseau Lightning est donc semblable à un boulier, dont les tiges sont des canaux et dont les boules sont les satoshis qui transitent d’un côté ou de l’autre des canaux, comme on peut le voir sur la figure&nbsp;<a href="#fig:lightning-network-abacus" data-reference-type="ref" data-reference="fig:lightning-network-abacus">14.2</a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn37"><p><sup>37</sup>&nbsp;En pratique, ces HTLC sont souvent aussi utilisés pour mettre à jour les canaux directement, afin de simplifier la mise en œuvre et d’améliorer la confidentialité. – Voir Andreas M. Antonopoulos, Olaoluwa Osuntokun, René Pickhardt, «&nbsp;Routing on a Network of Payment Channels&nbsp;», in <em>Mastering the Lightning Network: A Second Layer Blockchain Protocol for Instant Bitcoin Payments</em>, O’Reilly Media, 2022, pp.&nbsp;185–207.</p></div></div><div id="fig:lightning-network-abacus" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><embed src="img/lightning-network-abacus.eps" class="img-fluid"></p>
<figcaption>Paiement de 3&nbsp;mBTC sur le réseau Lightning.</figcaption>
</figure>
</div>
<p>Ce fonctionnement offre la possibilité de réaliser des paiements quasi instantanés et peu chers. Il permet de faire plus de transferts en bitcoins sans réaliser davantage de transactions sur la chaîne et sans déléguer explicitement la gestion des fonds à un tiers. De plus, le modèle conserve toute la programmabilité de Bitcoin et ouvre le champ des possibles quant à l’utilisation monétaire sur Internet.</p>
<p>Toutefois, l’apport de Lightning est à nuancer car il n’est pas exempt de défauts. D’abord, il hérite des inconvénients liés au modèle des canaux de paiement où, dans le cas du protocole de Poon-Dryja, une erreur peut mener à la perte des fonds. Puis, les contraintes liées à la capacité et au routage créent nécessairement une tendance à la centralisation, notamment par l’émergence de ce qu’on appelle les <em>Lightning Service Providers</em>, ce qui pourrait mener à l’installation d’une certaine censure. Ensuite, contrairement aux idées reçues, la confidentialité sur Lightning est faible, les paiements se faisant entre des clés publiques identifiées et transitant par des intermédiaires. Enfin, le réseau est soumis au niveau des frais sur la chaîne principale, ces derniers étant nécessaires au règlement des contrats, ce qui limite la capacité transactionnelle supplémentaire apportée.</p>
<p>Le réseau Lightning est donc adapté pour traiter les paiements du quotidien et les micropaiements, ne nécessitant pas forcément la confidentialité et la résistance à la censure offertes par la chaîne de blocs, à partir de canaux bien pourvus et régulièrement réapprovisionnés. Il a été mis en œuvre à partir de janvier 2018, principalement en surcouche de BTC, et s’est développé considérablement depuis, tant d’un point de vue technique qu’économique. Trois implémentations logicielles ont été maintenues par trois entités différentes (lnd par Lightning Labs, c-lightning par Blockstream, eclair par ACINQ) et un système de standards techniques (appelés <em>Bases of Lightning Technology</em> ou BOLT) a fini par émerger. Du côté économique, le réseau a rencontré un certain succès en attirant les capitaux et, en novembre 2023, une capacité totale de 5&nbsp;400&nbsp;BTC, équivalant à environ 200 millions de dollars, était réservée pour fournir de la liquidité pour les paiements<a href="#fn38" class="footnote-ref" id="fnref38" role="doc-noteref"><sup>38</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn38"><p><sup>38</sup>&nbsp;«&nbsp;en novembre 2023, une capacité totale de 5&nbsp;400&nbsp;BTC, équivalant à environ 200 millions de dollars&nbsp;»&nbsp;: <a href="https://bitcoinvisuals.com/ln-capacity" class="uri">https://bitcoinvisuals.com/ln-capacity</a>.</p></div></div></section>
<section id="les-banques-chaumiennes-de-fedimint" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="les-banques-chaumiennes-de-fedimint">Les banques chaumiennes de Fedimint</h2>
<p>Une autre proposition est Fedimint<a href="#fn39" class="footnote-ref" id="fnref39" role="doc-noteref"><sup>39</sup></a>, qui est un protocole de garde et d’échange confidentiel de bitcoins dans un contexte communautaire. D’un point de vue technique, il s’agit de confier la garde des bitcoins à une fédération et d’échanger des billets chaumiens (eCash) émis par ladite fédération. Ce fonctionnement explique le nom du protocole, qui est une abréviation approximative de <em>Federated Chaumian Mint</em> («&nbsp;monnaierie chaumienne fédérée&nbsp;» en français).</p>
<div class="no-row-height column-margin column-container"><div id="fn39"><p><sup>39</sup>&nbsp;Le fonctionnement de Fedimint est décrit dans la documentation présente sur le site web&nbsp;: <a href="https://fedimint.org/docs/intro" class="uri">https://fedimint.org/docs/intro</a>.</p></div><div id="fn40"><p><sup>40</sup>&nbsp;«&nbsp;MiniMint&nbsp;»&nbsp;: Kiara Bickers, <em>Blockstream Sponsors Federated E-Cash as a Bitcoin Scaling Technology</em>, 26 octobre 2021&nbsp;: <a href="https://medium.com/blockstream/blockstream-sponsors-federated-e-cash-as-a-bitcoin-scaling-technology-637ba05de7b3" class="uri">https://medium.com/blockstream/blockstream-sponsors-federated-e-cash-as-a-bitcoin-scaling-technology-637ba05de7b3</a>.</p></div><div id="fn41"><p><sup>41</sup>&nbsp;«&nbsp;SCRIT&nbsp;»&nbsp;: <a href="https://github.com/scritcash/scrit-whitepaper/blob/master/scrit-whitepaper.pdf" class="uri">https://github.com/scritcash/scrit-whitepaper/blob/master/scrit-whitepaper.pdf</a>.</p></div></div><p>Fedimint a été imaginé par le cypherpunk Eric Sirion au cours de l’année 2021 et implémenté sous forme minimale sous le nom de MiniMint<a href="#fn40" class="footnote-ref" id="fnref40" role="doc-noteref"><sup>40</sup></a>. Sirion a été doublement inspiré par les tentatives d’appliquer eCash en surcouche de Bitcoin comme SCRIT<a href="#fn41" class="footnote-ref" id="fnref41" role="doc-noteref"><sup>41</sup></a> et par les approches communautaires telles que Bitcoin Beach au Salvador. La première transaction d’une fédération Fedimint a eu lieu le 28 septembre 2022 durant le Hackers Congress de Paralelni Polis.</p>
<p>La première composante de Fedimint est la banque chaumienne qui est gérée par la fédération. Celle-ci utilise le procédé de signature aveugle de David Chaum pour émettre des certificats adossés à un certain montant de satoshis, qui peut être récupéré à tout moment sur la chaîne ou sur le réseau Lightning. Cette composante assure la confidentialité financière partielle des participants&nbsp;: la banque n’a pas connaissance des échanges réalisés par les clients, mais son rôle de prévention de la double dépense exige qu’elle voie les revenus des commerçants<a href="#fn42" class="footnote-ref" id="fnref42" role="doc-noteref"><sup>42</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn42"><p><sup>42</sup>&nbsp;Le fonctionnement technique des systèmes chaumiens a été décrit dans la section «&nbsp;eCash&nbsp;: l’argent liquide chaumien&nbsp;» du chapitre&nbsp;<a href="la-cybermonnaie-avant-nakamoto.html" data-reference-type="ref" data-reference="ch:cybermonnaie">6</a>.</p></div><div id="fn43"><p><sup>43</sup>&nbsp;«&nbsp;Open Transactions&nbsp;»&nbsp;: fellowtraveler, <em>Open Transactions: untraceable digital cash</em>, /08/2010 20:58:05 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=847.msg9976#msg9976" class="uri">https://bitcointalk.org/index.php?topic=847.msg9976#msg9976</a>.</p></div><div id="fn44"><p><sup>44</sup>&nbsp;«&nbsp;certificats aveugles au porteur&nbsp;»&nbsp;: theymos, <em>Blinded bearer certificates</em>, /12/2016 21:44:24&nbsp;: <a href="https://www.reddit.com/r/Bitcoin/comments/5ksu3o/blinded_bearer_certificates/" class="uri">https://www.reddit.com/r/Bitcoin/comments/5ksu3o/blinded_bearer_certificates/</a>.</p></div><div id="fn45"><p><sup>45</sup>&nbsp;«&nbsp;Cashu&nbsp;»&nbsp;: callebtc sur Twitter, /09/2022 09:47 UTC&nbsp;: <a href="https://twitter.com/callebtc/status/1569986110272540674" class="uri">https://twitter.com/callebtc/status/1569986110272540674</a>.</p></div></div><p>L’idée d’utiliser eCash en surcouche de Bitcoin n’est pas une idée nouvelle. Elle a été proposée et implémentée pour la première fois le 17 août 2010, par un individu intervenant sous le pseudonyme fellowtraveller sur le forum de Bitcoin sous la forme de son projet Open Transactions<a href="#fn43" class="footnote-ref" id="fnref43" role="doc-noteref"><sup>43</sup></a>. Le projet ne s’est jamais imposé, car le besoin ne se faisait pas ressentir et le système était probablement trop complexe. Cependant, l’idée est revenue timidement sur les devants de la scène au cours du débat sur la scalabilité avec la proposition des «&nbsp;certificats aveugles au porteur<a href="#fn44" class="footnote-ref" id="fnref44" role="doc-noteref"><sup>44</sup></a>&nbsp;» de Theymos (administrateur du subreddit r/Bitcoin et du forum Bitcointalk) en décembre 2016. Elle a également été reprise en 2019 par Frank Braun et Jonathan Logan (co-animateurs du podcast Cypherpunk Bitstream) au moyen de SCRIT, un projet de système chaumien fédéré dont le nom est l’acronyme de «&nbsp;<em>Secure, Confidential, Reliable, Instant Transactions</em>&nbsp;». Le dernier projet en date d’une mise en œuvre d’un système chaumien centralisé est Cashu, un protocole développé en 2022 par le développeur callebtc, qui permet la création et l’échange de certificats-bitcoin en surcouche de Lightning et de nouveaux jetons<a href="#fn45" class="footnote-ref" id="fnref45" role="doc-noteref"><sup>45</sup></a>.</p>
<p>L’intérêt de Fedimint, tout comme son prédécesseur SCRIT, est de décentraliser la garde de bitcoins. Pour ce faire, il combine le système chaumien avec une approche dite «&nbsp;communautaire&nbsp;», consistant à déployer une banque gérée par les membres de confiance d’une communauté locale.</p>
<p>Cette approche a été illustrée par l’expérience de Bitcoin Beach, un projet de développement économique durable autour de la plage d’El Zonte au Salvador. Une banque communautaire a ainsi vu le jour en 2020 et permet depuis lors aux locaux d’échanger des bitcoins de façon sûre et fiable, par le biais du Bitcoin Beach Wallet (devenu Blink) développé par Galoy. C’est cette expérience qui a inspiré l’adoption du cours légal à l’échelle nationale en septembre 2021.</p>
<p>La deuxième composante de Fedimint est donc une fédération, semblable aux fédérations des chaînes latérales comme Liquid ou RSK, mais composée de personnes de confiance qui possèdent les capacités techniques nécessaires à la gestion d’un nœud. Les membres de cette fédération, appelés gardiens, sont responsables de la mise en place de l’infrastructure et se chargent de conserver les fonds des utilisateurs et d’assurer le bon fonctionnement de la banque chaumienne. Ils se coordonnent en utilisant un algorithme de consensus classique (appelé HBBFT<a href="#fn46" class="footnote-ref" id="fnref46" role="doc-noteref"><sup>46</sup></a>) qui, comme tous les algorithmes de ce type, demande un minimum de 66&nbsp;% d’acteurs honnêtes pour fonctionner.</p>
<div class="no-row-height column-margin column-container"><div id="fn46"><p><sup>46</sup>&nbsp;«&nbsp;HBBFT&nbsp;»&nbsp;: Il s’agit du sigle de <em>Honey Badger Byzantine Fault Tolerant</em>.</p></div></div><p>L’emploi de cette fédération représente un compromis technique évident entre la propriété entière des fonds et sa délégation auprès d’un acteur unique. Ce compromis apporte des avantages majeurs au niveau des frais de traitement des transactions et de la facilité d’utilisation, mais engendre également des risques importants. Ceux-ci sont le risque de garde (la fédération peut voler ou perdre des fonds), le risque d’émission frauduleuse (elle peut émettre plus de certificats qu’elle n’a de bitcoins), le risque de censure (elle peut refuser de valider une transaction) et le risque réglementaire (la fédération peut être saisie et fermée sur décision étatique).</p>
<p>Tout ceci fait que Fedimint ne peut pas être conçue comme une solution de scalabilité, mais comme une proposition de remplacement des applications dépositaires. L’objectif de Fedimint est d’améliorer la garde de bitcoins en la décentralisant et en accroissant la confidentialité des échanges internes. Son caractère local doit permettre d’échapper aux réglementations financières, et ainsi de ne pas subir le sort réservé aux banques classiques.</p>
</section>
<section id="le-passage-à-léchelle-par-substitution" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="le-passage-à-léchelle-par-substitution">Le passage à l’échelle par substitution</h2>
<p>Le passage en surcouche est une manière correcte d’accroître le volume économique lié à une chaîne donnée sans trop affecter ses caractéristiques premières. Néanmoins, cette approche présente aussi des limites&nbsp;: non seulement les différentes surcouches ont leurs défauts propres, mais surtout elles reposent en dernier lieu sur le règlement réalisé sur la chaîne de blocs, dont la capacité est limitée. Par conséquent, le plancher d’utilité n’est pas supprimé par le passage en surcouche et on ne peut ainsi pas voir ce dernier comme un moyen miraculeux de traiter une infinité de transactions.</p>
<p>La plage de valeurs desservie par un système cryptomonétaire donné a pour effet de créer une demande pour des systèmes de substitution plus à même d’assurer le transfert hors de cette plage. Un système dont le niveau de frais est élevé laisse la voie libre à l’utilisation d’un système moins sûr mais moins cher, permettant le traitement des plus petites transactions. À l’inverse, un système dont le niveau de sécurité est faible favorise l’émergence d’un système plus cher mais aussi plus sûr, autorisant les plus gros transferts. Il existe de ce fait une certaine complémentarité entre les différentes mises en œuvre de Bitcoin qui permettent de gérer l’intégralité de l’activité transactionnelle émanant des utilisateurs<a href="#fn47" class="footnote-ref" id="fnref47" role="doc-noteref"><sup>47</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn47"><p><sup>47</sup>&nbsp;Eric Voskuil, «&nbsp;Principe de substitution&nbsp;», in <em>Cryptoéconomie&nbsp;: Principes fondamentaux de Bitcoin</em>, Amazon KDP, 2022, pp.&nbsp;315–316.</p></div></div><p>Au cours de l’histoire, une telle complémentarité s’est manifestée par l’utilisation de plusieurs métaux précieux comme base monétaire. L’or ne pouvait pas permettre de couvrir toutes les plages de valeurs&nbsp;: celui-ci était adapté au transfert de grosses sommes, chose pour laquelle il a été sélectionné comme monnaie de réserve mondiale, mais pas à l’échange de petite monnaie. C’est pour remplir ce dernier rôle complémentaire que l’argent, et d’autres métaux moins précieux comme le cuivre, ont été utilisés. L’argent, mot qu’on utilise encore aujourd’hui en français comme synonyme de monnaie, était la monnaie du quotidien tandis que l’or servait essentiellement aux règlements plus onéreux.</p>
<p>Cet aspect bimétallique (voire trimétallique) de la monnaie a perduré pendant des siècles, de la Haute Antiquité jusqu’au <span class="smallcaps">xix</span> siècle. Il était reconnu par les pouvoirs publics qui définissaient leur monnaie comme un poids en or ou en argent, et frappaient des pièces d’or et d’argent en décrétant un taux de change selon le ratio or-argent du marché. On constate d’ailleurs que ce ratio or-argent a été relativement stable au cours de l’histoire en variant entre 10 et 18<a href="#fn48" class="footnote-ref" id="fnref48" role="doc-noteref"><sup>48</sup></a>, ce qui confirme le rôle monétaire de l’argent aux côtés de l’or.</p>
<div class="no-row-height column-margin column-container"><div id="fn48"><p><sup>48</sup>&nbsp;«&nbsp;ce ratio or-argent a été relativement stable au cours de l’histoire en variant entre 10 et 18&nbsp;»&nbsp;: William Jacob, <em>An Historical Inquiry Into the Production and Consumption of the Precious Metals</em>, 1831.</p></div></div><p>Toutefois, avec l’émergence de l’étalon-or et la disparition du bimétallisme à la fin du <span class="smallcaps">xix</span>&nbsp;siècle, l’argent a peu à peu perdu son rôle monétaire pour être remplacé par la monnaie papier, dans un premier temps adossée à l’or, bien plus commode pour effectuer des échanges. Le ratio a augmenté en conséquence et est passé de 15,5 en 1870 à 80 aujourd’hui, ce qui correspond à une perte de valeur de l’argent de plus de 80&nbsp;% par rapport à l’or.</p>
<p>L’analogie avec les métaux précieux est éclairante. Puisque la version principale de Bitcoin (BTC) n’est pas adaptée pour traiter les transferts de plus petite valeur, il s’ensuit que ces transferts potentiels sont réalisés au moyen d’une monnaie de substitution (de la cryptomonnaie, de la monnaie fiat liquide, du crédit déplacé par des services bancaires permissifs, etc.) voire ne sont pas traités du tout. Litecoin, dont la principale narration est qu’il s’agirait d’un argent numérique au même titre que Bitcoin serait un or numérique, répond tout à fait à cette demande. Il était ainsi présenté dès son lancement comme une «&nbsp;version allégée de Bitcoin&nbsp;» ayant pour but d’être «&nbsp;à l’argent ce que Bitcoin est à l’or<a href="#fn49" class="footnote-ref" id="fnref49" role="doc-noteref"><sup>49</sup></a>&nbsp;». Cette désignation ne provient pas tant du fait qu’il y a quatre fois plus de litecoins que de bitcoins, ce qui n’a aucune incidence sur le système, mais plutôt du fait que la capacité transactionnelle maximale de LTC est quatre fois plus grande, ce qui amoindrit la sécurité potentielle du système. Cette analyse vaut également pour Bitcoin Cash à une échelle encore plus grande.</p>
<div class="no-row-height column-margin column-container"><div id="fn49"><p><sup>49</sup>&nbsp;Charlie Lee, <em>Re: [ANN] Litecoin - a lite version of Bitcoin. Be ready when is launches!</em>, /10/2011 06:14:28 UTC&nbsp;: <a href="https://bitcointalk.org/index.php?topic=47417.msg564414#msg564414" class="uri">https://bitcointalk.org/index.php?topic=47417.msg564414#msg564414</a>.</p></div></div><p>Dans cette vision, les mises en œuvre alternatives de Bitcoin serviraient à traiter toutes les transactions, au prix de nécessaires transferts entre les chaînes. Ces derniers seraient assurés par des services de change centralisés ou par des systèmes d’échanges atomiques basés sur des carnets d’ordres publics. Cette solution, bien qu’imparfaite, serait tout à fait naturelle et est d’ailleurs déjà pratiquée aujourd’hui.</p>
<p>L’extensivité est également concernée par cet effet. Le coût technique d’une utilisation complexe de Bitcoin peut être compensé par des systèmes de substitution de moindre qualité. La confidentialité à bas coût peut être assurée par Monero et la programmabilité simplifiée par Ethereum Classic par exemple. Comme le remarquait très justement Satoshi Nakamoto en décembre 2010, à propos de la pertinence de BitDNS (le futur Namecoin)&nbsp;:</p>
<p>«&nbsp;Empiler tous les systèmes de quorum par preuve de travail dans une seule base de données ne passe pas à l’échelle. Bitcoin et BitDNS peuvent être utilisés séparément. [...] Les réseaux ont besoin d’avoir des destins différents. Les utilisateurs de BitDNS pourraient être complètement tolérants vis-à-vis de l’ajout de fonctionnalités permettant de traiter des données volumineuses puisque peu de registraires de noms de domaine seraient nécessaires, tandis que les utilisateurs de Bitcoin pourraient devenir de plus en plus sectaires à propos de la limitation de la taille de la chaîne pour que son accès reste facile pour beaucoup d’utilisateurs et pour les petits appareils<a href="#fn50" class="footnote-ref" id="fnref50" role="doc-noteref"><sup>50</sup></a>.&nbsp;»</p>
<div class="no-row-height column-margin column-container"><div id="fn50"><p><sup>50</sup>&nbsp;Satoshi Nakamoto, <em>Re: BitDNS and Generalizing Bitcoin</em>, /12/2010, 17:29:28&nbsp;: <a href="https://bitcointalk.org/index.php?topic=1790.msg28917#msg28917" class="uri">https://bitcointalk.org/index.php?topic=1790.msg28917#msg28917</a>.</p></div></div></section>
<section id="trois-types-de-compromis" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="trois-types-de-compromis">Trois types de compromis</h2>
<p>La scalabilité de Bitcoin est un sujet complexe. Contrairement à ce qui est parfois affirmé, un système donné est très peu scalable. Sa capacité à passer à l’échelle ne peut être améliorée qu’au moyen d’optimisations logicielles, matérielles ou algorithmiques. Le gain en performance sur la chaîne se fait la plupart du temps au prix d’un compromis direct, avec l’augmentation de la limite de capacité transactionnelle, ou indirect, avec l’altération du modèle de sécurité.</p>
<p>C’est la raison de l’existence du passage en surcouche, qui consiste à déporter une partie des transferts économiques vers des protocoles ouverts et décentralisés, préservant partiellement les propriétés de Bitcoin et reposant sur le règlement des litiges sur la chaîne. Dans cette démarche, le compromis de sécurité est partiel et limité dans le temps, contrairement au cas de l’augmentation de capacité transactionnelle où il est total et persistant. Le passage de surcouche s’est développé sur BTC au cours du temps par le biais des chaînes latérales, proposées en 2014 et mises en œuvre en 2018, du réseau Lightning, proposé en 2015 et déployé depuis 2018, et de Fedimint, proposé en 2021.</p>
<p>L’autre alternative est le passage à l’échelle par substitution, qui consiste, en substance, à déplacer les transactions les moins à risque vers des substituts de moins bonne qualité, c’est-à-dire des mises en œuvre moins sécurisées du concept Bitcoin. Cet effet s’est réellement manifesté pour la première fois en 2017 avec les premières congestions du réseau BTC et la hausse de la demande pour des contrats autonomes statiques (Ethereum), qui se sont notamment accompagnées d’une baisse de la dominance économique de la version principale de Bitcoin. Les maximalistes ont tendance à prétendre que le passage en surcouche permet de traiter l’ensemble des utilisations pertinentes de Bitcoin, mais, jusqu’à preuve du contraire, ce n’est pas le cas.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/les-contrats-autonomes.html" class="pagination-link" aria-label="Les contrats autonomes">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Les contrats autonomes</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/l-avenir-de-bitcoin.html" class="pagination-link" aria-label="L'avenir de Bitcoin">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">L’avenir de Bitcoin</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 © 2024 Konsensus Network
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../index.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../presale.html">
<p>Presale</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/konsensusn">
      <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/konsensusnetwork">
      <i class="bi bi-github" role="img" aria-label="Github">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/konsensusnetwork">
      <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/konsensusnetwork">
      <i class="bi bi-youtube" role="img" aria-label="YouTube">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>