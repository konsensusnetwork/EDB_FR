<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>14&nbsp; Scaling Up – L'Élégance de Bitcoin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/l-avenir-de-bitcoin.html" rel="next">
<link href="../chapters/les-contrats-autonomes.html" rel="prev">
<link href="..//figures/freestarfish.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="14&nbsp; Scaling Up – L’Élégance de Bitcoin">
<meta property="og:description" content="">
<meta property="og:image" content="cover.png">
<meta property="og:site_name" content="L'Élégance de Bitcoin">
<meta name="twitter:title" content="14&nbsp; Scaling Up – L’Élégance de Bitcoin">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="cover.png">
<meta name="twitter:site" content="@konsensusn">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">L’Élégance de Bitcoin</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> <i class="bi bi-book" role="img" aria-label="Book">
</i> 
<span class="menu-text">Lire en ligne</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bitcoinbook.shop/products/lelegance-de-bitcoin"> <i class="bi bi-shop" role="img" aria-label="Shop">
</i> 
<span class="menu-text">Acheter ce livre!</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/le-passage-a-l-echelle.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Scaling Up</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main">
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">À propos de ce livre</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/preface-de-jacques-favier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface by Jacques Favier</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/remerciements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/avant-propos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-debuts-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The Beginnings of Bitcoin</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/une-croissance-conflictuelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">A Conflict-Ridden Growth</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/des-racines-monetaires.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The Monetary Roots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-necessite-de-decentralisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Necessity of Decentralization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/un-mouvement-technologique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Un mouvement technologique</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-cybermonnaie-avant-nakamoto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Cryptocurrency Before Nakamoto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-valeur-de-l-information.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">The Value of Information</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-consensus-par-le-minage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Consensus Through Mining</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-resistance-a-la-censure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Resistance to Censorship</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-changement-de-la-monnaie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The Evolution of Currency</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/la-determination-du-protocole.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Determining the Protocol</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-rouages-de-la-machine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">The Inner Workings of the Machine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/les-contrats-autonomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Autonomous Contracts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/le-passage-a-l-echelle.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Scaling Up</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/l-avenir-de-bitcoin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Future of Bitcoin</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-system-s-lack-of-scalability" id="toc-the-system-s-lack-of-scalability" class="nav-link active" data-scroll-target="#the-system-s-lack-of-scalability">The System’s Lack of Scalability</a></li>
  <li><a href="#improving-base-efficiency" id="toc-improving-base-efficiency" class="nav-link" data-scroll-target="#improving-base-efficiency">Improving Base Efficiency</a></li>
  <li><a href="#banks-and-overlays" id="toc-banks-and-overlays" class="nav-link" data-scroll-target="#banks-and-overlays">Banks and Overlays</a></li>
  <li><a href="#sidechains" id="toc-sidechains" class="nav-link" data-scroll-target="#sidechains">Sidechains</a></li>
  <li><a href="#the-lightning-network" id="toc-the-lightning-network" class="nav-link" data-scroll-target="#the-lightning-network">The Lightning Network</a></li>
  <li><a href="#fedimint-chaumian-banks" id="toc-fedimint-chaumian-banks" class="nav-link" data-scroll-target="#fedimint-chaumian-banks">Fedimint Chaumian Banks</a></li>
  <li><a href="#scaling-through-substitution" id="toc-scaling-through-substitution" class="nav-link" data-scroll-target="#scaling-through-substitution">Scaling Through Substitution</a></li>
  <li><a href="#three-types-of-compromises" id="toc-three-types-of-compromises" class="nav-link" data-scroll-target="#three-types-of-compromises">Three Types of Compromises</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="ch:scalability" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Scaling Up</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span id="enotezch:14" label="enotezch:14"></span></p>
<p><span class="lettrine">S</span><span class="smallcaps">c</span>alability, a direct borrowing from the English term “scalability,” also known as extensibility, refers to a system’s capacity to scale up—that is, to continue functioning equivalently as the number of users increases. In a centrally managed system, this capability is ensured by adding computing hardware, either by increasing the computational power of the existing infrastructure (vertical scaling) or by multiplying instances of the infrastructure to share request processing (horizontal scaling). Consequently, scalability depends on the forecasting level of the entity managing the system.</p>
<p>In the case of a distributed system, which behaves differently, scalability refers to something more complex. Adding hardware is not sufficient; the system’s properties must also remain consistent as activity increases. In Bitcoin’s case, this problem is particularly difficult because any increase in load permanently affects the network nodes due to the need to share the entire blockchain. Essentially, the system does not scale—or scales very little.</p>
<p>This scalability issue in Bitcoin has been a major concern within the community, to the point of provoking an open conflict between 2015 and 2017: the infamous block wars described in Chapter&nbsp;<a href="une-croissance-conflictuelle.html" data-reference-type="ref" data-reference="ch:clivages">2</a>. Some believed that increasing the block size would suffice to handle demand without altering supply, while others imagined that overlay solutions like the Lightning Network would be effective enough to process all transfers. This chapter aims to provide an overview of the situation and propose a third way.</p>
<section id="the-system-s-lack-of-scalability" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="the-system-s-lack-of-scalability">The System’s Lack of Scalability</h2>
<p>Bitcoin’s original design is based on a simple principle: obtaining and verifying all transactions to ensure there is no double spending. As Satoshi Nakamoto wrote in the white paper, “the only way to confirm the absence of a transaction is to be aware of all transactions<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.” Therefore, to achieve maximum security, each node must, in principle, maintain a complete version of the blockchain.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, October&nbsp;31, 2008.</p></div></div><p>From the outset, this particular functioning naturally raised the question of the system’s scalability. When Satoshi Nakamoto presented his discovery on the Metzdowd.com cryptography mailing list on October 31, 2008, the first response he received addressed this problem. This response came from former cypherpunk James A. Donald on November 2, who wrote:</p>
<p>“We very, very much need such a system, but as I understand your proposal, it does not seem to scale to the required size.</p>
<p>For transferable proof of work tokens to have value, they must have monetary value. To have monetary value, they must be transferred within a very large network—as, for example, a file sharing network like Bittorrent.</p>
<p>To detect and reject a double-spending event in a timely manner, one must have most past transactions of the coins involved in the transaction, which, if implemented naively, requires each peer to have most past transactions, or most past transactions that have recently occurred. If hundreds of millions of people are doing transactions, that is a lot of bandwidth—each must know all transactions or a substantial fraction thereof<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.”</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;James A. Donald, <em>Re: Bitcoin P2P e-cash paper</em>, November 2, 2008, 23:46:23 UTC: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014814.html</a>.</p></div></div><p>By this, James A. Donald highlighted Bitcoin’s lack of scalability. For any given system, an increase in transaction volume raises the number of transactions to obtain and process. This increase makes operating a node more difficult, potentially affecting the network’s decentralization and, consequently, security. Therefore, there is always a trade-off between the system’s utility and its security—or, more precisely, between ease of transaction and ease of verification.</p>
<p>This trade-off generally manifests as a limit on transaction capacity, described by the consensus rules (explicit limit) or, more rarely, by network rules (implicit limit). The transaction capacity limit was originally defined as a maximum block size, prohibiting miners from creating blocks larger than a certain size. In the prototype, this size was implicitly defined by the maximum size of protocol transmission messages, that is, 32&nbsp;MB. Then, an explicit limit of 1 megabyte (1&nbsp;MB) was added by Satoshi Nakamoto in September 2010 through the constant MAX_BLOCK_SIZE, without any public announcement from him, to prevent denial-of-service attacks. This size corresponded, for a network running at full capacity, to a theoretical volume of 4.5 standard transactions per second, which in practice amounted to about 3 transactions per second.</p>
<p>With the integration of SegWit into the main version of Bitcoin in August 2017, this limitation became a weight limit of blocks. This new metric gave greater importance to the base size compared to the witness size in the calculation of the block’s measure, also modifying how miners counted to add transactions to the block. This change was an effective increase in the protocol’s transaction capacity, raising the allowed transaction volume to 8 transactions per second theoretically, and to 4.5 transactions per second in practice.</p>
<p>The existence of a transaction capacity limit inevitably creates scarcity of block space. If it is fixed, it makes the supply inherently inelastic. Thus, strong demand for block space leads, through an auction effect, to an increase in the price for inclusion—that is, transaction fees. The fee market is stimulated by this rigid limit instead of remaining at its natural level, namely the default inclusion cost for miners.</p>
<p>Through its effect on fee levels, the limit creates a utility floor—that is, a value level below which transfer and holding are not considered profitable by users. Indeed, miners are led to reject transactions that do not pay a sufficient fee rate relative to their size. Consequently, the utility of a transaction may be deemed insufficient by its author concerning the average fee level of the chain, in which case it does not occur. If someone wants to buy a coffee for $2 in BTC but the usual fees are $1, they will quickly move on. Generally, use cases requiring “low” fees are driven off the chain, as in the case of the gambling service SatoshiDICE, which had to cease its activities on BTC in 2017 following the increase in fees.</p>
<p>The transaction capacity limit has the virtue of ensuring that the cost of operating a node remains low. It thus impacts the network’s <em>potential</em> decentralization. Indeed, unlike mining hardware, the cost related to verification is not offset by a proportional income, so it affects everyone equally. The least equipped node operators cannot keep up, which can affect the network’s ability to decentralize <em>effectively</em>.</p>
<p>The influence on potential decentralization affects both mining and commerce by preventing smaller actors from engaging in these activities at their scale. The centralization of mining increases the risk of censorship, while the centralization of commerce raises the risk of protocol alteration, and thus inflation risk. This is why the transaction capacity limit plays a major role in the security model: the lower this limit, the greater the system’s <em>potential</em> security.</p>
<p>The transaction capacity limit is subjectively determined by merchants, based on their <em>perception of the threat</em> and their <em>personal use</em> of the chain. There is no ideal block size limit; there are only human beings calculating risk relative to a potential reward. One might attempt to establish an average to estimate a limit corresponding to a given usage, but such an estimate would be at best imperfect.</p>
<p>Through its effect on decentralization, the limit creates a utility ceiling—that is, a value level above which transfer and holding are considered too risky for the system’s effective security. Indeed, since no security is absolute, transferring and holding a certain value may no longer sufficiently benefit from the network’s protection. For example, receiving or storing the equivalent of several million dollars on the Bitcoin SV chain is, to say the least, imprudent.</p>
<p>The utility floor (induced by the limit’s negative impact on block space) and the utility ceiling (induced by the limit’s positive impact on security) have the effect of bounding a range of values outside which transfer and holding are no longer relevant<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. It is the existence of this range of values that leads to the emergence of substitutes for a given system.</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;See Eric Voskuil, “Utility Threshold Property,” in <em>Cryptoeconomics: Fundamental Principles of Bitcoin</em>, Amazon KDP, 2022, pp.&nbsp;317–318.</p></div></div><p>The arrival of new users and the subsequent increase in demand for block space raise the utility floor. Any scaling up of the system modifies its characteristics. Therefore, any Bitcoin system is essentially non-scalable, in the primary sense of the term. However, there are methods to circumvent this lack of scalability.</p>
</section>
<section id="improving-base-efficiency" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="improving-base-efficiency">Improving Base Efficiency</h2>
<p>The first proposal regarding scaling up was to gradually increase the block size limit to accompany the rise in activity<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. This was the solution supported by Satoshi Nakamoto, as evidenced by his first reaction to James A. Donald’s response on November 3, 2008:</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Among the alternative versions of Bitcoin, the path of progressively increasing the block size limit was chosen by Bitcoin Cash, which plans to integrate an algorithm to manage this increase automatically. See bitcoincashautist, <em>CHIP-2023-04: Adaptive Blocksize Limit Algorithm for Bitcoin Cash</em>, September&nbsp;2, 2023: <a href="https://gitlab.com/0353F40E/ebaa/-/blob/f4edacd134103a7e232740463a5f26379bf90f18/README.md" class="uri">https://gitlab.com/0353F40E/ebaa/-/blob/f4edacd134103a7e232740463a5f26379bf90f18/README.md</a>.</p></div><div id="fn5"><p><sup>5</sup>&nbsp;Satoshi Nakamoto, <em>Re: Bitcoin P2P e-cash paper</em>, November&nbsp;3, 2008, 01:37:43 UTC: <a href="https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html" class="uri">https://www.metzdowd.com/pipermail/cryptography/2008-November/014815.html</a>.</p></div></div><p>“Bandwidth might not be as prohibitive as you think. A typical transaction is about 400 bytes (ECC is nice and compact). Transactions need to be broadcast twice, so let’s say 1&nbsp;KB per transaction. Visa processed 37 billion transactions in FY2008, so that’s 100 million transactions per day. That many transactions would take 100&nbsp;GB of bandwidth, or the size of 12 DVDs or about 2 HD quality movies, or about $18 worth of bandwidth at current prices. If the network were to get that big, it would take several years, and by then, sending two HD movies over the Internet probably won’t seem like a big deal<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>.”</p>
<p>However, Satoshi’s vision was far too optimistic. On one hand, he did not see mining centralization as an existential problem, predicting from the start that the network’s computing power would rely on “server farms with specialized hardware.” On the other hand, he thought that Simplified Payment Verification (SPV) would suffice, not accounting for its unreliability and lack of confidentiality, nor its inability to exert power over determining consensus rules. Satoshi’s plan was therefore fallible, though not entirely misguided.</p>
<p>Operating a node depends on a number of burdens. The main ones are hard disk storage (HDD) for the history (blockchain), flash memory storage (SSD) for the state (UTXO set), random access memory (RAM) storage for the unconfirmed transaction pool (mempool) and orphan block pool, maintaining bandwidth (usually expressed in Mbps) sufficient to receive and send blocks and transactions, and CPU computation for data verification, notably signatures. Reducing the cost of running a node thus involves reducing one of these burdens.</p>
<p>Even if naive increases to the block size limit are not in themselves a scalability method, they can be offset by technical progress from software, hardware, or algorithmic optimization. Firstly, software performance (for a given set of consensus rules) can be improved, and this is indeed one of the basic tasks of the Bitcoin Core team<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. Secondly, computer hardware can be made more efficient, with certain components gradually becoming less expensive (Moore’s Law<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>). Thirdly, the protocol itself can be improved at the algorithmic level, through the discovery and adoption of new, more efficient techniques: for example, the Schnorr signature algorithm produces more compact signatures than ECDSA (40&nbsp;bytes instead of 72), or bulletproofs make the range proofs of Confidential Transactions much less voluminous.</p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;See, for example, Jameson Lopp’s article on Bitcoin Core performance evolution, in which he describes how the first synchronization on his machine has improved over the years. — Jameson Lopp, <em>Bitcoin Core Performance Evolution</em>, March&nbsp;5, 2022: <a href="https://blog.lopp.net/bitcoin-core-performance-evolution/" class="uri">https://blog.lopp.net/bitcoin-core-performance-evolution/</a>.</p></div><div id="fn7"><p><sup>7</sup>&nbsp;Moore’s Law is a conjecture stated by Gordon E. Moore in 1965, which posited that the complexity of semiconductors doubled every year. This law was cited by Satoshi Nakamoto in the white paper, who wrote: “Moore’s Law predicts current growth of 1.2&nbsp;GB per year, so storage should not be a problem even if the block headers must be kept in memory.” — Satoshi Nakamoto, <em>Bitcoin: A Peer-to-Peer Electronic Cash System</em>, October&nbsp;31, 2008.</p></div></div><p>Beyond these optimizations, there is no way to increase the transaction volume of the chain without compromising the Bitcoin model. The solution is to modify the system’s behavior in such a way that it does not overly affect the security model. Several factors can thus be optimized, including the size of the chain to keep, the Initial Block Download (IBD), and the size of the UTXO set.</p>
<p>First, one can choose to delete the oldest blocks once they have been verified. One simply keeps the chain of headers, the network state, and the most recent blocks to be able to rejoin consensus in the event of a deep reorganization. This method is called pruning.</p>
<p>But this method does not alleviate the burden of the IBD, that is, the process of downloading and verifying the blockchain up to its current height. To address this, various more or less risky techniques can be employed. The first is signature validity assumption, based on the <code>assumevalid</code> parameter, introduced in Bitcoin Core in 2017<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>, which involves skipping signature verification up to a given block hash, saving a lot of time during initial synchronization. This method is not a checkpoint (it does not require the block to exist), and the risk it poses is minimal. The second technique is AssumeUTXO, proposed in 2019 by James O’Beirne and still in development<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>, which involves assuming valid a given UTXO set (identified by its hash) at a determined block height: the node operator downloads the UTXO snapshot from a third party and begins initial synchronization from there, deferring (or entirely ignoring) the download and verification of previous blocks. This method presents a verification defect (at least temporarily), exposing the operator to deception, but the risk is considered acceptable. There is also a third, more radical technique: UTXO commitments, which is a soft fork requiring miners to add the UTXO set hash to the block<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>; this commitment would allow a much more reliable source for downloading the snapshot from which to begin synchronization.</p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;Bitcoin Core, <em>Bitcoin Core 0.14.0</em>, March&nbsp;8, 2017: <a href="https://bitcoincore.org/en/2017/03/08/release-0.14.0/#assumed-valid-blocks" class="uri">https://bitcoincore.org/en/2017/03/08/release-0.14.0/#assumed-valid-blocks</a>.</p></div><div id="fn9"><p><sup>9</sup>&nbsp;James O’Beirne, <em>AssumeUTXO Proposal</em>, April&nbsp;24, 2019: <a href="https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal" class="uri">https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal</a>.</p></div><div id="fn10"><p><sup>10</sup>&nbsp;Mark Friedenbach, <em>[soft fork] Block v3: miner commitments with compact proofs</em>, March&nbsp;28, 2014: <a href="https://github.com/bitcoin/bitcoin/pull/3977" class="uri">https://github.com/bitcoin/bitcoin/pull/3977</a>; Pieter Wuille, <em>[bitcoin-dev] Rolling UTXO set hashes</em>, May&nbsp;15, 2017, 20:01:14 UTC: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html" class="uri">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html</a>.</p></div><div id="fn11"><p><sup>11</sup>&nbsp;Cory Fields, <em>UHS: Full-node security without maintaining a full UTXO set</em>, May&nbsp;16, 2018, 16:36:35 UTC: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html" class="uri">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html</a>.</p></div><div id="fn12"><p><sup>12</sup>&nbsp;Thaddeus Dryja, <em>Utreexo: A dynamic hash-based accumulator optimized for the Bitcoin UTXO set</em>, June&nbsp;6, 2019: <a href="https://eprint.iacr.org/2019/611.pdf" class="uri">https://eprint.iacr.org/2019/611.pdf</a>.</p></div></div><p>Then, beyond the IBD, there remains the problem of the UTXO set size, which is one of the most important limiting factors. The first idea to reduce this size is a proposal by Cory Fields called UHS (for UTXO Hash Set), which involves storing only the hashes of individual UTXOs<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>. The second idea is to use cryptographic accumulators, as Thaddeus Dryja did with his proposal named Utreexo, which involves grouping UTXOs into Merkle trees to condense the set to keep in memory, at the cost of a trade-off on bandwidth<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>.</p>
<p>Finally, one can choose to split mining and transaction verification by separating the system’s history and state into several fragments, each supported by a (variable) part of the network. This is called sharding. This was the idea behind using a Merkle-Patricia prefix tree (also called a Merklix tree) vaguely considered by Bitcoin Cash developers, or danksharding, which could be implemented in Ethereum. However, this is a significant modification of the protocol that may never be implemented in a version of Bitcoin.</p>
<p>These proposals are compromises made at the chain level, often affecting the system in its entirety. However, it is also possible to make a different compromise at the level of individual coins, by using banks and, especially, overlays.</p>
</section>
<section id="banks-and-overlays" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="banks-and-overlays">Banks and Overlays</h2>
<p>Other proposals generally cited as alternatives to increasing block size are solutions that avoid making all transfers on-chain by offloading smaller ones elsewhere, these being “bundled” into larger transactions. The chain is then used to settle debts, contracted analogically (legal contract) or digitally (smart contract). This involves considering the protocol as a settlement protocol.</p>
<p>The first way to do this is to reintroduce trust into the system by contracting obligations traditionally, with what we will call here banks. These banks can issue representative money by holding all the funds or offer credit by keeping only fractional reserves. Using the chain serves for settlement between banks, ensuring the transfer of funds between their clients. This is essentially the model of free banking promoted by George Selgin and Larry White in the 1990s.</p>
<p>This first conception was defended by Hal Finney, who was aware of Selgin and White’s work, as we saw in Chapter&nbsp;<a href="#ch:cybermonnaie" data-reference-type="ref" data-reference="ch:cybermonnaie">6</a>. On December 30, 2010, he thus praised a free banking model based on Bitcoin:</p>
<p>“In fact, there is a very good reason why Bitcoin-based banks will exist and issue their own digital currency, convertible to bitcoin. Bitcoin itself cannot scale to have every financial transaction in the world be broadcast to everyone and included in the blockchain. There needs to be a secondary level of payment systems which is lighter weight and more efficient. […] Bitcoin-based banks will solve these problems. They can work like banks did before nationalization of money. Different banks can have differing policies, some more aggressive, some more conservative. […] I believe this will be the ultimate fate of bitcoin, to be the ‘high-powered money’ that serves as a reserve currency for banks that issue their own digital cash. Most bitcoin transactions will occur between banks to settle net transfers. Bitcoin transactions by private individuals will be as rare as… well, as Bitcoin-based purchases are today<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>.”</p>
<div class="no-row-height column-margin column-container"><div id="fn13"><p><sup>13</sup>&nbsp;Hal Finney, <em>Re: Bitcoin Bank</em>, December&nbsp;30, 2010, 01:38:40 UTC,<a href="https://bitcointalk.org/index.php?topic=2500.msg34211#msg34211" class="uri">https://bitcointalk.org/index.php?topic=2500.msg34211#msg34211</a>.</p></div><div id="fn14"><p><sup>14</sup>&nbsp;“Bitcoin can be seen as a new and emerging system of reserve currency for online transactions, in which online banks will issue tokens backed by bitcoin for their users, while keeping their reserves in bitcoins in offline storage. Every individual will be able to audit the intermediary’s holdings in real time, and systems of verification and reputation will ensure that no inflation occurs.” — Saifedean Ammous, <em>The Bitcoin Standard</em>, Wiley Publishing, 2018, p.&nbsp;206.</p></div></div><p>This vision was echoed in 2018 by Saifedean Ammous in his book, <em>The Bitcoin Standard</em>, in which he argued that bitcoin’s primary role was to be a reserve currency<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>. This thesis was later developed by others like Nik Bhatia.</p>
<p>In reality, this way of diverting chain activity has materialized with exchanges, which allowed handling the numerous buy and sell orders related to speculation. It has also manifested through casino platforms that grouped operations related to gambling. Finally, it has been implemented by custodial services like Grayscale, which offered financial institutions the possibility of including bitcoin on their balance sheets.</p>
<p>However, this is not a scaling solution for Bitcoin. Bank processing is not censorship-resistant, nor inflation-resistant, and its generalization would ultimately lead to the total destruction of Bitcoin’s value proposition. Thus, one can reasonably assume that such a solution can only work on a small scale, for modest amounts, insofar as the state will not intervene, as in the case of Bitcoin Beach in El Salvador.</p>
<p>The second variant of this solution is to proceed not through legal contracts relying on trust but through smart contracts, aiming to manage transfers off-chain. The idea is to minimize trust to make the process viable. This was, for example, the approach behind <em>fidelity bonds</em>, proposed by Peter Todd in 2013, whose goal was to reduce the influence of third parties while preserving clients’ financial privacy and allowing efficient auditing of banks<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn15"><p><sup>15</sup>&nbsp;Peter Todd, <em>Fidelity-bonded banks: decentralized, auditable, private, off-chain payments</em>, February&nbsp;23, 2023, 17:49:34 UTC: <a href="https://bitcointalk.org/index.php?topic=146307.msg1553349#msg1553349" class="uri">https://bitcointalk.org/index.php?topic=146307.msg1553349#msg1553349</a>.</p></div></div><p>This approach has popularized what is generally called layering, which involves offloading financial activity to open and decentralized protocols, partially preserving the chain’s properties. The idea is to condense a multitude of transfers into a small number of transactions performed on the base layer, that is, the blockchain. This terminology comes from the decomposition into layers of the Internet protocol suite, which is organized into multiple dependent layers, like TCP relying on IP.</p>
<p>In layering, the security compromise is partial (only certain bitcoins are concerned) and time-limited (these bitcoins can be recovered on-chain), as opposed to the transaction capacity increase case where it is total and persistent. It is a method consistent with the two-layer model that Nick Szabo envisioned for bit gold, with a base layer whose role was to guarantee the unforgeable scarcity of money, and an upper layer that allowed effective payments.</p>
<p>There is thus a diversity of proposals enabling this layering by making a more or less significant compromise. The main ones are sidechains, the Lightning Network, and Fedimint, which we will discuss in detail later. There are also other proposals like physical object exchange (OpenDime), the Rumple protocol, statechains, ZK-rollups, or the Ark protocol.</p>
</section>
<section id="sidechains" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="sidechains">Sidechains</h2>
<p>Sidechains are secondary blockchains operating parallel to another blockchain known as the “main” chain. They were formalized in October 2014 by Blockstream developers<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>. This technical solution provides additional processing capacity and higher extensibility, at the price of a slightly diminished local security. In 2014, Blockstream envisioned building an entire ecosystem of sidechains to accomplish tasks impossible on the main chain, such as issuing native assets, deploying advanced smart contracts, or managing domain names.</p>
<div class="no-row-height column-margin column-container"><div id="fn16"><p><sup>16</sup>&nbsp;Adam Back, Matt Corallo, Luke Dashjr, Mark Friedenbach, Gregory Maxwell, Andrew Miller, Andrew Poelstra, Jorge Timón, Pieter Wuille, <em>Enabling Blockchain Innovations with Pegged Sidechains</em>, October&nbsp;22, 2014: <a href="https://blockstream.com/sidechains.pdf" class="uri">https://blockstream.com/sidechains.pdf</a>.</p></div></div><p>A sidechain is a parallel blockchain that allows transferring funds from one chain to another without compromising the integrity of the moved funds. This generally involves a two-way peg allowing bitcoins to be transferred between chains without loss of value, as shown in Figure&nbsp;<a href="#fig:sidechain-two-way-peg" data-reference-type="ref" data-reference="fig:sidechain-two-way-peg">14.1</a>. In one direction, bitcoins are locked on the main chain and their equivalent is created on the sidechain; in the other, bitcoins are destroyed on the sidechain and their equivalent is unlocked on the main chain.</p>
<p>Two aspects differentiate a sidechain’s security model from that of the main chain: maintaining the two-way peg and the consensus mechanism. The first involves deciding who can unlock funds during a transfer from the sidechain to the main chain. Indeed, since the sidechain is intended as a complement (not an extension), the main chain’s nodes are unaware of this sidechain. Consequently, withdrawal is subject to some trust, usually placed in a federation of participants who distrust one another.</p>
<div id="fig:sidechain-two-way-peg" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="img/sidechain-two-way-peg.png" class="img-fluid figure-img"></p>
<figcaption>Sidechain: deposit, transfer, and withdrawal.</figcaption>
</figure>
</div>
<p>The second aspect concerns transaction confirmation on the sidechain, where options are more varied. The consensus can rely on merged mining, in which case the main chain’s work is used. It can be based on proof-of-stake, involving the main chain’s unit. Or it can use a federation agreeing through a classical BFT algorithm, in which case membership in this federation matters (proof-of-authority).</p>
<p>This vision materialized with the launch on BTC of two distinct sidechains in 2018. The first was RSK (also called Rootstock), launched by Sergio Lerner in January that year, focused on running a Turing-complete virtual machine close to Ethereum’s. The second was Liquid, the implementation of the Elements model developed by Blockstream, whose primary goal was to facilitate transactions between various financial actors in the sector, including exchanges. In Liquid, security relies on a federation of functionaries performing both roles: they maintain the L-BTC peg as watchmen and participate in the chain’s consensus as block signers. RSK combines merged mining and a federation of “notaries” to ensure both the anchoring of RBTC and transaction processing.</p>
<p>However, the two sidechains have not managed to attract significant activity over the years due to associated risks. Indeed, using these chains still requires a form of trust that, although minimized, remains present. An unfortunate example of a sidechain gone wrong is the SmartBCH sidechain of Bitcoin Cash, where the company managing the largest bridge between the two chains, CoinFLEX, went bankrupt and could not reimburse users.</p>
<p>To address these drawbacks and reduce the involved trust, a more advanced protocol was developed by researcher Paul Sztorc since November 2015: Drivechain<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a>. As its name suggests (drive chain meaning transmission chain), it is a true machine for creating and managing sidechains.</p>
<div class="no-row-height column-margin column-container"><div id="fn17"><p><sup>17</sup>&nbsp;Paul Sztorc, <em>Drivechain - The Simple Two Way Peg</em>, November&nbsp;24, 2015: <a href="https://www.truthcoin.info/blog/drivechain/" class="uri">https://www.truthcoin.info/blog/drivechain/</a>.</p></div></div><p>Drivechain’s main feature is that the two-way peg is entrusted to miners, through hashrate escrow defined in BIP-300. During each six-month period (26,300&nbsp;blocks), miners vote for the sidechain withdrawal transaction distributing funds to users who requested it. The transparency and slowness of these transactions allow all main chain merchants to audit them. Regular, faster transfers are made via atomic swaps or centralized services.</p>
<p>Transaction validation on a sidechain using Drivechain can be ensured by any consensus algorithm. But the most natural is to use merged mining. That’s why the Drivechain project also includes the proposal for “blind” merged mining (BIP-301), a technique allowing main chain miners to automatically delegate sidechain validation to others in exchange for remuneration. The validator earns the difference between the sidechain’s revenue and the purchase of the “right to find a block.” This has the effect of not obliging miners to manage sidechains while still receiving part of their revenue.</p>
<p>Drivechain is a clever concept that would fully realize Blockstream’s 2014 vision. However, it has a major drawback: the security model of its two-way peg. It relies on the potential recourse to a soft fork carried out by merchants to correct a fraudulent withdrawal transaction, which could, for example, be the doing of malicious miners seeking to steal the escrowed funds. It thus depends on merchants’ propensity to monitor the sidechain’s activity on one hand, and to proceed with a protocol modification to freeze the incriminated transaction on the other. This is why the proposal is, even today in 2023, hotly disputed.</p>
</section>
<section id="the-lightning-network" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="the-lightning-network">The Lightning Network</h2>
<p>The Lightning Network is a concept of a network of bidirectional payment channels. It was first presented on February&nbsp;23, 2015, by Joseph Poon and Thaddeus Dryja during a Bitcoin developers’ seminar in San Francisco<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>. At the time, competing proposals based on similar ideas existed, such as Amiko Pay (conceptualized by Corné Plooy), Impulse (developed by Jeff Garzik for Bitpay), and Ström (imagined by the startup Strawpay), but Lightning quickly became dominant. In 2023, it was the favored solution by BTC users to perform more transfers, so much so that the acronym LNP/BP emerged to designate all protocols involved in layering (akin to TCP/IP for the Internet).</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;Taariq Lewis, <em>SF Bitcoin Devs Seminar: Scaling Bitcoin to Billions of Transactions Per Day</em>, March&nbsp;5, 2015: <a href="https://www.youtube.com/watch?v=8zVzw912wPo" class="uri">https://www.youtube.com/watch?v=8zVzw912wPo</a>.</p></div></div><p>The Lightning Network infrastructure relies on payment channels opened and closed between participants. A payment channel is, as described in Chapter&nbsp;<a href="#ch:contrats" data-reference-type="ref" data-reference="ch:contrats">13</a>, a set of smart contracts that allows two people to make repeated payments safely and instantly from previously locked liquidity. The use of a channel is therefore limited by its capacity, that is, the sum of both actors’ balances.</p>
<p>The principle of the Lightning Network is to route payments through these channels via HTLCs, which are more complex commitment contracts allowing the involved channels to be updated<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>. A payment transits over the network with minimal fees that go to the nodes relaying it. The Lightning Network is thus akin to an abacus, where the rods are channels and the beads are satoshis moving from one side to the other of the channels, as shown in Figure&nbsp;<a href="#fig:lightning-network-abacus" data-reference-type="ref" data-reference="fig:lightning-network-abacus">14.2</a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;In practice, these HTLCs are often also used to update the channels directly, to simplify implementation and improve privacy. — See Andreas M. Antonopoulos, Olaoluwa Osuntokun, René Pickhardt, “Routing on a Network of Payment Channels,” in <em>Mastering the Lightning Network: A Second Layer Blockchain Protocol for Instant Bitcoin Payments</em>, O’Reilly Media, 2022, pp.&nbsp;185–207.</p></div></div><div id="fig:lightning-network-abacus" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="img/lightning-network-abacus.png" class="img-fluid figure-img"></p>
<figcaption>Payment of 3&nbsp;mBTC on the Lightning Network.</figcaption>
</figure>
</div>
<p>This functioning offers the possibility of making almost instantaneous and cheap payments. It allows more bitcoin transfers without making more transactions on-chain and without explicitly delegating fund management to a third party. Moreover, the model retains all of Bitcoin’s programmability and opens up possibilities for monetary use on the Internet.</p>
<p>However, Lightning’s benefits should be tempered because it is not without flaws. First, it inherits drawbacks related to the payment channel model where, in the case of the Poon-Dryja protocol, an error can lead to loss of funds. Then, constraints related to capacity and routing necessarily create a tendency toward centralization, notably through the emergence of so-called Lightning Service Providers, which could lead to censorship. Furthermore, contrary to popular belief, privacy on Lightning is weak, as payments are made between identified public keys and transit through intermediaries. Finally, the network is subject to the fee level on the main chain, necessary for contract settlement, which limits the additional transaction capacity provided.</p>
<p>The Lightning Network is therefore suitable for handling everyday payments and micropayments that do not necessarily require the confidentiality and censorship resistance offered by the blockchain, using well-funded channels that are regularly replenished. It was implemented from January&nbsp;2018, mainly as an overlay on BTC, and has grown considerably since, both technically and economically. Three software implementations were maintained by three different entities (lnd by Lightning Labs, c-lightning by Blockstream, eclair by ACINQ), and a system of technical standards (called Bases of Lightning Technology or BOLT) eventually emerged. Economically, the network met with some success by attracting capital, and in November&nbsp;2023, a total capacity of 5,400&nbsp;BTC, equivalent to about 200 million dollars, was reserved to provide liquidity for payments.</p>
</section>
<section id="fedimint-chaumian-banks" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="fedimint-chaumian-banks">Fedimint Chaumian Banks</h2>
<p>Another proposal is Fedimint<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a>, a protocol for custody and confidential exchange of bitcoins in a community context. Technically, it involves entrusting bitcoin custody to a federation and exchanging Chaumian tokens (eCash) issued by that federation. This functioning explains the protocol’s name, which is an approximate abbreviation of Federated Chaumian Mint.</p>
<div class="no-row-height column-margin column-container"><div id="fn20"><p><sup>20</sup>&nbsp;The functioning of Fedimint is described in the documentation on the website: <a href="https://fedimint.org/docs/intro" class="uri">https://fedimint.org/docs/intro</a>.</p></div></div><p>Fedimint was envisioned by cypherpunk Eric Sirion during 2021 and implemented in minimal form under the name MiniMint. Sirion was doubly inspired by attempts to apply eCash as a Bitcoin overlay like SCRIT and by community approaches such as Bitcoin Beach in El Salvador. The first transaction of a Fedimint federation took place on September 28, 2022, during the Hackers Congress at Paralelni Polis.</p>
<p>The first component of Fedimint is the Chaumian bank managed by the federation. It uses David Chaum’s blind signature process to issue certificates backed by a certain amount of satoshis, which can be redeemed at any time on-chain or on the Lightning Network. This component provides partial financial privacy to participants: the bank is unaware of exchanges made by clients, but its role in preventing double-spending requires it to see merchants’ revenues<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn21"><p><sup>21</sup>&nbsp;The technical functioning of Chaumian systems was described in the section “eCash: Chaumian Cash” of Chapter&nbsp;<a href="#ch:cybermonnaie" data-reference-type="ref" data-reference="ch:cybermonnaie">6</a>.</p></div></div><p>The idea of using eCash as a Bitcoin overlay is not new. It was proposed and implemented for the first time on August&nbsp;17, 2010, by an individual operating under the pseudonym fellowtraveller on the Bitcoin forum in the form of his project Open Transactions. The project never took hold, as the need was not felt and the system was probably too complex. However, the idea timidly resurfaced during the scalability debate with the proposal of “bearer blind certificates” by Theymos (administrator of the r/Bitcoin subreddit and the Bitcointalk forum) in December&nbsp;2016. It was also taken up in 2019 by Frank Braun and Jonathan Logan (co-hosts of the Cypherpunk Bitstream podcast) through SCRIT, a federated Chaumian system project whose name is the acronym for Secure, Confidential, Reliable, Instant Transactions. The latest project to implement a centralized Chaumian system is Cashu, a protocol developed in 2022 by developer callebtc, allowing the creation and exchange of bitcoin certificates on top of Lightning and new tokens.</p>
<p>Fedimint’s interest, just like its predecessor SCRIT, is to decentralize bitcoin custody. To do this, it combines the Chaumian system with a so-called “community” approach, consisting of deploying a bank managed by trusted members of a local community.</p>
<p>This approach was illustrated by the Bitcoin Beach experiment, a sustainable economic development project around El Zonte beach in El Salvador. A community bank emerged in 2020 and has since allowed locals to exchange bitcoins safely and reliably, via the Bitcoin Beach Wallet (now Blink) developed by Galoy. This experience inspired the adoption of legal tender at the national level in September&nbsp;2021.</p>
<p>The second component of Fedimint is therefore a federation, similar to the federations of sidechains like Liquid or RSK, but composed of trusted individuals with the technical capabilities necessary to operate a node. These federation members, called guardians, are responsible for setting up the infrastructure and are in charge of storing users’ funds and ensuring the proper functioning of the Chaumian bank. They coordinate using a classical consensus algorithm (called HBBFT), which, like all such algorithms, requires at least 66% honest actors to function.</p>
<p>Using this federation represents an obvious technical compromise between full ownership of funds and their delegation to a single actor. This compromise brings major advantages in terms of transaction processing fees and ease of use but also entails significant risks. These are custody risk (the federation can steal or lose funds), fraudulent issuance risk (it can issue more certificates than it has bitcoins), censorship risk (it can refuse to validate a transaction), and regulatory risk (the federation can be seized and shut down by state decision).</p>
<p>All this means that Fedimint cannot be conceived as a scalability solution but as a proposal to replace custodial applications. Fedimint’s goal is to improve bitcoin custody by decentralizing it and increasing the confidentiality of internal exchanges. Its local character should allow it to escape financial regulations and thus avoid the fate reserved for traditional banks.</p>
</section>
<section id="scaling-through-substitution" class="level2 unnumbered page-columns page-full">
<h2 class="unnumbered anchored" data-anchor-id="scaling-through-substitution">Scaling Through Substitution</h2>
<p>Layering is a correct way to increase the economic volume related to a given chain without overly affecting its primary characteristics. Nevertheless, this approach also has limits: not only do the various overlays have their own flaws, but they ultimately rely on settlements made on the blockchain, whose capacity is limited. Consequently, the utility floor is not eliminated by layering, and thus it cannot be seen as a miraculous way to handle an infinite number of transactions.</p>
<p>The range of values served by a given cryptomonetary system results in demand for substitution systems better able to handle transfers outside this range. A system with a high fee level leaves the way open for using a less secure but cheaper system, allowing the processing of smaller transactions. Conversely, a system with low security level favors the emergence of a more expensive but also more secure system, enabling larger transfers. Therefore, there is a certain complementarity between the different implementations of Bitcoin that allow managing all transaction activity emanating from users<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn22"><p><sup>22</sup>&nbsp;Eric Voskuil, “Substitution Principle,” in <em>Cryptoeconomics: Fundamental Principles of Bitcoin</em>, Amazon KDP, 2022, pp.&nbsp;315–316.</p></div></div><p>Throughout history, such complementarity has manifested through the use of several precious metals as monetary base. Gold could not cover all value ranges: it was suitable for transferring large sums, for which it was selected as the world’s reserve currency, but not for exchanging small change. To fulfill this latter complementary role, silver, and other less precious metals like copper, were used. Silver, a word still used today in French as a synonym for money, was the currency of everyday life, while gold was mainly used for more expensive settlements.</p>
<p>This bimetallic (or even trimetallic) aspect of money persisted for centuries, from the High Antiquity to the 19th&nbsp;century. It was recognized by public authorities who defined their currency as a weight in gold or silver, and minted gold and silver coins by decreeing an exchange rate according to the gold-silver market ratio. Moreover, we observe that this gold-silver ratio was relatively stable throughout history, varying between 10 and 18, confirming silver’s monetary role alongside gold.</p>
<p>However, with the emergence of the gold standard and the disappearance of bimetallism at the end of the 19th&nbsp;century, silver gradually lost its monetary role to be replaced by paper money, initially backed by gold, much more convenient for exchanges. The ratio consequently increased from 15.5 in 1870 to 80 today, corresponding to a loss of silver’s value of over 80% relative to gold.</p>
<p>The analogy with precious metals is enlightening. Since the main version of Bitcoin (BTC) is not suitable for processing smaller value transfers, it follows that these potential transfers are carried out using a substitute currency (cryptocurrency, fiat cash, credit moved by permissive banking services, etc.) or are not processed at all. Litecoin, whose main narrative is that it would be digital silver just as Bitcoin is digital gold, perfectly meets this demand. It was thus presented from its launch as a “lighter version of Bitcoin” aiming to be “to silver what Bitcoin is to gold<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a>.” This designation stems not so much from the fact that there are four times as many litecoins as bitcoins, which has no impact on the system, but rather from the fact that LTC’s maximum transaction capacity is four times greater, which reduces the system’s potential security. This analysis also applies to Bitcoin Cash on an even larger scale.</p>
<div class="no-row-height column-margin column-container"><div id="fn23"><p><sup>23</sup>&nbsp;Charlie Lee, <em>Re: [ANN] Litecoin - a lite version of Bitcoin. Be ready when it launches!</em>, October&nbsp;9, 2011, 06:14:28 UTC: <a href="https://bitcointalk.org/index.php?topic=47417.msg564414#msg564414" class="uri">https://bitcointalk.org/index.php?topic=47417.msg564414#msg564414</a>.</p></div></div><p>In this view, alternative implementations of Bitcoin would serve to process all transactions, at the price of necessary transfers between chains. These would be ensured by centralized exchange services or by atomic swap systems based on public order books. This solution, although imperfect, would be entirely natural and is indeed already practiced today.</p>
<p>Extensibility is also affected by this effect. The technical cost of complex use of Bitcoin can be compensated by lower-quality substitution systems. Low-cost confidentiality can be provided by Monero and simplified programmability by Ethereum Classic, for example. As Satoshi Nakamoto very aptly observed in December&nbsp;2010 regarding the relevance of BitDNS (the future Namecoin):</p>
<p>“Putting all proof-of-work quorum systems into one dataset doesn’t scale. Bitcoin and BitDNS can be used separately. […] The networks need to be able to grow and die separately. Users of BitDNS might be extremely liberal about adding features that bloat the chain, since not many DNS root servers are needed, whereas Bitcoin users might get increasingly conservative about keeping the blockchain small so that it’s easy for lots of users and small devices<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a>.”</p>
<div class="no-row-height column-margin column-container"><div id="fn24"><p><sup>24</sup>&nbsp;Satoshi Nakamoto, <em>Re: BitDNS and Generalizing Bitcoin</em>, December&nbsp;10, 2010, 17:29:28: <a href="https://bitcointalk.org/index.php?topic=1790.msg28917#msg28917" class="uri">https://bitcointalk.org/index.php?topic=1790.msg28917#msg28917</a>.</p></div></div></section>
<section id="three-types-of-compromises" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="three-types-of-compromises">Three Types of Compromises</h2>
<p>Bitcoin’s scalability is a complex subject. Contrary to what is sometimes claimed, a given system is hardly scalable. Its ability to scale up can only be improved through software, hardware, or algorithmic optimizations. Performance gains on the chain most often come at the price of a direct compromise, with increasing the transaction capacity limit, or an indirect one, with altering the security model.</p>
<p>This is the reason for the existence of layering, which involves offloading part of the economic transfers to open and decentralized protocols, partially preserving Bitcoin’s properties and relying on dispute settlement on the chain. In this approach, the security compromise is partial and time-limited, unlike the transaction capacity increase where it is total and persistent. Layering has developed on BTC over time through sidechains, proposed in 2014 and implemented in 2018; the Lightning Network, proposed in 2015 and deployed since 2018; and Fedimint, proposed in 2021.</p>
<p>The other alternative is scaling through substitution, which essentially involves moving less risky transactions to lower-quality substitutes, that is, less secure implementations of the Bitcoin concept. This effect truly manifested for the first time in 2017 with the initial congestion on the BTC network and the rise in demand for static smart contracts (Ethereum), which notably accompanied a decrease in the economic dominance of Bitcoin’s main version. Maximalists tend to claim that layering allows handling all relevant uses of Bitcoin, but, until proven otherwise, this is not the case.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/les-contrats-autonomes.html" class="pagination-link" aria-label="Autonomous Contracts">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Autonomous Contracts</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/l-avenir-de-bitcoin.html" class="pagination-link" aria-label="The Future of Bitcoin">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Future of Bitcoin</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 © 2024 Konsensus Network
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../index.html">
<p>License</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../presale.html">
<p>Acheter</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/konsensusn">
      <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/konsensusnetwork">
      <i class="bi bi-github" role="img" aria-label="Github">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/konsensusnetwork">
      <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/konsensusnetwork">
      <i class="bi bi-youtube" role="img" aria-label="YouTube">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>